import{r as t,c as r}from"./p-2b5cae01.js";const e=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}var s=n;var o=i;if(typeof e.setTimeout==="function"){s=setTimeout}if(typeof e.clearTimeout==="function"){o=clearTimeout}function a(t){if(s===setTimeout){return setTimeout(t,0)}if((s===n||!s)&&setTimeout){s=setTimeout;return setTimeout(t,0)}try{return s(t,0)}catch(r){try{return s.call(null,t,0)}catch(r){return s.call(this,t,0)}}}function u(t){if(o===clearTimeout){return clearTimeout(t)}if((o===i||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(t)}try{return o(t)}catch(r){try{return o.call(null,t)}catch(r){return o.call(this,t)}}}var f=[];var c=false;var h;var l=-1;function v(){if(!c||!h){return}c=false;if(h.length){f=h.concat(f)}else{l=-1}if(f.length){d()}}function d(){if(c){return}var t=a(v);c=true;var r=f.length;while(r){h=f;f=[];while(++l<r){if(h){h[l].run()}}l=-1;r=f.length}h=null;c=false;u(t)}function w(t){var r=new Array(arguments.length-1);if(arguments.length>1){for(var e=1;e<arguments.length;e++){r[e-1]=arguments[e]}}f.push(new m(t,r));if(f.length===1&&!c){a(d)}}function m(t,r){this.fun=t;this.array=r}m.prototype.run=function(){this.fun.apply(null,this.array)};var y="browser";var b="browser";var p=true;var E={};var g=[];var P="";var S={};var T={};var $={};function k(){}var A=k;var O=k;var _=k;var D=k;var j=k;var N=k;var R=k;function I(t){throw new Error("process.binding is not supported")}function M(){return"/"}function x(t){throw new Error("process.chdir is not supported")}function C(){return 0}var L=e.performance||{};var B=L.now||L.mozNow||L.msNow||L.oNow||L.webkitNow||function(){return(new Date).getTime()};function U(t){var r=B.call(L)*.001;var e=Math.floor(r);var n=Math.floor(r%1*1e9);if(t){e=e-t[0];n=n-t[1];if(n<0){e--;n+=1e9}}return[e,n]}var F=new Date;function q(){var t=new Date;var r=t-F;return r/1e3}var G={nextTick:w,title:y,browser:p,env:E,argv:g,version:P,versions:S,on:A,addListener:O,once:_,off:D,removeListener:j,removeAllListeners:N,emit:R,binding:I,cwd:M,chdir:x,umask:C,hrtime:U,platform:b,release:T,config:$,uptime:q};const W="/Volumes/Development_Lacie/Development/test/test-sqlite-delete/jeep-sqlite/node_modules/sql.js/dist";var z=[];var H=[];var Z=typeof Uint8Array!=="undefined"?Uint8Array:Array;var J=false;function V(){J=true;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var r=0,e=t.length;r<e;++r){z[r]=t[r];H[t.charCodeAt(r)]=r}H["-".charCodeAt(0)]=62;H["_".charCodeAt(0)]=63}function Q(t){if(!J){V()}var r,e,n,i,s,o;var a=t.length;if(a%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}s=t[a-2]==="="?2:t[a-1]==="="?1:0;o=new Z(a*3/4-s);n=s>0?a-4:a;var u=0;for(r=0,e=0;r<n;r+=4,e+=3){i=H[t.charCodeAt(r)]<<18|H[t.charCodeAt(r+1)]<<12|H[t.charCodeAt(r+2)]<<6|H[t.charCodeAt(r+3)];o[u++]=i>>16&255;o[u++]=i>>8&255;o[u++]=i&255}if(s===2){i=H[t.charCodeAt(r)]<<2|H[t.charCodeAt(r+1)]>>4;o[u++]=i&255}else if(s===1){i=H[t.charCodeAt(r)]<<10|H[t.charCodeAt(r+1)]<<4|H[t.charCodeAt(r+2)]>>2;o[u++]=i>>8&255;o[u++]=i&255}return o}function K(t){return z[t>>18&63]+z[t>>12&63]+z[t>>6&63]+z[t&63]}function X(t,r,e){var n;var i=[];for(var s=r;s<e;s+=3){n=(t[s]<<16)+(t[s+1]<<8)+t[s+2];i.push(K(n))}return i.join("")}function Y(t){if(!J){V()}var r;var e=t.length;var n=e%3;var i="";var s=[];var o=16383;for(var a=0,u=e-n;a<u;a+=o){s.push(X(t,a,a+o>u?u:a+o))}if(n===1){r=t[e-1];i+=z[r>>2];i+=z[r<<4&63];i+="=="}else if(n===2){r=(t[e-2]<<8)+t[e-1];i+=z[r>>10];i+=z[r>>4&63];i+=z[r<<2&63];i+="="}s.push(i);return s.join("")}function tt(t,r,e,n,i){var s,o;var a=i*8-n-1;var u=(1<<a)-1;var f=u>>1;var c=-7;var h=e?i-1:0;var l=e?-1:1;var v=t[r+h];h+=l;s=v&(1<<-c)-1;v>>=-c;c+=a;for(;c>0;s=s*256+t[r+h],h+=l,c-=8){}o=s&(1<<-c)-1;s>>=-c;c+=n;for(;c>0;o=o*256+t[r+h],h+=l,c-=8){}if(s===0){s=1-f}else if(s===u){return o?NaN:(v?-1:1)*Infinity}else{o=o+Math.pow(2,n);s=s-f}return(v?-1:1)*o*Math.pow(2,s-n)}function rt(t,r,e,n,i,s){var o,a,u;var f=s*8-i-1;var c=(1<<f)-1;var h=c>>1;var l=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var v=n?0:s-1;var d=n?1:-1;var w=r<0||r===0&&1/r<0?1:0;r=Math.abs(r);if(isNaN(r)||r===Infinity){a=isNaN(r)?1:0;o=c}else{o=Math.floor(Math.log(r)/Math.LN2);if(r*(u=Math.pow(2,-o))<1){o--;u*=2}if(o+h>=1){r+=l/u}else{r+=l*Math.pow(2,1-h)}if(r*u>=2){o++;u/=2}if(o+h>=c){a=0;o=c}else if(o+h>=1){a=(r*u-1)*Math.pow(2,i);o=o+h}else{a=r*Math.pow(2,h-1)*Math.pow(2,i);o=0}}for(;i>=8;t[e+v]=a&255,v+=d,a/=256,i-=8){}o=o<<i|a;f+=i;for(;f>0;t[e+v]=o&255,v+=d,o/=256,f-=8){}t[e+v-d]|=w*128}var et={}.toString;var nt=Array.isArray||function(t){return et.call(t)=="[object Array]"};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var it=50;at.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT!==undefined?e.TYPED_ARRAY_SUPPORT:true;function st(){return at.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ot(t,r){if(st()<r){throw new RangeError("Invalid typed array length")}if(at.TYPED_ARRAY_SUPPORT){t=new Uint8Array(r);t.__proto__=at.prototype}else{if(t===null){t=new at(r)}t.length=r}return t}function at(t,r,e){if(!at.TYPED_ARRAY_SUPPORT&&!(this instanceof at)){return new at(t,r,e)}if(typeof t==="number"){if(typeof r==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return ht(this,t)}return ut(this,t,r,e)}at.poolSize=8192;at._augment=function(t){t.__proto__=at.prototype;return t};function ut(t,r,e,n){if(typeof r==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&r instanceof ArrayBuffer){return dt(t,r,e,n)}if(typeof r==="string"){return lt(t,r,e)}return wt(t,r)}at.from=function(t,r,e){return ut(null,t,r,e)};if(at.TYPED_ARRAY_SUPPORT){at.prototype.__proto__=Uint8Array.prototype;at.__proto__=Uint8Array}function ft(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be a number')}else if(t<0){throw new RangeError('"size" argument must not be negative')}}function ct(t,r,e,n){ft(r);if(r<=0){return ot(t,r)}if(e!==undefined){return typeof n==="string"?ot(t,r).fill(e,n):ot(t,r).fill(e)}return ot(t,r)}at.alloc=function(t,r,e){return ct(null,t,r,e)};function ht(t,r){ft(r);t=ot(t,r<0?0:mt(r)|0);if(!at.TYPED_ARRAY_SUPPORT){for(var e=0;e<r;++e){t[e]=0}}return t}at.allocUnsafe=function(t){return ht(null,t)};at.allocUnsafeSlow=function(t){return ht(null,t)};function lt(t,r,e){if(typeof e!=="string"||e===""){e="utf8"}if(!at.isEncoding(e)){throw new TypeError('"encoding" must be a valid string encoding')}var n=bt(r,e)|0;t=ot(t,n);var i=t.write(r,e);if(i!==n){t=t.slice(0,i)}return t}function vt(t,r){var e=r.length<0?0:mt(r.length)|0;t=ot(t,e);for(var n=0;n<e;n+=1){t[n]=r[n]&255}return t}function dt(t,r,e,n){if(e<0||r.byteLength<e){throw new RangeError("'offset' is out of bounds")}if(r.byteLength<e+(n||0)){throw new RangeError("'length' is out of bounds")}if(e===undefined&&n===undefined){r=new Uint8Array(r)}else if(n===undefined){r=new Uint8Array(r,e)}else{r=new Uint8Array(r,e,n)}if(at.TYPED_ARRAY_SUPPORT){t=r;t.__proto__=at.prototype}else{t=vt(t,r)}return t}function wt(t,r){if(yt(r)){var e=mt(r.length)|0;t=ot(t,e);if(t.length===0){return t}r.copy(t,0,0,e);return t}if(r){if(typeof ArrayBuffer!=="undefined"&&r.buffer instanceof ArrayBuffer||"length"in r){if(typeof r.length!=="number"||Yt(r.length)){return ot(t,0)}return vt(t,r)}if(r.type==="Buffer"&&nt(r.data)){return vt(t,r.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function mt(t){if(t>=st()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+st().toString(16)+" bytes")}return t|0}at.isBuffer=tr;function yt(t){return!!(t!=null&&t._isBuffer)}at.compare=function t(r,e){if(!yt(r)||!yt(e)){throw new TypeError("Arguments must be Buffers")}if(r===e)return 0;var n=r.length;var i=e.length;for(var s=0,o=Math.min(n,i);s<o;++s){if(r[s]!==e[s]){n=r[s];i=e[s];break}}if(n<i)return-1;if(i<n)return 1;return 0};at.isEncoding=function t(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};at.concat=function t(r,e){if(!nt(r)){throw new TypeError('"list" argument must be an Array of Buffers')}if(r.length===0){return at.alloc(0)}var n;if(e===undefined){e=0;for(n=0;n<r.length;++n){e+=r[n].length}}var i=at.allocUnsafe(e);var s=0;for(n=0;n<r.length;++n){var o=r[n];if(!yt(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(i,s);s+=o.length}return i};function bt(t,r){if(yt(t)){return t.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)){return t.byteLength}if(typeof t!=="string"){t=""+t}var e=t.length;if(e===0)return 0;var n=false;for(;;){switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case undefined:return Jt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Kt(t).length;default:if(n)return Jt(t).length;r=(""+r).toLowerCase();n=true}}}at.byteLength=bt;function pt(t,r,e){var n=false;if(r===undefined||r<0){r=0}if(r>this.length){return""}if(e===undefined||e>this.length){e=this.length}if(e<=0){return""}e>>>=0;r>>>=0;if(e<=r){return""}if(!t)t="utf8";while(true){switch(t){case"hex":return Mt(this,r,e);case"utf8":case"utf-8":return Dt(this,r,e);case"ascii":return Rt(this,r,e);case"latin1":case"binary":return It(this,r,e);case"base64":return _t(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase();n=true}}}at.prototype._isBuffer=true;function Et(t,r,e){var n=t[r];t[r]=t[e];t[e]=n}at.prototype.swap16=function t(){var r=this.length;if(r%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var e=0;e<r;e+=2){Et(this,e,e+1)}return this};at.prototype.swap32=function t(){var r=this.length;if(r%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var e=0;e<r;e+=4){Et(this,e,e+3);Et(this,e+1,e+2)}return this};at.prototype.swap64=function t(){var r=this.length;if(r%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var e=0;e<r;e+=8){Et(this,e,e+7);Et(this,e+1,e+6);Et(this,e+2,e+5);Et(this,e+3,e+4)}return this};at.prototype.toString=function t(){var r=this.length|0;if(r===0)return"";if(arguments.length===0)return Dt(this,0,r);return pt.apply(this,arguments)};at.prototype.equals=function t(r){if(!yt(r))throw new TypeError("Argument must be a Buffer");if(this===r)return true;return at.compare(this,r)===0};at.prototype.inspect=function t(){var r="";var e=it;if(this.length>0){r=this.toString("hex",0,e).match(/.{2}/g).join(" ");if(this.length>e)r+=" ... "}return"<Buffer "+r+">"};at.prototype.compare=function t(r,e,n,i,s){if(!yt(r)){throw new TypeError("Argument must be a Buffer")}if(e===undefined){e=0}if(n===undefined){n=r?r.length:0}if(i===undefined){i=0}if(s===undefined){s=this.length}if(e<0||n>r.length||i<0||s>this.length){throw new RangeError("out of range index")}if(i>=s&&e>=n){return 0}if(i>=s){return-1}if(e>=n){return 1}e>>>=0;n>>>=0;i>>>=0;s>>>=0;if(this===r)return 0;var o=s-i;var a=n-e;var u=Math.min(o,a);var f=this.slice(i,s);var c=r.slice(e,n);for(var h=0;h<u;++h){if(f[h]!==c[h]){o=f[h];a=c[h];break}}if(o<a)return-1;if(a<o)return 1;return 0};function gt(t,r,e,n,i){if(t.length===0)return-1;if(typeof e==="string"){n=e;e=0}else if(e>2147483647){e=2147483647}else if(e<-2147483648){e=-2147483648}e=+e;if(isNaN(e)){e=i?0:t.length-1}if(e<0)e=t.length+e;if(e>=t.length){if(i)return-1;else e=t.length-1}else if(e<0){if(i)e=0;else return-1}if(typeof r==="string"){r=at.from(r,n)}if(yt(r)){if(r.length===0){return-1}return Pt(t,r,e,n,i)}else if(typeof r==="number"){r=r&255;if(at.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(t,r,e)}else{return Uint8Array.prototype.lastIndexOf.call(t,r,e)}}return Pt(t,[r],e,n,i)}throw new TypeError("val must be string, number or Buffer")}function Pt(t,r,e,n,i){var s=1;var o=t.length;var a=r.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(t.length<2||r.length<2){return-1}s=2;o/=2;a/=2;e/=2}}function u(t,r){if(s===1){return t[r]}else{return t.readUInt16BE(r*s)}}var f;if(i){var c=-1;for(f=e;f<o;f++){if(u(t,f)===u(r,c===-1?0:f-c)){if(c===-1)c=f;if(f-c+1===a)return c*s}else{if(c!==-1)f-=f-c;c=-1}}}else{if(e+a>o)e=o-a;for(f=e;f>=0;f--){var h=true;for(var l=0;l<a;l++){if(u(t,f+l)!==u(r,l)){h=false;break}}if(h)return f}}return-1}at.prototype.includes=function t(r,e,n){return this.indexOf(r,e,n)!==-1};at.prototype.indexOf=function t(r,e,n){return gt(this,r,e,n,true)};at.prototype.lastIndexOf=function t(r,e,n){return gt(this,r,e,n,false)};function St(t,r,e,n){e=Number(e)||0;var i=t.length-e;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var s=r.length;if(s%2!==0)throw new TypeError("Invalid hex string");if(n>s/2){n=s/2}for(var o=0;o<n;++o){var a=parseInt(r.substr(o*2,2),16);if(isNaN(a))return o;t[e+o]=a}return o}function Tt(t,r,e,n){return Xt(Jt(r,t.length-e),t,e,n)}function $t(t,r,e,n){return Xt(Vt(r),t,e,n)}function kt(t,r,e,n){return $t(t,r,e,n)}function At(t,r,e,n){return Xt(Kt(r),t,e,n)}function Ot(t,r,e,n){return Xt(Qt(r,t.length-e),t,e,n)}at.prototype.write=function t(r,e,n,i){if(e===undefined){i="utf8";n=this.length;e=0}else if(n===undefined&&typeof e==="string"){i=e;n=this.length;e=0}else if(isFinite(e)){e=e|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var s=this.length-e;if(n===undefined||n>s)n=s;if(r.length>0&&(n<0||e<0)||e>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var o=false;for(;;){switch(i){case"hex":return St(this,r,e,n);case"utf8":case"utf-8":return Tt(this,r,e,n);case"ascii":return $t(this,r,e,n);case"latin1":case"binary":return kt(this,r,e,n);case"base64":return At(this,r,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,r,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();o=true}}};at.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _t(t,r,e){if(r===0&&e===t.length){return Y(t)}else{return Y(t.slice(r,e))}}function Dt(t,r,e){e=Math.min(t.length,e);var n=[];var i=r;while(i<e){var s=t[i];var o=null;var a=s>239?4:s>223?3:s>191?2:1;if(i+a<=e){var u,f,c,h;switch(a){case 1:if(s<128){o=s}break;case 2:u=t[i+1];if((u&192)===128){h=(s&31)<<6|u&63;if(h>127){o=h}}break;case 3:u=t[i+1];f=t[i+2];if((u&192)===128&&(f&192)===128){h=(s&15)<<12|(u&63)<<6|f&63;if(h>2047&&(h<55296||h>57343)){o=h}}break;case 4:u=t[i+1];f=t[i+2];c=t[i+3];if((u&192)===128&&(f&192)===128&&(c&192)===128){h=(s&15)<<18|(u&63)<<12|(f&63)<<6|c&63;if(h>65535&&h<1114112){o=h}}}}if(o===null){o=65533;a=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);i+=a}return Nt(n)}var jt=4096;function Nt(t){var r=t.length;if(r<=jt){return String.fromCharCode.apply(String,t)}var e="";var n=0;while(n<r){e+=String.fromCharCode.apply(String,t.slice(n,n+=jt))}return e}function Rt(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i){n+=String.fromCharCode(t[i]&127)}return n}function It(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i){n+=String.fromCharCode(t[i])}return n}function Mt(t,r,e){var n=t.length;if(!r||r<0)r=0;if(!e||e<0||e>n)e=n;var i="";for(var s=r;s<e;++s){i+=Zt(t[s])}return i}function xt(t,r,e){var n=t.slice(r,e);var i="";for(var s=0;s<n.length;s+=2){i+=String.fromCharCode(n[s]+n[s+1]*256)}return i}at.prototype.slice=function t(r,e){var n=this.length;r=~~r;e=e===undefined?n:~~e;if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(e<0){e+=n;if(e<0)e=0}else if(e>n){e=n}if(e<r)e=r;var i;if(at.TYPED_ARRAY_SUPPORT){i=this.subarray(r,e);i.__proto__=at.prototype}else{var s=e-r;i=new at(s,undefined);for(var o=0;o<s;++o){i[o]=this[o+r]}}return i};function Ct(t,r,e){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}at.prototype.readUIntLE=function t(r,e,n){r=r|0;e=e|0;if(!n)Ct(r,e,this.length);var i=this[r];var s=1;var o=0;while(++o<e&&(s*=256)){i+=this[r+o]*s}return i};at.prototype.readUIntBE=function t(r,e,n){r=r|0;e=e|0;if(!n){Ct(r,e,this.length)}var i=this[r+--e];var s=1;while(e>0&&(s*=256)){i+=this[r+--e]*s}return i};at.prototype.readUInt8=function t(r,e){if(!e)Ct(r,1,this.length);return this[r]};at.prototype.readUInt16LE=function t(r,e){if(!e)Ct(r,2,this.length);return this[r]|this[r+1]<<8};at.prototype.readUInt16BE=function t(r,e){if(!e)Ct(r,2,this.length);return this[r]<<8|this[r+1]};at.prototype.readUInt32LE=function t(r,e){if(!e)Ct(r,4,this.length);return(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};at.prototype.readUInt32BE=function t(r,e){if(!e)Ct(r,4,this.length);return this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};at.prototype.readIntLE=function t(r,e,n){r=r|0;e=e|0;if(!n)Ct(r,e,this.length);var i=this[r];var s=1;var o=0;while(++o<e&&(s*=256)){i+=this[r+o]*s}s*=128;if(i>=s)i-=Math.pow(2,8*e);return i};at.prototype.readIntBE=function t(r,e,n){r=r|0;e=e|0;if(!n)Ct(r,e,this.length);var i=e;var s=1;var o=this[r+--i];while(i>0&&(s*=256)){o+=this[r+--i]*s}s*=128;if(o>=s)o-=Math.pow(2,8*e);return o};at.prototype.readInt8=function t(r,e){if(!e)Ct(r,1,this.length);if(!(this[r]&128))return this[r];return(255-this[r]+1)*-1};at.prototype.readInt16LE=function t(r,e){if(!e)Ct(r,2,this.length);var n=this[r]|this[r+1]<<8;return n&32768?n|4294901760:n};at.prototype.readInt16BE=function t(r,e){if(!e)Ct(r,2,this.length);var n=this[r+1]|this[r]<<8;return n&32768?n|4294901760:n};at.prototype.readInt32LE=function t(r,e){if(!e)Ct(r,4,this.length);return this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};at.prototype.readInt32BE=function t(r,e){if(!e)Ct(r,4,this.length);return this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};at.prototype.readFloatLE=function t(r,e){if(!e)Ct(r,4,this.length);return tt(this,r,true,23,4)};at.prototype.readFloatBE=function t(r,e){if(!e)Ct(r,4,this.length);return tt(this,r,false,23,4)};at.prototype.readDoubleLE=function t(r,e){if(!e)Ct(r,8,this.length);return tt(this,r,true,52,8)};at.prototype.readDoubleBE=function t(r,e){if(!e)Ct(r,8,this.length);return tt(this,r,false,52,8)};function Lt(t,r,e,n,i,s){if(!yt(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<s)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}at.prototype.writeUIntLE=function t(r,e,n,i){r=+r;e=e|0;n=n|0;if(!i){var s=Math.pow(2,8*n)-1;Lt(this,r,e,n,s,0)}var o=1;var a=0;this[e]=r&255;while(++a<n&&(o*=256)){this[e+a]=r/o&255}return e+n};at.prototype.writeUIntBE=function t(r,e,n,i){r=+r;e=e|0;n=n|0;if(!i){var s=Math.pow(2,8*n)-1;Lt(this,r,e,n,s,0)}var o=n-1;var a=1;this[e+o]=r&255;while(--o>=0&&(a*=256)){this[e+o]=r/a&255}return e+n};at.prototype.writeUInt8=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,1,255,0);if(!at.TYPED_ARRAY_SUPPORT)r=Math.floor(r);this[e]=r&255;return e+1};function Bt(t,r,e,n){if(r<0)r=65535+r+1;for(var i=0,s=Math.min(t.length-e,2);i<s;++i){t[e+i]=(r&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}at.prototype.writeUInt16LE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,2,65535,0);if(at.TYPED_ARRAY_SUPPORT){this[e]=r&255;this[e+1]=r>>>8}else{Bt(this,r,e,true)}return e+2};at.prototype.writeUInt16BE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,2,65535,0);if(at.TYPED_ARRAY_SUPPORT){this[e]=r>>>8;this[e+1]=r&255}else{Bt(this,r,e,false)}return e+2};function Ut(t,r,e,n){if(r<0)r=4294967295+r+1;for(var i=0,s=Math.min(t.length-e,4);i<s;++i){t[e+i]=r>>>(n?i:3-i)*8&255}}at.prototype.writeUInt32LE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,4,4294967295,0);if(at.TYPED_ARRAY_SUPPORT){this[e+3]=r>>>24;this[e+2]=r>>>16;this[e+1]=r>>>8;this[e]=r&255}else{Ut(this,r,e,true)}return e+4};at.prototype.writeUInt32BE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,4,4294967295,0);if(at.TYPED_ARRAY_SUPPORT){this[e]=r>>>24;this[e+1]=r>>>16;this[e+2]=r>>>8;this[e+3]=r&255}else{Ut(this,r,e,false)}return e+4};at.prototype.writeIntLE=function t(r,e,n,i){r=+r;e=e|0;if(!i){var s=Math.pow(2,8*n-1);Lt(this,r,e,n,s-1,-s)}var o=0;var a=1;var u=0;this[e]=r&255;while(++o<n&&(a*=256)){if(r<0&&u===0&&this[e+o-1]!==0){u=1}this[e+o]=(r/a>>0)-u&255}return e+n};at.prototype.writeIntBE=function t(r,e,n,i){r=+r;e=e|0;if(!i){var s=Math.pow(2,8*n-1);Lt(this,r,e,n,s-1,-s)}var o=n-1;var a=1;var u=0;this[e+o]=r&255;while(--o>=0&&(a*=256)){if(r<0&&u===0&&this[e+o+1]!==0){u=1}this[e+o]=(r/a>>0)-u&255}return e+n};at.prototype.writeInt8=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,1,127,-128);if(!at.TYPED_ARRAY_SUPPORT)r=Math.floor(r);if(r<0)r=255+r+1;this[e]=r&255;return e+1};at.prototype.writeInt16LE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,2,32767,-32768);if(at.TYPED_ARRAY_SUPPORT){this[e]=r&255;this[e+1]=r>>>8}else{Bt(this,r,e,true)}return e+2};at.prototype.writeInt16BE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,2,32767,-32768);if(at.TYPED_ARRAY_SUPPORT){this[e]=r>>>8;this[e+1]=r&255}else{Bt(this,r,e,false)}return e+2};at.prototype.writeInt32LE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,4,2147483647,-2147483648);if(at.TYPED_ARRAY_SUPPORT){this[e]=r&255;this[e+1]=r>>>8;this[e+2]=r>>>16;this[e+3]=r>>>24}else{Ut(this,r,e,true)}return e+4};at.prototype.writeInt32BE=function t(r,e,n){r=+r;e=e|0;if(!n)Lt(this,r,e,4,2147483647,-2147483648);if(r<0)r=4294967295+r+1;if(at.TYPED_ARRAY_SUPPORT){this[e]=r>>>24;this[e+1]=r>>>16;this[e+2]=r>>>8;this[e+3]=r&255}else{Ut(this,r,e,false)}return e+4};function Ft(t,r,e,n,i,s){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function qt(t,r,e,n,i){if(!i){Ft(t,r,e,4)}rt(t,r,e,n,23,4);return e+4}at.prototype.writeFloatLE=function t(r,e,n){return qt(this,r,e,true,n)};at.prototype.writeFloatBE=function t(r,e,n){return qt(this,r,e,false,n)};function Gt(t,r,e,n,i){if(!i){Ft(t,r,e,8)}rt(t,r,e,n,52,8);return e+8}at.prototype.writeDoubleLE=function t(r,e,n){return Gt(this,r,e,true,n)};at.prototype.writeDoubleBE=function t(r,e,n){return Gt(this,r,e,false,n)};at.prototype.copy=function t(r,e,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(e>=r.length)e=r.length;if(!e)e=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(r.length===0||this.length===0)return 0;if(e<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(r.length-e<i-n){i=r.length-e+n}var s=i-n;var o;if(this===r&&n<e&&e<i){for(o=s-1;o>=0;--o){r[o+e]=this[o+n]}}else if(s<1e3||!at.TYPED_ARRAY_SUPPORT){for(o=0;o<s;++o){r[o+e]=this[o+n]}}else{Uint8Array.prototype.set.call(r,this.subarray(n,n+s),e)}return s};at.prototype.fill=function t(r,e,n,i){if(typeof r==="string"){if(typeof e==="string"){i=e;e=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(r.length===1){var s=r.charCodeAt(0);if(s<256){r=s}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!at.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof r==="number"){r=r&255}if(e<0||this.length<e||this.length<n){throw new RangeError("Out of range index")}if(n<=e){return this}e=e>>>0;n=n===undefined?this.length:n>>>0;if(!r)r=0;var o;if(typeof r==="number"){for(o=e;o<n;++o){this[o]=r}}else{var a=yt(r)?r:Jt(new at(r,i).toString());var u=a.length;for(o=0;o<n-e;++o){this[o+e]=a[o%u]}}return this};var Wt=/[^+\/0-9A-Za-z-_]/g;function zt(t){t=Ht(t).replace(Wt,"");if(t.length<2)return"";while(t.length%4!==0){t=t+"="}return t}function Ht(t){if(t.trim)return t.trim();return t.replace(/^\s+|\s+$/g,"")}function Zt(t){if(t<16)return"0"+t.toString(16);return t.toString(16)}function Jt(t,r){r=r||Infinity;var e;var n=t.length;var i=null;var s=[];for(var o=0;o<n;++o){e=t.charCodeAt(o);if(e>55295&&e<57344){if(!i){if(e>56319){if((r-=3)>-1)s.push(239,191,189);continue}else if(o+1===n){if((r-=3)>-1)s.push(239,191,189);continue}i=e;continue}if(e<56320){if((r-=3)>-1)s.push(239,191,189);i=e;continue}e=(i-55296<<10|e-56320)+65536}else if(i){if((r-=3)>-1)s.push(239,191,189)}i=null;if(e<128){if((r-=1)<0)break;s.push(e)}else if(e<2048){if((r-=2)<0)break;s.push(e>>6|192,e&63|128)}else if(e<65536){if((r-=3)<0)break;s.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((r-=4)<0)break;s.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else{throw new Error("Invalid code point")}}return s}function Vt(t){var r=[];for(var e=0;e<t.length;++e){r.push(t.charCodeAt(e)&255)}return r}function Qt(t,r){var e,n,i;var s=[];for(var o=0;o<t.length;++o){if((r-=2)<0)break;e=t.charCodeAt(o);n=e>>8;i=e%256;s.push(i);s.push(n)}return s}function Kt(t){return Q(zt(t))}function Xt(t,r,e,n){for(var i=0;i<n;++i){if(i+e>=r.length||i>=t.length)break;r[i+e]=t[i]}return i}function Yt(t){return t!==t}function tr(t){return t!=null&&(!!t._isBuffer||rr(t)||er(t))}function rr(t){return!!t.constructor&&typeof t.constructor.isBuffer==="function"&&t.constructor.isBuffer(t)}function er(t){return typeof t.readFloatLE==="function"&&typeof t.slice==="function"&&rr(t.slice(0,0))}var nr=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function ir(t,r,e){return e={path:r,exports:{},require:function(t,r){return or()}},t(e,e.exports),e.exports}function sr(t){if(t.__esModule)return t;var r=Object.defineProperty({},"__esModule",{value:true});Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:true,get:function(){return t[e]}})}));return r}function or(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function ar(t,r){var e=0;for(var n=t.length-1;n>=0;n--){var i=t[n];if(i==="."){t.splice(n,1)}else if(i===".."){t.splice(n,1);e++}else if(e){t.splice(n,1);e--}}if(r){for(;e--;e){t.unshift("..")}}return t}var ur=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var fr=function(t){return ur.exec(t).slice(1)};function cr(){var t="",r=false;for(var e=arguments.length-1;e>=-1&&!r;e--){var n=e>=0?arguments[e]:"/";if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}t=n+"/"+t;r=n.charAt(0)==="/"}t=ar(gr(t.split("/"),(function(t){return!!t})),!r).join("/");return(r?"/":"")+t||"."}function hr(t){var r=lr(t),e=Pr(t,-1)==="/";t=ar(gr(t.split("/"),(function(t){return!!t})),!r).join("/");if(!t&&!r){t="."}if(t&&e){t+="/"}return(r?"/":"")+t}function lr(t){return t.charAt(0)==="/"}function vr(){var t=Array.prototype.slice.call(arguments,0);return hr(gr(t,(function(t,r){if(typeof t!=="string"){throw new TypeError("Arguments to path.join must be strings")}return t})).join("/"))}function dr(t,r){t=cr(t).substr(1);r=cr(r).substr(1);function e(t){var r=0;for(;r<t.length;r++){if(t[r]!=="")break}var e=t.length-1;for(;e>=0;e--){if(t[e]!=="")break}if(r>e)return[];return t.slice(r,e-r+1)}var n=e(t.split("/"));var i=e(r.split("/"));var s=Math.min(n.length,i.length);var o=s;for(var a=0;a<s;a++){if(n[a]!==i[a]){o=a;break}}var u=[];for(var a=o;a<n.length;a++){u.push("..")}u=u.concat(i.slice(o));return u.join("/")}var wr="/";var mr=":";function yr(t){var r=fr(t),e=r[0],n=r[1];if(!e&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return e+n}function br(t,r){var e=fr(t)[2];if(r&&e.substr(-1*r.length)===r){e=e.substr(0,e.length-r.length)}return e}function pr(t){return fr(t)[3]}const Er={extname:pr,basename:br,dirname:yr,sep:wr,delimiter:mr,relative:dr,join:vr,isAbsolute:lr,normalize:hr,resolve:cr};function gr(t,r){if(t.filter)return t.filter(r);var e=[];for(var n=0;n<t.length;n++){if(r(t[n],n,t))e.push(t[n])}return e}var Pr="ab".substr(-1)==="b"?function(t,r,e){return t.substr(r,e)}:function(t,r,e){if(r<0)r=t.length+r;return t.substr(r,e)};const Sr=Object.freeze({__proto__:null,resolve:cr,normalize:hr,isAbsolute:lr,join:vr,relative:dr,sep:wr,delimiter:mr,dirname:yr,basename:br,extname:pr,default:Er});const Tr={};const $r=Object.freeze({__proto__:null,default:Tr});const kr=sr(Sr);const Ar=sr($r);var Or=ir((function(t,r){var e=undefined;var n=function(r){if(e){return e}e=new Promise((function(e,n){var i=typeof r!=="undefined"?r:{};var s=i["onAbort"];i["onAbort"]=function(t){n(new Error(t));if(s){s(t)}};i["postRun"]=i["postRun"]||[];i["postRun"].push((function(){e(i)}));t=undefined;var o;o||(o=typeof i!=="undefined"?i:{});o.onRuntimeInitialized=function(){function t(t,r){this.Qa=t;this.db=r;this.Oa=1;this.kb=[]}function r(t,r){this.db=r;r=C(t)+1;this.cb=Ur(r);if(null===this.cb)throw Error("Unable to allocate memory for the SQL string");x(t,F,this.cb,r);this.ib=this.cb;this.Za=this.ob=null}function e(t){this.filename="dbfile_"+(4294967295*Math.random()>>>0);if(null!=t){var r=this.filename,e=r?mt("//"+r):"/";r=pr(!0,!0);e=tr(e,(void 0!==r?r:438)&4095|32768,0);if(t){if("string"===typeof t){for(var i=Array(t.length),o=0,a=t.length;o<a;++o)i[o]=t.charCodeAt(o);t=i}ur(e,r|146);i=hr(e,577);wr(i,t,0,t.length,0,void 0);lr(i);ur(e,r)}}this.handleError(s(this.filename,n));this.db=A(n,"i32");tt(this.db);this.eb={};this.Wa={}}var n=Zr(4),i=o.cwrap,s=i("sqlite3_open","number",["string","number"]),a=i("sqlite3_close_v2","number",["number"]),u=i("sqlite3_exec","number",["number","string","number","number","number"]),f=i("sqlite3_changes","number",["number"]),c=i("sqlite3_prepare_v2","number",["number","string","number","number","number"]),h=i("sqlite3_sql","string",["number"]),l=i("sqlite3_normalized_sql","string",["number"]),v=i("sqlite3_prepare_v2","number",["number","number","number","number","number"]),d=i("sqlite3_bind_text","number",["number","number","number","number","number"]),w=i("sqlite3_bind_blob","number",["number","number","number","number","number"]),m=i("sqlite3_bind_double","number",["number","number","number"]),y=i("sqlite3_bind_int","number",["number","number","number"]),b=i("sqlite3_bind_parameter_index","number",["number","string"]),p=i("sqlite3_step","number",["number"]),E=i("sqlite3_errmsg","string",["number"]),g=i("sqlite3_column_count","number",["number"]),P=i("sqlite3_data_count","number",["number"]),$=i("sqlite3_column_double","number",["number","number"]),O=i("sqlite3_column_text","string",["number","number"]),_=i("sqlite3_column_blob","number",["number","number"]),D=i("sqlite3_column_bytes","number",["number","number"]),j=i("sqlite3_column_type","number",["number","number"]),R=i("sqlite3_column_name","string",["number","number"]),I=i("sqlite3_reset","number",["number"]),L=i("sqlite3_clear_bindings","number",["number"]),B=i("sqlite3_finalize","number",["number"]),q=i("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),G=i("sqlite3_value_type","number",["number"]),W=i("sqlite3_value_bytes","number",["number"]),z=i("sqlite3_value_text","string",["number"]),H=i("sqlite3_value_blob","number",["number"]),Z=i("sqlite3_value_double","number",["number"]),J=i("sqlite3_result_double","",["number","number"]),V=i("sqlite3_result_null","",["number"]),Q=i("sqlite3_result_text","",["number","string","number","number"]),K=i("sqlite3_result_blob","",["number","number","number","number"]),X=i("sqlite3_result_int","",["number","number"]),Y=i("sqlite3_result_error","",["number","string","number"]),tt=i("RegisterExtensionFunctions","number",["number"]);t.prototype.bind=function(t){if(!this.Qa)throw"Statement closed";this.reset();return Array.isArray(t)?this.Cb(t):null!=t&&"object"===typeof t?this.Db(t):!0};t.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var t=p(this.Qa);switch(t){case 100:return!0;case 101:return!1;default:throw this.db.handleError(t)}};t.prototype.yb=function(t){null==t&&(t=this.Oa,this.Oa+=1);return $(this.Qa,t)};t.prototype.Gb=function(t){null==t&&(t=this.Oa,this.Oa+=1);t=O(this.Qa,t);if("function"!==typeof BigInt)throw Error("BigInt is not supported");return BigInt(t)};t.prototype.Hb=function(t){null==t&&(t=this.Oa,this.Oa+=1);return O(this.Qa,t)};t.prototype.getBlob=function(t){null==t&&(t=this.Oa,this.Oa+=1);var r=D(this.Qa,t);t=_(this.Qa,t);for(var e=new Uint8Array(r),n=0;n<r;n+=1)e[n]=U[t+n];return e};t.prototype.get=function(t,r){r=r||{};null!=t&&this.bind(t)&&this.step();t=[];for(var e=P(this.Qa),n=0;n<e;n+=1)switch(j(this.Qa,n)){case 1:var i=r.useBigInt?this.Gb(n):this.yb(n);t.push(i);break;case 2:t.push(this.yb(n));break;case 3:t.push(this.Hb(n));break;case 4:t.push(this.getBlob(n));break;default:t.push(null)}return t};t.prototype.getColumnNames=function(){for(var t=[],r=g(this.Qa),e=0;e<r;e+=1)t.push(R(this.Qa,e));return t};t.prototype.getAsObject=function(t,r){t=this.get(t,r);r=this.getColumnNames();for(var e={},n=0;n<r.length;n+=1)e[r[n]]=t[n];return e};t.prototype.getSQL=function(){return h(this.Qa)};t.prototype.getNormalizedSQL=function(){return l(this.Qa)};t.prototype.run=function(t){null!=t&&this.bind(t);this.step();return this.reset()};t.prototype.tb=function(t,r){null==r&&(r=this.Oa,this.Oa+=1);t=Cr(t);var e=N(t);this.kb.push(e);this.db.handleError(d(this.Qa,r,e,t.length-1,0))};t.prototype.Bb=function(t,r){null==r&&(r=this.Oa,this.Oa+=1);var e=N(t);this.kb.push(e);this.db.handleError(w(this.Qa,r,e,t.length,0))};t.prototype.sb=function(t,r){null==r&&(r=this.Oa,this.Oa+=1);this.db.handleError((t===(t|0)?y:m)(this.Qa,r,t))};t.prototype.Eb=function(t){null==t&&(t=this.Oa,this.Oa+=1);w(this.Qa,t,0,0,0)};t.prototype.ub=function(t,r){null==r&&(r=this.Oa,this.Oa+=1);switch(typeof t){case"string":this.tb(t,r);return;case"number":this.sb(t,r);return;case"bigint":this.tb(t.toString(),r);return;case"boolean":this.sb(t+0,r);return;case"object":if(null===t){this.Eb(r);return}if(null!=t.length){this.Bb(t,r);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+t+")."};t.prototype.Db=function(t){var r=this;Object.keys(t).forEach((function(e){var n=b(r.Qa,e);0!==n&&r.ub(t[e],n)}));return!0};t.prototype.Cb=function(t){for(var r=0;r<t.length;r+=1)this.ub(t[r],r+1);return!0};t.prototype.reset=function(){this.freemem();return 0===L(this.Qa)&&0===I(this.Qa)};t.prototype.freemem=function(){for(var t;void 0!==(t=this.kb.pop());)Fr(t)};t.prototype.free=function(){this.freemem();var t=0===B(this.Qa);delete this.db.eb[this.Qa];this.Qa=0;return t};r.prototype.next=function(){if(null===this.cb)return{done:!0};null!==this.Za&&(this.Za.free(),this.Za=null);if(!this.db.db)throw this.mb(),Error("Database closed");var r=zr(),e=Zr(4);k(n);k(e);try{this.db.handleError(v(this.db.db,this.ib,-1,n,e));this.ib=A(e,"i32");var i=A(n,"i32");if(0===i)return this.mb(),{done:!0};this.Za=new t(i,this.db);this.db.eb[i]=this.Za;return{value:this.Za,done:!1}}catch(t){throw this.ob=M(this.ib),this.mb(),t}finally{Hr(r)}};r.prototype.mb=function(){Fr(this.cb);this.cb=null};r.prototype.getRemainingSQL=function(){return null!==this.ob?this.ob:M(this.ib)};"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator&&(r.prototype[Symbol.iterator]=function(){return this});e.prototype.run=function(t,r){if(!this.db)throw"Database closed";if(r){t=this.prepare(t,r);try{t.step()}finally{t.free()}}else this.handleError(u(this.db,t,0,0,n));return this};e.prototype.exec=function(r,e,i){if(!this.db)throw"Database closed";var s=zr(),o=null;try{var a=C(r)+1,u=Zr(a);x(r,U,u,a);var f=u;var c=Zr(4);for(r=[];0!==A(f,"i8");){k(n);k(c);this.handleError(v(this.db,f,-1,n,c));var h=A(n,"i32");f=A(c,"i32");if(0!==h){a=null;o=new t(h,this);for(null!=e&&o.bind(e);o.step();)null===a&&(a={columns:o.getColumnNames(),values:[]},r.push(a)),a.values.push(o.get(null,i));o.free()}}return r}catch(t){throw o&&o.free(),t}finally{Hr(s)}};e.prototype.each=function(t,r,e,n,i){"function"===typeof r&&(n=e,e=r,r=void 0);t=this.prepare(t,r);try{for(;t.step();)e(t.getAsObject(null,i))}finally{t.free()}if("function"===typeof n)return n()};e.prototype.prepare=function(r,e){k(n);this.handleError(c(this.db,r,-1,n,0));r=A(n,"i32");if(0===r)throw"Nothing to prepare";var i=new t(r,this);null!=e&&i.bind(e);return this.eb[r]=i};e.prototype.iterateStatements=function(t){return new r(t,this)};e.prototype["export"]=function(){Object.values(this.eb).forEach((function(t){t.free()}));Object.values(this.Wa).forEach(S);this.Wa={};this.handleError(a(this.db));var t=mr(this.filename);this.handleError(s(this.filename,n));this.db=A(n,"i32");return t};e.prototype.close=function(){null!==this.db&&(Object.values(this.eb).forEach((function(t){t.free()})),Object.values(this.Wa).forEach(S),this.Wa={},this.handleError(a(this.db)),ir("/"+this.filename),this.db=null)};e.prototype.handleError=function(t){if(0===t)return null;t=E(this.db);throw Error(t)};e.prototype.getRowsModified=function(){return f(this.db)};e.prototype.create_function=function(t,r){Object.prototype.hasOwnProperty.call(this.Wa,t)&&(S(this.Wa[t]),delete this.Wa[t]);var e=T((function(t,e,n){for(var i,s=[],o=0;o<e;o+=1){var a=A(n+4*o,"i32"),u=G(a);if(1===u||2===u)a=Z(a);else if(3===u)a=z(a);else if(4===u){u=a;a=W(u);u=H(u);for(var f=new Uint8Array(a),c=0;c<a;c+=1)f[c]=U[u+c];a=f}else a=null;s.push(a)}try{i=r.apply(null,s)}catch(r){Y(t,r,-1);return}switch(typeof i){case"boolean":X(t,i?1:0);break;case"number":J(t,i);break;case"string":Q(t,i,-1,-1);break;case"object":null===i?V(t):null!=i.length?(e=N(i),K(t,e,i.length,-1),Fr(e)):Y(t,"Wrong API use : tried to return a value of an unknown type ("+i+").",-1);break;default:V(t)}}));this.Wa[t]=e;this.handleError(q(this.db,t,r.length,1,0,e,0,0,0));return this};o.Database=e};var a={},u;for(u in o)o.hasOwnProperty(u)&&(a[u]=o[u]);var f="./this.program",c="object"===typeof window,h="function"===typeof importScripts,l="object"===typeof G&&"object"===typeof G.versions&&"string"===typeof G.versions.node,v="",d,w,m,y,b;if(l)v=h?kr.dirname(v)+"/":W+"/",d=function(t,r){y||(y=Ar);b||(b=kr);t=b.normalize(t);return y.readFileSync(t,r?null:"utf8")},m=function(t){t=d(t,!0);t.buffer||(t=new Uint8Array(t));t.buffer||et("Assertion failed: undefined");return t},w=function(t,r,e){y||(y=Ar);b||(b=kr);t=b.normalize(t);y.readFile(t,(function(t,n){t?e(t):r(n.buffer)}))},1<G.argv.length&&(f=G.argv[1].replace(/\\/g,"/")),G.argv.slice(2),t.exports=o,o.inspect=function(){return"[Emscripten Module object]"};else if(c||h)h?v=self.location.href:"undefined"!==typeof document&&document.currentScript&&(v=document.currentScript.src),v=0!==v.indexOf("blob:")?v.substr(0,v.lastIndexOf("/")+1):"",d=function(t){var r=new XMLHttpRequest;r.open("GET",t,!1);r.send(null);return r.responseText},h&&(m=function(t){var r=new XMLHttpRequest;r.open("GET",t,!1);r.responseType="arraybuffer";r.send(null);return new Uint8Array(r.response)}),w=function(t,r,e){var n=new XMLHttpRequest;n.open("GET",t,!0);n.responseType="arraybuffer";n.onload=function(){200==n.status||0==n.status&&n.response?r(n.response):e()};n.onerror=e;n.send(null)};var p=o.print||console.log.bind(console),E=o.printErr||console.warn.bind(console);for(u in a)a.hasOwnProperty(u)&&(o[u]=a[u]);a=null;o.thisProgram&&(f=o.thisProgram);var g=[],P;function S(t){P.delete(V.get(t));g.push(t)}function T(t){if(!P){P=new WeakMap;for(var r=0;r<V.length;r++){var e=V.get(r);e&&P.set(e,r)}}if(P.has(t))t=P.get(t);else{if(g.length)r=g.pop();else{try{V.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}r=V.length-1}try{V.set(r,t)}catch(s){if(!(s instanceof TypeError))throw s;if("function"===typeof WebAssembly.Function){var n={i:"i32",j:"i64",f:"f32",d:"f64"},i={parameters:[],results:[]};for(e=1;4>e;++e)i.parameters.push(n["viii"[e]]);e=new WebAssembly.Function(i,t)}else{n=[1,0,1,96];i={i:127,j:126,f:125,d:124};n.push(3);for(e=0;3>e;++e)n.push(i["iii"[e]]);n.push(0);n[1]=n.length-2;e=new Uint8Array([0,97,115,109,1,0,0,0].concat(n,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0]));e=new WebAssembly.Module(e);e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}V.set(r,e)}P.set(t,r);t=r}return t}var $;o.wasmBinary&&($=o.wasmBinary);"object"!==typeof WebAssembly&&et("no native wasm support detected");function k(t){var r="i32";"*"===r.charAt(r.length-1)&&(r="i32");switch(r){case"i1":U[t>>0]=0;break;case"i8":U[t>>0]=0;break;case"i16":q[t>>1]=0;break;case"i32":z[t>>2]=0;break;case"i64":ct=[0,(ft=0,1<=+Math.abs(ft)?0<ft?(Math.min(+Math.floor(ft/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)];z[t>>2]=ct[0];z[t+4>>2]=ct[1];break;case"float":H[t>>2]=0;break;case"double":Z[t>>3]=0;break;default:et("invalid type for setValue: "+r)}}function A(t,r){r=r||"i8";"*"===r.charAt(r.length-1)&&(r="i32");switch(r){case"i1":return U[t>>0];case"i8":return U[t>>0];case"i16":return q[t>>1];case"i32":return z[t>>2];case"i64":return z[t>>2];case"float":return H[t>>2];case"double":return Z[t>>3];default:et("invalid type for getValue: "+r)}return null}var O,_=!1;function D(t){var r=o["_"+t];r||et("Assertion failed: Cannot call unknown function "+(t+", make sure it is exported"));return r}function j(t,r,e,n){var i={string:function(t){var r=0;if(null!==t&&void 0!==t&&0!==t){var e=(t.length<<2)+1;r=Zr(e);x(t,F,r,e)}return r},array:function(t){var r=Zr(t.length);U.set(t,r);return r}};t=D(t);var s=[],o=0;if(n)for(var a=0;a<n.length;a++){var u=i[e[a]];u?(0===o&&(o=zr()),s[a]=u(n[a])):s[a]=n[a]}e=t.apply(null,s);return e=function(t){0!==o&&Hr(o);return"string"===r?M(t):"boolean"===r?!!t:t}(e)}function N(t){var r=Ur(t.length);t.subarray||t.slice?F.set(t,r):F.set(new Uint8Array(t),r);return r}var R="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function I(t,r,e){var n=r+e;for(e=r;t[e]&&!(e>=n);)++e;if(16<e-r&&t.subarray&&R)return R.decode(t.subarray(r,e));for(n="";r<e;){var i=t[r++];if(i&128){var s=t[r++]&63;if(192==(i&224))n+=String.fromCharCode((i&31)<<6|s);else{var o=t[r++]&63;i=224==(i&240)?(i&15)<<12|s<<6|o:(i&7)<<18|s<<12|o<<6|t[r++]&63;65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n}function M(t,r){return t?I(F,t,r):""}function x(t,r,e,n){if(!(0<n))return 0;var i=e;n=e+n-1;for(var s=0;s<t.length;++s){var o=t.charCodeAt(s);if(55296<=o&&57343>=o){var a=t.charCodeAt(++s);o=65536+((o&1023)<<10)|a&1023}if(127>=o){if(e>=n)break;r[e++]=o}else{if(2047>=o){if(e+1>=n)break;r[e++]=192|o>>6}else{if(65535>=o){if(e+2>=n)break;r[e++]=224|o>>12}else{if(e+3>=n)break;r[e++]=240|o>>18;r[e++]=128|o>>12&63}r[e++]=128|o>>6&63}r[e++]=128|o&63}}r[e]=0;return e-i}function C(t){for(var r=0,e=0;e<t.length;++e){var n=t.charCodeAt(e);55296<=n&&57343>=n&&(n=65536+((n&1023)<<10)|t.charCodeAt(++e)&1023);127>=n?++r:r=2047>=n?r+2:65535>=n?r+3:r+4}return r}function L(t){var r=C(t)+1,e=Ur(r);e&&x(t,U,e,r);return e}var B,U,F,q,z,H,Z;function J(){var t=O.buffer;B=t;o.HEAP8=U=new Int8Array(t);o.HEAP16=q=new Int16Array(t);o.HEAP32=z=new Int32Array(t);o.HEAPU8=F=new Uint8Array(t);o.HEAPU16=new Uint16Array(t);o.HEAPU32=new Uint32Array(t);o.HEAPF32=H=new Float32Array(t);o.HEAPF64=Z=new Float64Array(t)}var V,Q=[],K=[],X=[];function Y(){var t=o.preRun.shift();Q.unshift(t)}var tt=0,rt=null;o.preloadedImages={};o.preloadedAudios={};function et(t){if(o.onAbort)o.onAbort(t);E(t);_=!0;throw new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}function nt(){return it.startsWith("data:application/octet-stream;base64,")}var it;it="sql-wasm.wasm";if(!nt()){var st=it;it=o.locateFile?o.locateFile(st,v):v+st}function ot(){var t=it;try{if(t==it&&$)return new Uint8Array($);if(m)return m(t);throw"both async and sync fetching of the wasm failed"}catch(t){et(t)}}function ut(){if(!$&&(c||h)){if("function"===typeof fetch&&!it.startsWith("file://"))return fetch(it,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+it+"'";return t.arrayBuffer()})).catch((function(){return ot()}));if(w)return new Promise((function(t,r){w(it,(function(r){t(new Uint8Array(r))}),r)}))}return Promise.resolve().then((function(){return ot()}))}var ft,ct;function ht(t){for(;0<t.length;){var r=t.shift();if("function"==typeof r)r(o);else{var e=r.Qb;"number"===typeof e?void 0===r.lb?V.get(e)():V.get(e)(r.lb):e(void 0===r.lb?null:r.lb)}}}function lt(t){return t.replace(/\b_Z[\w\d_]+/g,(function(t){return t===t?t:t+" ["+t+"]"}))}function vt(){function t(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var r=(new Date).getFullYear(),e=new Date(r,0,1),n=new Date(r,6,1);r=e.getTimezoneOffset();var i=n.getTimezoneOffset(),s=Math.max(r,i);z[Wr()>>2]=60*s;z[Gr()>>2]=Number(r!=i);e=t(e);n=t(n);e=L(e);n=L(n);i<r?(z[qr()>>2]=e,z[qr()+4>>2]=n):(z[qr()>>2]=n,z[qr()+4>>2]=e)}var dt;function wt(t,r){for(var e=0,n=t.length-1;0<=n;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),e++):e&&(t.splice(n,1),e--)}if(r)for(;e;e--)t.unshift("..");return t}function mt(t){var r="/"===t.charAt(0),e="/"===t.substr(-1);(t=wt(t.split("/").filter((function(t){return!!t})),!r).join("/"))||r||(t=".");t&&e&&(t+="/");return(r?"/":"")+t}function yt(t){var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);t=r[0];r=r[1];if(!t&&!r)return".";r&&(r=r.substr(0,r.length-1));return t+r}function bt(t){if("/"===t)return"/";t=mt(t);t=t.replace(/\/$/,"");var r=t.lastIndexOf("/");return-1===r?t:t.substr(r+1)}function pt(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){crypto.getRandomValues(t);return t[0]}}if(l)try{var r=Ar;return function(){return r.randomBytes(1)[0]}}catch(t){}return function(){et("randomDevice")}}function Et(){for(var t="",r=!1,e=arguments.length-1;-1<=e&&!r;e--){r=0<=e?arguments[e]:"/";if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t;r="/"===r.charAt(0)}t=wt(t.split("/").filter((function(t){return!!t})),!r).join("/");return(r?"/":"")+t||"."}var gt=[];function Pt(t,r){gt[t]={input:[],output:[],bb:r};Xt(t,St)}var St={open:function(t){var r=gt[t.node.rdev];if(!r)throw new Mt(43);t.tty=r;t.seekable=!1},close:function(t){t.tty.bb.flush(t.tty)},flush:function(t){t.tty.bb.flush(t.tty)},read:function(t,r,e,n){if(!t.tty||!t.tty.bb.zb)throw new Mt(60);for(var i=0,s=0;s<n;s++){try{var o=t.tty.bb.zb(t.tty)}catch(t){throw new Mt(29)}if(void 0===o&&0===i)throw new Mt(6);if(null===o||void 0===o)break;i++;r[e+s]=o}i&&(t.node.timestamp=Date.now());return i},write:function(t,r,e,n){if(!t.tty||!t.tty.bb.pb)throw new Mt(60);try{for(var i=0;i<n;i++)t.tty.bb.pb(t.tty,r[e+i])}catch(t){throw new Mt(29)}n&&(t.node.timestamp=Date.now());return i}},Tt={zb:function(t){if(!t.input.length){var r=null;if(l){var e=at.alloc(256),n=0;try{n=y.readSync(G.stdin.fd,e,0,256,null)}catch(t){if(t.toString().includes("EOF"))n=0;else throw t}0<n?r=e.slice(0,n).toString("utf-8"):r=null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(r=window.prompt("Input: "),null!==r&&(r+="\n")):"function"==typeof readline&&(r=readline(),null!==r&&(r+="\n"));if(!r)return null;t.input=Cr(r,!0)}return t.input.shift()},pb:function(t,r){null===r||10===r?(p(I(t.output,0)),t.output=[]):0!=r&&t.output.push(r)},flush:function(t){t.output&&0<t.output.length&&(p(I(t.output,0)),t.output=[])}},$t={pb:function(t,r){null===r||10===r?(E(I(t.output,0)),t.output=[]):0!=r&&t.output.push(r)},flush:function(t){t.output&&0<t.output.length&&(E(I(t.output,0)),t.output=[])}};function kt(t){t=65536*Math.ceil(t/65536);var r=Jr(65536,t);if(!r)return 0;F.fill(0,r,r+t);return r}var At={Ua:null,Va:function(){return At.createNode(null,"/",16895,0)},createNode:function(t,r,e,n){if(24576===(e&61440)||4096===(e&61440))throw new Mt(63);At.Ua||(At.Ua={dir:{node:{Ta:At.La.Ta,Sa:At.La.Sa,lookup:At.La.lookup,fb:At.La.fb,rename:At.La.rename,unlink:At.La.unlink,rmdir:At.La.rmdir,readdir:At.La.readdir,symlink:At.La.symlink},stream:{Ya:At.Ma.Ya}},file:{node:{Ta:At.La.Ta,Sa:At.La.Sa},stream:{Ya:At.Ma.Ya,read:At.Ma.read,write:At.Ma.write,rb:At.Ma.rb,gb:At.Ma.gb,hb:At.Ma.hb}},link:{node:{Ta:At.La.Ta,Sa:At.La.Sa,readlink:At.La.readlink},stream:{}},vb:{node:{Ta:At.La.Ta,Sa:At.La.Sa},stream:Kt}});e=qt(t,r,e,n);Gt(e.mode)?(e.La=At.Ua.dir.node,e.Ma=At.Ua.dir.stream,e.Na={}):32768===(e.mode&61440)?(e.La=At.Ua.file.node,e.Ma=At.Ua.file.stream,e.Ra=0,e.Na=null):40960===(e.mode&61440)?(e.La=At.Ua.link.node,e.Ma=At.Ua.link.stream):8192===(e.mode&61440)&&(e.La=At.Ua.vb.node,e.Ma=At.Ua.vb.stream);e.timestamp=Date.now();t&&(t.Na[r]=e,t.timestamp=e.timestamp);return e},Rb:function(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},wb:function(t,r){var e=t.Na?t.Na.length:0;e>=r||(r=Math.max(r,e*(1048576>e?2:1.125)>>>0),0!=e&&(r=Math.max(r,256)),e=t.Na,t.Na=new Uint8Array(r),0<t.Ra&&t.Na.set(e.subarray(0,t.Ra),0))},Nb:function(t,r){if(t.Ra!=r)if(0==r)t.Na=null,t.Ra=0;else{var e=t.Na;t.Na=new Uint8Array(r);e&&t.Na.set(e.subarray(0,Math.min(r,t.Ra)));t.Ra=r}},La:{Ta:function(t){var r={};r.dev=8192===(t.mode&61440)?t.id:1;r.ino=t.id;r.mode=t.mode;r.nlink=1;r.uid=0;r.gid=0;r.rdev=t.rdev;Gt(t.mode)?r.size=4096:32768===(t.mode&61440)?r.size=t.Ra:40960===(t.mode&61440)?r.size=t.link.length:r.size=0;r.atime=new Date(t.timestamp);r.mtime=new Date(t.timestamp);r.ctime=new Date(t.timestamp);r.Fb=4096;r.blocks=Math.ceil(r.size/r.Fb);return r},Sa:function(t,r){void 0!==r.mode&&(t.mode=r.mode);void 0!==r.timestamp&&(t.timestamp=r.timestamp);void 0!==r.size&&At.Nb(t,r.size)},lookup:function(){throw xt[44]},fb:function(t,r,e,n){return At.createNode(t,r,e,n)},rename:function(t,r,e){if(Gt(t.mode)){try{var n=Ft(r,e)}catch(t){}if(n)for(var i in n.Na)throw new Mt(55)}delete t.parent.Na[t.name];t.parent.timestamp=Date.now();t.name=e;r.Na[e]=t;r.timestamp=t.parent.timestamp;t.parent=r},unlink:function(t,r){delete t.Na[r];t.timestamp=Date.now()},rmdir:function(t,r){var e=Ft(t,r),n;for(n in e.Na)throw new Mt(55);delete t.Na[r];t.timestamp=Date.now()},readdir:function(t){var r=[".",".."],e;for(e in t.Na)t.Na.hasOwnProperty(e)&&r.push(e);return r},symlink:function(t,r,e){t=At.createNode(t,r,41471,0);t.link=e;return t},readlink:function(t){if(40960!==(t.mode&61440))throw new Mt(28);return t.link}},Ma:{read:function(t,r,e,n,i){var s=t.node.Na;if(i>=t.node.Ra)return 0;t=Math.min(t.node.Ra-i,n);if(8<t&&s.subarray)r.set(s.subarray(i,i+t),e);else for(n=0;n<t;n++)r[e+n]=s[i+n];return t},write:function(t,r,e,n,i,s){r.buffer===U.buffer&&(s=!1);if(!n)return 0;t=t.node;t.timestamp=Date.now();if(r.subarray&&(!t.Na||t.Na.subarray)){if(s)return t.Na=r.subarray(e,e+n),t.Ra=n;if(0===t.Ra&&0===i)return t.Na=r.slice(e,e+n),t.Ra=n;if(i+n<=t.Ra)return t.Na.set(r.subarray(e,e+n),i),n}At.wb(t,i+n);if(t.Na.subarray&&r.subarray)t.Na.set(r.subarray(e,e+n),i);else for(s=0;s<n;s++)t.Na[i+s]=r[e+s];t.Ra=Math.max(t.Ra,i+n);return n},Ya:function(t,r,e){1===e?r+=t.position:2===e&&32768===(t.node.mode&61440)&&(r+=t.node.Ra);if(0>r)throw new Mt(28);return r},rb:function(t,r,e){At.wb(t.node,r+e);t.node.Ra=Math.max(t.node.Ra,r+e)},gb:function(t,r,e,n,i,s){if(0!==r)throw new Mt(28);if(32768!==(t.node.mode&61440))throw new Mt(43);t=t.node.Na;if(s&2||t.buffer!==B){if(0<n||n+e<t.length)t.subarray?t=t.subarray(n,n+e):t=Array.prototype.slice.call(t,n,n+e);n=!0;e=kt(e);if(!e)throw new Mt(48);U.set(t,e)}else n=!1,e=t.byteOffset;return{Mb:e,jb:n}},hb:function(t,r,e,n,i){if(32768!==(t.node.mode&61440))throw new Mt(43);if(i&2)return 0;At.Ma.write(t,r,0,n,e,!1);return 0}}},Ot=null,_t={},Dt=[],jt=1,Nt=null,Rt=!0,It={},Mt=null,xt={};function Ct(t,r){t=Et("/",t);r=r||{};if(!t)return{path:"",node:null};var e={xb:!0,qb:0},n;for(n in e)void 0===r[n]&&(r[n]=e[n]);if(8<r.qb)throw new Mt(32);t=wt(t.split("/").filter((function(t){return!!t})),!1);var i=Ot;e="/";for(n=0;n<t.length;n++){var s=n===t.length-1;if(s&&r.parent)break;i=Ft(i,t[n]);e=mt(e+"/"+t[n]);i.$a&&(!s||s&&r.xb)&&(i=i.$a.root);if(!s||r.Xa)for(s=0;40960===(i.mode&61440);)if(i=sr(e),e=Et(yt(e),i),i=Ct(e,{qb:r.qb}).node,40<s++)throw new Mt(32)}return{path:e,node:i}}function Lt(t){for(var r;;){if(t===t.parent)return t=t.Va.Ab,r?"/"!==t[t.length-1]?t+"/"+r:t+r:t;r=r?t.name+"/"+r:t.name;t=t.parent}}function Bt(t,r){for(var e=0,n=0;n<r.length;n++)e=(e<<5)-e+r.charCodeAt(n)|0;return(t+e>>>0)%Nt.length}function Ut(t){var r=Bt(t.parent.id,t.name);if(Nt[r]===t)Nt[r]=t.ab;else for(r=Nt[r];r;){if(r.ab===t){r.ab=t.ab;break}r=r.ab}}function Ft(t,r){var e;if(e=(e=Ht(t,"x"))?e:t.La.lookup?0:2)throw new Mt(e,t);for(e=Nt[Bt(t.id,r)];e;e=e.ab){var n=e.name;if(e.parent.id===t.id&&n===r)return e}return t.La.lookup(t,r)}function qt(t,r,e,n){t=new xr(t,r,e,n);r=Bt(t.parent.id,t.name);t.ab=Nt[r];return Nt[r]=t}function Gt(t){return 16384===(t&61440)}var Wt={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090};function zt(t){var r=["r","w","rw"][t&3];t&512&&(r+="w");return r}function Ht(t,r){if(Rt)return 0;if(!r.includes("r")||t.mode&292){if(r.includes("w")&&!(t.mode&146)||r.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function Zt(t,r){try{return Ft(t,r),20}catch(t){}return Ht(t,"wx")}function Jt(t,r,e){try{var n=Ft(t,r)}catch(t){return t.Pa}if(t=Ht(t,"wx"))return t;if(e){if(!Gt(n.mode))return 54;if(n===n.parent||"/"===Lt(n))return 10}else if(Gt(n.mode))return 31;return 0}function Vt(t){var r=4096;for(t=t||0;t<=r;t++)if(!Dt[t])return t;throw new Mt(33)}function Qt(t,r){Sr||(Sr=function(){},Sr.prototype={});var e=new Sr,n;for(n in t)e[n]=t[n];t=e;r=Vt(r);t.fd=r;return Dt[r]=t}var Kt={open:function(t){t.Ma=_t[t.node.rdev].Ma;t.Ma.open&&t.Ma.open(t)},Ya:function(){throw new Mt(70)}};function Xt(t,r){_t[t]={Ma:r}}function Yt(t,r){var e="/"===r,n=!r;if(e&&Ot)throw new Mt(10);if(!e&&!n){var i=Ct(r,{xb:!1});r=i.path;i=i.node;if(i.$a)throw new Mt(10);if(!Gt(i.mode))throw new Mt(54)}r={type:t,Sb:{},Ab:r,Kb:[]};t=t.Va(r);t.Va=r;r.root=t;e?Ot=t:i&&(i.$a=r,i.Va&&i.Va.Kb.push(r))}function tr(t,r,e){var n=Ct(t,{parent:!0}).node;t=bt(t);if(!t||"."===t||".."===t)throw new Mt(28);var i=Zt(n,t);if(i)throw new Mt(i);if(!n.La.fb)throw new Mt(63);return n.La.fb(n,t,r,e)}function rr(t,r){return tr(t,(void 0!==r?r:511)&1023|16384,0)}function er(t,r,e){"undefined"===typeof e&&(e=r,r=438);tr(t,r|8192,e)}function nr(t,r){if(!Et(t))throw new Mt(44);var e=Ct(r,{parent:!0}).node;if(!e)throw new Mt(44);r=bt(r);var n=Zt(e,r);if(n)throw new Mt(n);if(!e.La.symlink)throw new Mt(63);e.La.symlink(e,r,t)}function ir(t){var r=Ct(t,{parent:!0}).node,e=bt(t),n=Ft(r,e),i=Jt(r,e,!1);if(i)throw new Mt(i);if(!r.La.unlink)throw new Mt(63);if(n.$a)throw new Mt(10);try{It.willDeletePath&&It.willDeletePath(t)}catch(r){E("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+r.message)}r.La.unlink(r,e);Ut(n);try{if(It.onDeletePath)It.onDeletePath(t)}catch(r){E("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+r.message)}}function sr(t){t=Ct(t).node;if(!t)throw new Mt(44);if(!t.La.readlink)throw new Mt(28);return Et(Lt(t.parent),t.La.readlink(t))}function or(t,r){t=Ct(t,{Xa:!r}).node;if(!t)throw new Mt(44);if(!t.La.Ta)throw new Mt(63);return t.La.Ta(t)}function ar(t){return or(t,!0)}function ur(t,r){t="string"===typeof t?Ct(t,{Xa:!0}).node:t;if(!t.La.Sa)throw new Mt(63);t.La.Sa(t,{mode:r&4095|t.mode&-4096,timestamp:Date.now()})}function fr(t){t="string"===typeof t?Ct(t,{Xa:!0}).node:t;if(!t.La.Sa)throw new Mt(63);t.La.Sa(t,{timestamp:Date.now()})}function cr(t,r){if(0>r)throw new Mt(28);t="string"===typeof t?Ct(t,{Xa:!0}).node:t;if(!t.La.Sa)throw new Mt(63);if(Gt(t.mode))throw new Mt(31);if(32768!==(t.mode&61440))throw new Mt(28);var e=Ht(t,"w");if(e)throw new Mt(e);t.La.Sa(t,{size:r,timestamp:Date.now()})}function hr(t,r,e,n){if(""===t)throw new Mt(44);if("string"===typeof r){var i=Wt[r];if("undefined"===typeof i)throw Error("Unknown file open mode: "+r);r=i}e=r&64?("undefined"===typeof e?438:e)&4095|32768:0;if("object"===typeof t)var s=t;else{t=mt(t);try{s=Ct(t,{Xa:!(r&131072)}).node}catch(t){}}i=!1;if(r&64)if(s){if(r&128)throw new Mt(20)}else s=tr(t,e,0),i=!0;if(!s)throw new Mt(44);8192===(s.mode&61440)&&(r&=-513);if(r&65536&&!Gt(s.mode))throw new Mt(54);if(!i&&(e=s?40960===(s.mode&61440)?32:Gt(s.mode)&&("r"!==zt(r)||r&512)?31:Ht(s,zt(r)):44))throw new Mt(e);r&512&&cr(s,0);r&=-131713;n=Qt({node:s,path:Lt(s),flags:r,seekable:!0,position:0,Ma:s.Ma,Pb:[],error:!1},n);n.Ma.open&&n.Ma.open(n);!o.logReadFiles||r&1||(Tr||(Tr={}),t in Tr||(Tr[t]=1,E("FS.trackingDelegate error on read file: "+t)));try{It.onOpenFile&&(s=0,1!==(r&2097155)&&(s|=1),0!==(r&2097155)&&(s|=2),It.onOpenFile(t,s))}catch(r){E("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+r.message)}return n}function lr(t){if(null===t.fd)throw new Mt(8);t.nb&&(t.nb=null);try{t.Ma.close&&t.Ma.close(t)}catch(t){throw t}finally{Dt[t.fd]=null}t.fd=null}function vr(t,r,e){if(null===t.fd)throw new Mt(8);if(!t.seekable||!t.Ma.Ya)throw new Mt(70);if(0!=e&&1!=e&&2!=e)throw new Mt(28);t.position=t.Ma.Ya(t,r,e);t.Pb=[]}function dr(t,r,e,n,i){if(0>n||0>i)throw new Mt(28);if(null===t.fd)throw new Mt(8);if(1===(t.flags&2097155))throw new Mt(8);if(Gt(t.node.mode))throw new Mt(31);if(!t.Ma.read)throw new Mt(28);var s="undefined"!==typeof i;if(!s)i=t.position;else if(!t.seekable)throw new Mt(70);r=t.Ma.read(t,r,e,n,i);s||(t.position+=r);return r}function wr(t,r,e,n,i,s){if(0>n||0>i)throw new Mt(28);if(null===t.fd)throw new Mt(8);if(0===(t.flags&2097155))throw new Mt(8);if(Gt(t.node.mode))throw new Mt(31);if(!t.Ma.write)throw new Mt(28);t.seekable&&t.flags&1024&&vr(t,0,2);var o="undefined"!==typeof i;if(!o)i=t.position;else if(!t.seekable)throw new Mt(70);r=t.Ma.write(t,r,e,n,i,s);o||(t.position+=r);try{if(t.path&&It.onWriteToFile)It.onWriteToFile(t.path)}catch(r){E("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+r.message)}return r}function mr(t){var r={encoding:"binary"};r=r||{};r.flags=r.flags||0;r.encoding=r.encoding||"binary";if("utf8"!==r.encoding&&"binary"!==r.encoding)throw Error('Invalid encoding type "'+r.encoding+'"');var e,n=hr(t,r.flags);t=or(t).size;var i=new Uint8Array(t);dr(n,i,0,t,0);"utf8"===r.encoding?e=I(i,0):"binary"===r.encoding&&(e=i);lr(n);return e}function yr(){Mt||(Mt=function(t,r){this.node=r;this.Ob=function(t){this.Pa=t};this.Ob(t);this.message="FS error"},Mt.prototype=Error(),Mt.prototype.constructor=Mt,[44].forEach((function(t){xt[t]=new Mt(t);xt[t].stack="<generic error, no stack>"})))}var br;function pr(t,r){var e=0;t&&(e|=365);r&&(e|=146);return e}function Er(t,r,e){t=mt("/dev/"+t);var n=pr(!!r,!!e);gr||(gr=64);var i=gr++<<8|0;Xt(i,{open:function(t){t.seekable=!1},close:function(){e&&e.buffer&&e.buffer.length&&e(10)},read:function(t,e,n,i){for(var s=0,o=0;o<i;o++){try{var a=r()}catch(t){throw new Mt(29)}if(void 0===a&&0===s)throw new Mt(6);if(null===a||void 0===a)break;s++;e[n+o]=a}s&&(t.node.timestamp=Date.now());return s},write:function(t,r,n,i){for(var s=0;s<i;s++)try{e(r[n+s])}catch(t){throw new Mt(29)}i&&(t.node.timestamp=Date.now());return s}});er(t,n,i)}var gr,Pr={},Sr,Tr,$r={};function Or(t,r,e){try{var n=t(r)}catch(t){if(t&&t.node&&mt(r)!==mt(Lt(t.node)))return-54;throw t}z[e>>2]=n.dev;z[e+4>>2]=0;z[e+8>>2]=n.ino;z[e+12>>2]=n.mode;z[e+16>>2]=n.nlink;z[e+20>>2]=n.uid;z[e+24>>2]=n.gid;z[e+28>>2]=n.rdev;z[e+32>>2]=0;ct=[n.size>>>0,(ft=n.size,1<=+Math.abs(ft)?0<ft?(Math.min(+Math.floor(ft/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)];z[e+40>>2]=ct[0];z[e+44>>2]=ct[1];z[e+48>>2]=4096;z[e+52>>2]=n.blocks;z[e+56>>2]=n.atime.getTime()/1e3|0;z[e+60>>2]=0;z[e+64>>2]=n.mtime.getTime()/1e3|0;z[e+68>>2]=0;z[e+72>>2]=n.ctime.getTime()/1e3|0;z[e+76>>2]=0;ct=[n.ino>>>0,(ft=n.ino,1<=+Math.abs(ft)?0<ft?(Math.min(+Math.floor(ft/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)];z[e+80>>2]=ct[0];z[e+84>>2]=ct[1];return 0}var _r=void 0;function Dr(){_r+=4;return z[_r-4>>2]}function jr(t){t=Dt[t];if(!t)throw new Mt(8);return t}var Nr;Nr=l?function(){var t=G.hrtime();return 1e3*t[0]+t[1]/1e6}:function(){return performance.now()};var Rr={};function Ir(){if(!Mr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},r;for(r in Rr)void 0===Rr[r]?delete t[r]:t[r]=Rr[r];var e=[];for(r in t)e.push(r+"="+t[r]);Mr=e}return Mr}var Mr;function xr(t,r,e,n){t||(t=this);this.parent=t;this.Va=t.Va;this.$a=null;this.id=jt++;this.name=r;this.mode=e;this.La={};this.Ma={};this.rdev=n}Object.defineProperties(xr.prototype,{read:{get:function(){return 365===(this.mode&365)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(this.mode&146)},set:function(t){t?this.mode|=146:this.mode&=-147}}});yr();Nt=Array(4096);Yt(At,"/");rr("/tmp");rr("/home");rr("/home/web_user");(function(){rr("/dev");Xt(259,{read:function(){return 0},write:function(t,r,e,n){return n}});er("/dev/null",259);Pt(1280,Tt);Pt(1536,$t);er("/dev/tty",1280);er("/dev/tty1",1536);var t=pt();Er("random",t);Er("urandom",t);rr("/dev/shm");rr("/dev/shm/tmp")})();(function(){rr("/proc");var t=rr("/proc/self");rr("/proc/self/fd");Yt({Va:function(){var r=qt(t,"fd",16895,73);r.La={lookup:function(t,r){var e=Dt[+r];if(!e)throw new Mt(8);t={parent:null,Va:{Ab:"fake"},La:{readlink:function(){return e.path}}};return t.parent=t}};return r}},"/proc/self/fd")})();function Cr(t,r){var e=Array(C(t)+1);t=x(t,e,0,e.length);r&&(e.length=t);return e}var Lr={a:function(t,r,e,n){et("Assertion failed: "+M(t)+", at: "+[r?M(r):"unknown filename",e,n?M(n):"unknown function"])},s:function(t,r){dt||(dt=!0,vt());t=new Date(1e3*z[t>>2]);z[r>>2]=t.getSeconds();z[r+4>>2]=t.getMinutes();z[r+8>>2]=t.getHours();z[r+12>>2]=t.getDate();z[r+16>>2]=t.getMonth();z[r+20>>2]=t.getFullYear()-1900;z[r+24>>2]=t.getDay();var e=new Date(t.getFullYear(),0,1);z[r+28>>2]=(t.getTime()-e.getTime())/864e5|0;z[r+36>>2]=-(60*t.getTimezoneOffset());var n=new Date(t.getFullYear(),6,1).getTimezoneOffset();e=e.getTimezoneOffset();t=(n!=e&&t.getTimezoneOffset()==Math.min(e,n))|0;z[r+32>>2]=t;t=z[qr()+(t?4:0)>>2];z[r+40>>2]=t;return r},y:function(t,r){try{t=M(t);if(r&-8)var e=-28;else{var n;(n=Ct(t,{Xa:!0}).node)?(t="",r&4&&(t+="r"),r&2&&(t+="w"),r&1&&(t+="x"),e=t&&Ht(n,t)?-2:0):e=-44}return e}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},i:function(t,r){try{return t=M(t),ur(t,r),0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},z:function(t){try{return t=M(t),fr(t),0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},j:function(t,r){try{var e=Dt[t];if(!e)throw new Mt(8);ur(e.node,r);return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},A:function(t){try{var r=Dt[t];if(!r)throw new Mt(8);fr(r.node);return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},b:function(t,r,e){_r=e;try{var n=jr(t);switch(r){case 0:var i=Dr();return 0>i?-28:hr(n.path,n.flags,0,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=Dr(),n.flags|=i,0;case 12:return i=Dr(),q[i+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return z[Br()>>2]=28,-1;default:return-28}}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},k:function(t,r){try{var e=jr(t);return Or(or,e.path,r)}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},E:function(t,r,e){try{var n=Dt[t];if(!n)throw new Mt(8);if(0===(n.flags&2097155))throw new Mt(28);cr(n.node,e);return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},D:function(t,r){try{if(0===r)return-28;if(r<C("/")+1)return-68;x("/",F,t,r);return t}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},v:function(){return 0},d:function(){return 42},h:function(t,r){try{return t=M(t),Or(ar,t,r)}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},l:function(t,r){try{return t=M(t),t=mt(t),"/"===t[t.length-1]&&(t=t.substr(0,t.length-1)),rr(t,r),0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},t:function(t,r,e,n,i,s){try{t:{s<<=12;var o=!1;if(0!==(n&16)&&0!==t%65536)var a=-28;else{if(0!==(n&32)){var u=kt(r);if(!u){a=-48;break t}o=!0}else{var f=Dt[i];if(!f){a=-8;break t}var c=s;if(0!==(e&2)&&0===(n&2)&&2!==(f.flags&2097155))throw new Mt(2);if(1===(f.flags&2097155))throw new Mt(2);if(!f.Ma.gb)throw new Mt(43);var h=f.Ma.gb(f,t,r,c,e,n);u=h.Mb;o=h.jb}$r[u]={Jb:u,Ib:r,jb:o,fd:i,Lb:e,flags:n,offset:s};a=u}}return a}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},u:function(t,r){try{var e=$r[t];if(0!==r&&e){if(r===e.Ib){var n=Dt[e.fd];if(n&&e.Lb&2){var i=e.flags,s=e.offset,o=F.slice(t,t+r);n&&n.Ma.hb&&n.Ma.hb(n,o,s,r,i)}$r[t]=null;e.jb&&Fr(e.Jb)}var a=0}else a=-28;return a}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},I:function(t,r,e){_r=e;try{var n=M(t),i=e?Dr():0;return hr(n,r,i).fd}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},F:function(t,r,e){try{t=M(t);if(0>=e)var n=-28;else{var i=sr(t),s=Math.min(e,C(i)),o=U[r+s];x(i,F,r,e+1);U[r+s]=o;n=s}return n}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},H:function(t){try{t=M(t);var r=Ct(t,{parent:!0}).node,e=bt(t),n=Ft(r,e),i=Jt(r,e,!0);if(i)throw new Mt(i);if(!r.La.rmdir)throw new Mt(63);if(n.$a)throw new Mt(10);try{It.willDeletePath&&It.willDeletePath(t)}catch(r){E("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+r.message)}r.La.rmdir(r,e);Ut(n);try{if(It.onDeletePath)It.onDeletePath(t)}catch(r){E("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+r.message)}return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},e:function(t,r){try{return t=M(t),Or(or,t,r)}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},x:function(t){try{return t=M(t),ir(t),0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),-t.Pa}},J:function(){return 2147483648},n:function(t,r,e){F.copyWithin(t,r,r+e)},c:function(t){var r=F.length;t>>>=0;if(2147483648<t)return!1;for(var e=1;4>=e;e*=2){var n=r*(1+.2/e);n=Math.min(n,t+100663296);n=Math.max(t,n);0<n%65536&&(n+=65536-n%65536);t:{try{O.grow(Math.min(2147483648,n)-B.byteLength+65535>>>16);J();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},r:function(t){for(var r=Nr();Nr()-r<t;);},p:function(t,r){var e=0;Ir().forEach((function(n,i){var s=r+e;i=z[t+4*i>>2]=s;for(s=0;s<n.length;++s)U[i++>>0]=n.charCodeAt(s);U[i>>0]=0;e+=n.length+1}));return 0},q:function(t,r){var e=Ir();z[t>>2]=e.length;var n=0;e.forEach((function(t){n+=t.length+1}));z[r>>2]=n;return 0},f:function(t){try{var r=jr(t);lr(r);return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),t.Pa}},o:function(t,r){try{var e=jr(t);U[r>>0]=e.tty?2:Gt(e.mode)?3:40960===(e.mode&61440)?7:4;return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),t.Pa}},w:function(t,r,e,n){try{t:{for(var i=jr(t),s=t=0;s<e;s++){var o=z[r+(8*s+4)>>2],a=dr(i,U,z[r+8*s>>2],o,void 0);if(0>a){var u=-1;break t}t+=a;if(a<o)break}u=t}z[n>>2]=u;return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),t.Pa}},m:function(t,r,e,n,i){try{var s=jr(t);t=4294967296*e+(r>>>0);if(-9007199254740992>=t||9007199254740992<=t)return-61;vr(s,t,n);ct=[s.position>>>0,(ft=s.position,1<=+Math.abs(ft)?0<ft?(Math.min(+Math.floor(ft/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)];z[i>>2]=ct[0];z[i+4>>2]=ct[1];s.nb&&0===t&&0===n&&(s.nb=null);return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),t.Pa}},G:function(t){try{var r=jr(t);return r.Ma&&r.Ma.fsync?-r.Ma.fsync(r):0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),t.Pa}},B:function(t,r,e,n){try{t:{for(var i=jr(t),s=t=0;s<e;s++){var o=wr(i,U,z[r+8*s>>2],z[r+(8*s+4)>>2],void 0);if(0>o){var a=-1;break t}t+=o}a=t}z[n>>2]=a;return 0}catch(t){return"undefined"!==typeof Pr&&t instanceof Mt||et(t),t.Pa}},g:function(t){var r=Date.now();z[t>>2]=r/1e3|0;z[t+4>>2]=r%1e3*1e3|0;return 0},K:function(t){var r=Date.now()/1e3|0;t&&(z[t>>2]=r);return r},C:function(t,r){if(r){var e=r+8;r=1e3*z[e>>2];r+=z[e+4>>2]/1e3}else r=Date.now();t=M(t);try{var n=Ct(t,{Xa:!0}).node;n.La.Sa(n,{timestamp:Math.max(r,r)});var i=0}catch(t){if(!(t instanceof Mt)){t:{i=Error();if(!i.stack){try{throw Error()}catch(t){i=t}if(!i.stack){i="(no stack trace available)";break t}}i=i.stack.toString()}o.extraStackTrace&&(i+="\n"+o.extraStackTrace());i=lt(i);throw t+" : "+i}i=t.Pa;z[Br()>>2]=i;i=-1}return i}};(function(){function t(t){o.asm=t.exports;O=o.asm.L;J();V=o.asm.Ca;K.unshift(o.asm.M);tt--;o.monitorRunDependencies&&o.monitorRunDependencies(tt);0==tt&&(rt&&(t=rt,rt=null,t()))}function r(r){t(r.instance)}function e(t){return ut().then((function(t){return WebAssembly.instantiate(t,n)})).then((function(t){return t})).then(t,(function(t){E("failed to asynchronously prepare wasm: "+t);et(t)}))}var n={a:Lr};tt++;o.monitorRunDependencies&&o.monitorRunDependencies(tt);if(o.instantiateWasm)try{return o.instantiateWasm(n,t)}catch(t){return E("Module.instantiateWasm callback failed with error: "+t),!1}(function(){return $||"function"!==typeof WebAssembly.instantiateStreaming||nt()||it.startsWith("file://")||"function"!==typeof fetch?e(r):fetch(it,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,n).then(r,(function(t){E("wasm streaming compile failed: "+t);E("falling back to ArrayBuffer instantiation");return e(r)}))}))})();return{}})();o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.M).apply(null,arguments)};o._sqlite3_free=function(){return(o._sqlite3_free=o.asm.N).apply(null,arguments)};var Br=o.___errno_location=function(){return(Br=o.___errno_location=o.asm.O).apply(null,arguments)};o._sqlite3_step=function(){return(o._sqlite3_step=o.asm.P).apply(null,arguments)};o._sqlite3_finalize=function(){return(o._sqlite3_finalize=o.asm.Q).apply(null,arguments)};o._sqlite3_prepare_v2=function(){return(o._sqlite3_prepare_v2=o.asm.R).apply(null,arguments)};o._sqlite3_reset=function(){return(o._sqlite3_reset=o.asm.S).apply(null,arguments)};o._sqlite3_clear_bindings=function(){return(o._sqlite3_clear_bindings=o.asm.T).apply(null,arguments)};o._sqlite3_value_blob=function(){return(o._sqlite3_value_blob=o.asm.U).apply(null,arguments)};o._sqlite3_value_text=function(){return(o._sqlite3_value_text=o.asm.V).apply(null,arguments)};o._sqlite3_value_bytes=function(){return(o._sqlite3_value_bytes=o.asm.W).apply(null,arguments)};o._sqlite3_value_double=function(){return(o._sqlite3_value_double=o.asm.X).apply(null,arguments)};o._sqlite3_value_int=function(){return(o._sqlite3_value_int=o.asm.Y).apply(null,arguments)};o._sqlite3_value_type=function(){return(o._sqlite3_value_type=o.asm.Z).apply(null,arguments)};o._sqlite3_result_blob=function(){return(o._sqlite3_result_blob=o.asm._).apply(null,arguments)};o._sqlite3_result_double=function(){return(o._sqlite3_result_double=o.asm.$).apply(null,arguments)};o._sqlite3_result_error=function(){return(o._sqlite3_result_error=o.asm.aa).apply(null,arguments)};o._sqlite3_result_int=function(){return(o._sqlite3_result_int=o.asm.ba).apply(null,arguments)};o._sqlite3_result_int64=function(){return(o._sqlite3_result_int64=o.asm.ca).apply(null,arguments)};o._sqlite3_result_null=function(){return(o._sqlite3_result_null=o.asm.da).apply(null,arguments)};o._sqlite3_result_text=function(){return(o._sqlite3_result_text=o.asm.ea).apply(null,arguments)};o._sqlite3_column_count=function(){return(o._sqlite3_column_count=o.asm.fa).apply(null,arguments)};o._sqlite3_data_count=function(){return(o._sqlite3_data_count=o.asm.ga).apply(null,arguments)};o._sqlite3_column_blob=function(){return(o._sqlite3_column_blob=o.asm.ha).apply(null,arguments)};o._sqlite3_column_bytes=function(){return(o._sqlite3_column_bytes=o.asm.ia).apply(null,arguments)};o._sqlite3_column_double=function(){return(o._sqlite3_column_double=o.asm.ja).apply(null,arguments)};o._sqlite3_column_text=function(){return(o._sqlite3_column_text=o.asm.ka).apply(null,arguments)};o._sqlite3_column_type=function(){return(o._sqlite3_column_type=o.asm.la).apply(null,arguments)};o._sqlite3_column_name=function(){return(o._sqlite3_column_name=o.asm.ma).apply(null,arguments)};o._sqlite3_bind_blob=function(){return(o._sqlite3_bind_blob=o.asm.na).apply(null,arguments)};o._sqlite3_bind_double=function(){return(o._sqlite3_bind_double=o.asm.oa).apply(null,arguments)};o._sqlite3_bind_int=function(){return(o._sqlite3_bind_int=o.asm.pa).apply(null,arguments)};o._sqlite3_bind_text=function(){return(o._sqlite3_bind_text=o.asm.qa).apply(null,arguments)};o._sqlite3_bind_parameter_index=function(){return(o._sqlite3_bind_parameter_index=o.asm.ra).apply(null,arguments)};o._sqlite3_sql=function(){return(o._sqlite3_sql=o.asm.sa).apply(null,arguments)};o._sqlite3_normalized_sql=function(){return(o._sqlite3_normalized_sql=o.asm.ta).apply(null,arguments)};o._sqlite3_errmsg=function(){return(o._sqlite3_errmsg=o.asm.ua).apply(null,arguments)};o._sqlite3_exec=function(){return(o._sqlite3_exec=o.asm.va).apply(null,arguments)};o._sqlite3_changes=function(){return(o._sqlite3_changes=o.asm.wa).apply(null,arguments)};o._sqlite3_close_v2=function(){return(o._sqlite3_close_v2=o.asm.xa).apply(null,arguments)};o._sqlite3_create_function_v2=function(){return(o._sqlite3_create_function_v2=o.asm.ya).apply(null,arguments)};o._sqlite3_open=function(){return(o._sqlite3_open=o.asm.za).apply(null,arguments)};var Ur=o._malloc=function(){return(Ur=o._malloc=o.asm.Aa).apply(null,arguments)},Fr=o._free=function(){return(Fr=o._free=o.asm.Ba).apply(null,arguments)};o._RegisterExtensionFunctions=function(){return(o._RegisterExtensionFunctions=o.asm.Da).apply(null,arguments)};var qr=o.__get_tzname=function(){return(qr=o.__get_tzname=o.asm.Ea).apply(null,arguments)},Gr=o.__get_daylight=function(){return(Gr=o.__get_daylight=o.asm.Fa).apply(null,arguments)},Wr=o.__get_timezone=function(){return(Wr=o.__get_timezone=o.asm.Ga).apply(null,arguments)},zr=o.stackSave=function(){return(zr=o.stackSave=o.asm.Ha).apply(null,arguments)},Hr=o.stackRestore=function(){return(Hr=o.stackRestore=o.asm.Ia).apply(null,arguments)},Zr=o.stackAlloc=function(){return(Zr=o.stackAlloc=o.asm.Ja).apply(null,arguments)},Jr=o._memalign=function(){return(Jr=o._memalign=o.asm.Ka).apply(null,arguments)};o.cwrap=function(t,r,e,n){e=e||[];var i=e.every((function(t){return"number"===t}));return"string"!==r&&i&&!n?D(t):function(){return j(t,r,e,arguments)}};o.UTF8ToString=M;o.stackSave=zr;o.stackRestore=Hr;o.stackAlloc=Zr;var Vr;rt=function t(){Vr||Qr();Vr||(rt=t)};function Qr(){function t(){if(!Vr&&(Vr=!0,o.calledRun=!0,!_)){o.noFSInit||br||(br=!0,yr(),o.stdin=o.stdin,o.stdout=o.stdout,o.stderr=o.stderr,o.stdin?Er("stdin",o.stdin):nr("/dev/tty","/dev/stdin"),o.stdout?Er("stdout",null,o.stdout):nr("/dev/tty","/dev/stdout"),o.stderr?Er("stderr",null,o.stderr):nr("/dev/tty1","/dev/stderr"),hr("/dev/stdin",0),hr("/dev/stdout",1),hr("/dev/stderr",1));Rt=!1;ht(K);if(o.onRuntimeInitialized)o.onRuntimeInitialized();if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();X.unshift(t)}ht(X)}}if(!(0<tt)){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)Y();ht(Q);0<tt||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1);t()}),1)):t())}}o.run=Qr;if(o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();Qr();return i}));return e};{t.exports=n;t.exports.default=n}}));const _r=async(t,r)=>{try{const e=await r.getItem(t);return Promise.resolve(e)}catch(t){return Promise.reject(`GetDBFromStore: ${t.message}`)}};const Dr=async(t,r)=>{try{const e=null;await r.setItem(t,e);return Promise.resolve()}catch(t){return Promise.reject(`SetInitialDBToStore: ${t.message}`)}};const jr=async(t,r,e)=>{try{const n=t.export();await Nr(r,n,e);return Promise.resolve()}catch(t){return Promise.reject(`SetDBToStore: ${t.message}`)}};const Nr=async(t,r,e)=>{try{await e.setItem(t,r);return Promise.resolve()}catch(t){return Promise.reject(`SaveDBToStore: ${t.message}`)}};const Rr=async(t,r)=>{try{await r.removeItem(t);return Promise.resolve()}catch(t){return Promise.reject(`RemoveDBFromStore: ${t.message}`)}};const Ir=async(t,r)=>{try{const e=await r.getItem(t);if(e!=null&&e.length>0){return Promise.resolve(true)}else{return Promise.resolve(false)}}catch(t){return Promise.reject(`IsDBInStore: ${t}`)}};const Mr=async(t,r,e)=>{const n=`${r}-${t}`;try{const r=await Ir(n,e);if(r){const r=await Ir(t,e);if(r){const r=await _r(n,e);await Nr(t,r,e);await Rr(n,e);return Promise.resolve()}else{return Promise.reject(new Error(`RestoreDBFromStore: ${t} does not exist`))}}else{return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}}catch(t){return Promise.reject(`RestoreDBFromStore: ${t.message}`)}};const xr=async(t,r,e)=>{try{const n=await Ir(t,e);if(n){const n=await _r(t,e);await Nr(r,n,e);return Promise.resolve()}else{return Promise.reject(new Error(`CopyDBToStore: ${t} does not exist`))}}catch(t){return Promise.reject(`CopyDBToStore: ${t.message}`)}};const Cr=async t=>{try{const r=await t.keys();return Promise.resolve(r)}catch(t){return Promise.reject(`GetDBListFromStore: ${t.message}`)}};const Lr=async t=>{let r="SELECT name FROM sqlite_master WHERE ";r+="type='table' AND name NOT LIKE 'sync_table' ";r+="AND name NOT LIKE '_temp_%' ";r+="AND name NOT LIKE 'sqlite_%' ";r+="ORDER BY rootpage DESC;";const e=[];try{const n=await fe(t,r,[]);for(const t of n){e.push(t.name)}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetTablesNames: ${t.message}`))}};const Br=async(t,r)=>{let e="";let n=`AND name NOT LIKE ('sqlite_%')`;switch(r){case"index":e="DropIndexes";break;case"trigger":e="DropTriggers";break;case"table":e="DropTables";n+=` AND name NOT IN ('sync_table')`;break;case"view":e="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${r} `+"not found"))}let i="SELECT name FROM sqlite_master WHERE ";i+=`type = '${r}' ${n};`;try{const n=await fe(t,i,[]);if(n.length>0){const i=r.toUpperCase();const s=[];for(const t of n){let r=`DROP ${i} IF EXISTS `;r+=`${t.name};`;s.push(r)}for(const r of s){const n=await ce(t,r,[],false);if(n<0){return Promise.reject(new Error(`DropElements: ${e}: lastId < 0`))}}}return Promise.resolve()}catch(t){return Promise.reject(new Error(`DropElements: ${e}: ${t.message}`))}};const Ur=async t=>{try{await Br(t,"table");await Br(t,"index");await Br(t,"trigger");await Br(t,"view");await ce(t,"VACUUM;",[],false);return Promise.resolve()}catch(t){return Promise.reject(new Error(`DropAll: ${t.message}`))}};const Fr=async(t,r)=>{const e=Object.keys(r);const n=[];for(const t of e){let r="DROP TABLE IF EXISTS ";r+=`_temp_${t};`;n.push(r)}try{const r=await ae(t,n.join("\n"),false);if(r<0){return Promise.reject(new Error("DropTempTables: changes < 0"))}return Promise.resolve()}catch(t){return Promise.reject(new Error(`DropTempTables: ${t.message}`))}};const qr=async t=>{const r=["database","version","overwrite","encrypted","mode","tables","views"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="database"&&typeof t[e]!="string")return false;if(e==="version"&&typeof t[e]!="number")return false;if(e==="overwrite"&&typeof t[e]!="boolean")return false;if(e==="encrypted"&&typeof t[e]!="boolean")return false;if(e==="mode"&&typeof t[e]!="string")return false;if(e==="tables"&&typeof t[e]!="object")return false;if(e==="tables"){for(const r of t[e]){const t=await Gr(r);if(!t)return false}}if(e==="views"&&typeof t[e]!="object")return false;if(e==="views"){for(const r of t[e]){const t=await Zr(r);if(!t)return false}}}return true};const Gr=async t=>{const r=["name","schema","indexes","triggers","values"];let e=0;if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const n of Object.keys(t)){if(r.indexOf(n)===-1)return false;if(n==="name"&&typeof t[n]!="string")return false;if(n==="schema"&&typeof t[n]!="object")return false;if(n==="indexes"&&typeof t[n]!="object")return false;if(n==="triggers"&&typeof t[n]!="object")return false;if(n==="values"&&typeof t[n]!="object")return false;if(n==="schema"){t["schema"].forEach((t=>{if(t.column){e++}}));for(let r=0;r<e;r++){const e=await Wr(t[n][r]);if(!e)return false}}if(n==="indexes"){for(const r of t[n]){const t=await zr(r);if(!t)return false}}if(n==="triggers"){for(const r of t[n]){const t=await Hr(r);if(!t)return false}}if(n==="values"){if(e>0){for(const r of t[n]){if(typeof r!="object"||r.length!=e)return false}}}}return true};const Wr=async t=>{const r=["column","value","foreignkey","constraint"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="column"&&typeof t[e]!="string")return false;if(e==="value"&&typeof t[e]!="string")return false;if(e==="foreignkey"&&typeof t[e]!="string")return false;if(e==="constraint"&&typeof t[e]!="string")return false}return true};const zr=async t=>{const r=["name","value","mode"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="name"&&typeof t[e]!="string")return false;if(e==="value"&&typeof t[e]!="string")return false;if(e==="mode"&&(typeof t[e]!="string"||t[e].toUpperCase()!="UNIQUE"))return false}return true};const Hr=async t=>{const r=["name","timeevent","condition","logic"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="name"&&typeof t[e]!="string")return false;if(e==="timeevent"&&typeof t[e]!="string")return false;if(e==="condition"&&typeof t[e]!="string")return false;if(e==="logic"&&typeof t[e]!="string")return false}return true};const Zr=async t=>{const r=["name","value"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="name"&&typeof t[e]!="string")return false;if(e==="value"&&typeof t[e]!="string")return false}return true};const Jr=async t=>{for(let r=0;r<t.length;r++){const e={};const n=Object.keys(t[r]);if(n.includes("column")){e.column=t[r].column}if(n.includes("value")){e.value=t[r].value}if(n.includes("foreignkey")){e.foreignkey=t[r].foreignkey}if(n.includes("constraint")){e.constraint=t[r].constraint}const i=await Wr(e);if(!i){return Promise.reject(new Error(`CheckSchemaValidity: schema[${r}] not valid`))}}return Promise.resolve()};const Vr=async t=>{for(let r=0;r<t.length;r++){const e={};const n=Object.keys(t[r]);if(n.includes("value")){e.value=t[r].value}if(n.includes("name")){e.name=t[r].name}if(n.includes("mode")){e.mode=t[r].mode}const i=await zr(e);if(!i){return Promise.reject(new Error(`CheckIndexesValidity: indexes[${r}] not valid`))}}return Promise.resolve()};const Qr=async t=>{for(let r=0;r<t.length;r++){const e={};const n=Object.keys(t[r]);if(n.includes("logic")){e.logic=t[r].logic}if(n.includes("name")){e.name=t[r].name}if(n.includes("timeevent")){e.timeevent=t[r].timeevent}if(n.includes("condition")){e.condition=t[r].condition}const i=await Hr(e);if(!i){return Promise.reject(new Error(`CheckTriggersValidity: triggers[${r}] not valid`))}}return Promise.resolve()};const Kr=async(t,r)=>{let e=[];const n=[];const i=[];const s=`PRAGMA table_info('${r}');`;try{e=await fe(t,s,[]);if(e.length>0){for(const t of e){n.push(t.name);i.push(t.type)}}return Promise.resolve({names:n,types:i})}catch(t){return Promise.reject(new Error("GetTableColumnNamesTypes: "+`${t.message}`))}};const Xr=async(t,r,e)=>{const n=[];try{const i=await Kr(t,e);let s=[];if(Object.keys(i).includes("names")){s=i.names}else{return Promise.reject(new Error(`GetValues: Table ${e} no names`))}const o=await fe(t,r,[]);for(const t of o){const r=[];for(const e of s){if(Object.keys(t).includes(e)){r.push(t[e])}else{r.push(null)}}n.push(r)}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`GetValues: ${t.message}`))}};const Yr=async(t,r)=>{const e="BeginTransaction: ";if(!r){return Promise.reject(new Error(`${e}database not opened`))}const n="BEGIN TRANSACTION;";try{await t.run(n);return Promise.resolve()}catch(t){return Promise.reject(new Error(`DbChanges failed: ${t}`))}};const te=async(t,r)=>{const e="RollbackTransaction: ";if(!r){return Promise.reject(new Error(`${e}database not opened`))}const n="ROLLBACK TRANSACTION;";try{await t.run(n);return Promise.resolve()}catch(t){return Promise.reject(new Error(`${e}${t.message}`))}};const re=async(t,r)=>{const e="CommitTransaction: ";if(!r){return Promise.reject(new Error(`${e}database not opened`))}const n="COMMIT TRANSACTION;";try{await t.run(n);return Promise.resolve()}catch(t){return Promise.reject(new Error(`${e}${t.message}`))}};const ee=async t=>{const r="SELECT total_changes()";let e=0;try{const n=await t.exec(r);e=n[0].values[0][0];return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`DbChanges failed: ${t.message}`))}};const ne=async t=>{const r="SELECT last_insert_rowid()";let e=-1;try{const n=await t.exec(r);e=n[0].values[0][0];return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetLastId failed: ${t.message}`))}};const ie=async(t,r)=>{let e="OFF";if(r){e="ON"}try{await t.exec(`PRAGMA foreign_keys = '${e}'`);return Promise.resolve()}catch(t){return Promise.reject(new Error(`SetForeignKey: ${t.message}`))}};const se=async t=>{let r=0;try{const e=await t.exec("PRAGMA user_version;");r=e[0].values[0][0];return Promise.resolve(r)}catch(t){return Promise.reject(new Error(`GetVersion: ${t.message}`))}};const oe=async(t,r)=>{try{await t.exec(`PRAGMA user_version = ${r}`);return Promise.resolve()}catch(t){return Promise.reject(new Error(`SetVersion: ${t.message}`))}};const ae=async(t,r,e)=>{let n=-1;let i=-1;try{i=await ee(t);var s=r;if(!e&&r.toLowerCase().includes("DELETE FROM".toLowerCase())){s=r.replace(/\n/g,"");let e=s.split(";");var o=[];for(const r of e){const e=r.trim().substring(0,11).toUpperCase();if(e==="DELETE FROM"&&r.toLowerCase().includes("WHERE".toLowerCase())){const e=r.trim();const n=await he(t,e,[]);o.push(n)}else{o.push(r)}}s=o.join(";")}await t.exec(s);n=await ee(t)-i;return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`Execute: ${t.message}`))}};const ue=async(t,r,e)=>{let n=-1;for(let i=0;i<r.length;i++){const s="statement"in r[i]?r[i].statement:null;const o="values"in r[i]&&r[i].values.length>0?r[i].values:[];if(s==null){let t="ExecuteSet: Error No statement";t+=` for index ${i}`;return Promise.reject(new Error(t))}try{if(Array.isArray(o[0])){for(const r of o){const n=await ge(r);await ce(t,s,n,e)}}else{const r=await ge(o);await ce(t,s,r,e)}n=await ne(t)}catch(t){return Promise.reject(new Error(`ExecuteSet: ${t.message}`))}}return Promise.resolve(n)};const fe=async(t,r,e)=>{const n=[];try{let i=[];if(e!=null&&e.length>0){i=await t.exec(r,e)}else{i=await t.exec(r)}if(i.length==0)return Promise.resolve([]);for(const t of i[0].values){const r={};for(let e=0;e<i[0].columns.length;e++){r[i[0].columns[e]]=t[e]}n.push(r)}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`queryAll: ${t.message}`))}};const ce=async(t,r,e,n)=>{let i=r.replace(/\n/g,"").trim().substring(0,6).toUpperCase();let s=-1;let o=r;try{if(!n&&i==="DELETE"){o=await he(t,r,e)}if(e!=null&&e.length>0){const r=await ge(e);await t.exec(o,r)}else{await t.exec(o)}s=await ne(t);return Promise.resolve(s)}catch(t){return Promise.reject(new Error(`run: ${t.message}`))}};const he=async(t,r,e)=>{let n=r;try{const i=await pe(t,true);const s=await Ee(t,true);if(i&&s){const i=r.toUpperCase().indexOf("WHERE");const s=r.substring(0,i-1);const o=r.substring(i,r.length);const a=s.substring("DELETE FROM".length).trim();n=`UPDATE ${a} SET sql_deleted = 1 ${o}`;await le(t,a,o,e)}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`deleteSQL: ${t.message}`))}};const le=async(t,r,e,n)=>{try{const i=await me(t,r);for(const r of i){const i=await ve(r.sql);if(i.length<=0){continue}const s=await de(r.sql);if(s.length<=0){continue}const o=await we(e,s);if(o.length<=0){continue}const a="UPDATE "+i+" SET sql_deleted = 1 "+o;if(n!=null&&n.length>0){const r=await ge(n);await t.exec(a,r)}else{await t.exec(a)}const u=await ne(t);if(u==-1){const t=`UPDATE sql_deleted failed for references table: ${i}`;return Promise.reject(new Error(`findReferencesAndUpdate: ${t}`))}return}}catch(t){return Promise.reject(new Error(`findReferencesAndUpdate: ${t.message}`))}};const ve=async t=>{var r="";if(t.length>0&&t.substring(0,12).toLowerCase()==="CREATE TABLE".toLowerCase()){const e=t.indexOf("(");r=t.substring(13,e).trim()}return r};const de=async t=>{var r="";if(t.length>0){const e=t.toLowerCase().indexOf("FOREIGN KEY".toLowerCase());const n=t.substring(e+12);const i=n.indexOf("(");const s=n.indexOf(")");r=n.substring(i+1,s).trim()}return r};const we=async(t,r)=>{var e="";if(t.length>0){const n=t.toLowerCase().indexOf("WHERE".toLowerCase());const i=t.substring(n+6);const s=i.indexOf("=");const o=i.substring(0,s).trim();e=t.replace(o,r)}return e};const me=async(t,r)=>{const e="SELECT sql FROM sqlite_master "+"WHERE sql LIKE('%REFERENCES%') AND "+"sql LIKE('%"+r+"%') AND sql LIKE('%ON DELETE%');";try{const r=await fe(t,e,[]);return Promise.resolve(r)}catch(t){return Promise.reject(new Error(`getReferences: ${t.message}`))}};const ye=async t=>{try{const r=await Lr(t);return Promise.resolve(r)}catch(t){return Promise.reject(new Error(`getTableList: ${t.message}`))}};const be=async(t,r)=>{try{let e="SELECT name FROM sqlite_master WHERE ";e+=`type='table' AND name='${r}';`;const n=await fe(t,e,[]);const i=n.length>0?true:false;return Promise.resolve(i)}catch(t){return Promise.reject(new Error(`isTableExists: ${t.message}`))}};const pe=async(t,r)=>{if(!r){return Promise.reject("isLastModified: database not opened")}try{const r=await Lr(t);for(const e of r){const r=await Kr(t,e);const n=r.names;if(n.includes("last_modified")){return Promise.resolve(true)}}}catch(t){return Promise.reject(`isLastModified: ${t}`)}};const Ee=async(t,r)=>{if(!r){return Promise.reject("isSqlDeleted: database not opened")}try{const r=await Lr(t);for(const e of r){const r=await Kr(t,e);const n=r.names;if(n.includes("sql_deleted")){return Promise.resolve(true)}}}catch(t){return Promise.reject(`isSqlDeleted: ${t}`)}};const ge=async t=>{const r=[];for(const e of t){let t=e;if(typeof e==="undefined")t=null;r.push(t)}return Promise.resolve(r)};const Pe=async t=>{const r="BackupTables: ";let e={};try{const n=await Lr(t);for(const i of n){try{const r=await Se(t,i);e[`${i}`]=r}catch(t){return Promise.reject(new Error(`${r}table ${i}: `+`${t.message}`))}}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`BackupTables: ${t.message}`))}};const Se=async(t,r)=>{try{await Yr(t,true);const e=await Te(t,r);const n=`_temp_${r}`;const i=`DROP TABLE IF EXISTS ${n};`;await ce(t,i,[],false);let s=`ALTER TABLE ${r} RENAME `;s+=`TO ${n};`;const o=await ce(t,s,[],false);if(o<0){let r="BackupTable: lastId < 0";try{await te(t,true)}catch(t){r+=`: ${t.message}`}return Promise.reject(new Error(`${r}`))}else{try{await re(t,true);return Promise.resolve(e)}catch(t){return Promise.reject(new Error("BackupTable: "+`${t.message}`))}}}catch(t){return Promise.reject(new Error(`BackupTable: ${t.message}`))}};const Te=async(t,r)=>{let e=[];const n=[];const i=`PRAGMA table_info('${r}');`;try{e=await fe(t,i,[]);if(e.length>0){for(const t of e){n.push(t.name)}}return Promise.resolve(n)}catch(t){return Promise.reject(new Error("GetTableColumnNames: "+`${t.message}`))}};const $e=async(t,r)=>{let e={};try{const n=await Lr(t);if(n.length===0){return Promise.reject(new Error("FindCommonColumns: get "+"table's names failed"))}for(const i of n){const n=await Te(t,i);const s=Object.keys(r);if(s.includes(i)){e[i]=ke(r[i],n)}}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`FindCommonColumns: ${t.message}`))}};const ke=(t,r)=>{if(t!=null&&r!=null){const e=new Set(t);const n=new Set(r);return[...e].filter((t=>n.has(t)))}else{return[]}};const Ae=async(t,r)=>{try{await Yr(t,true);const e=[];const n=Object.keys(r);n.forEach((t=>{const n=r[t].join(",");let i=`INSERT INTO ${t} `;i+=`(${n}) `;i+=`SELECT ${n} FROM _temp_${t};`;e.push(i)}));const i=await ae(t,e.join("\n"),false);if(i<0){let r="updateNewTablesData: "+"changes < 0";try{await te(t,true)}catch(t){r+=`: ${t.message}`}return Promise.reject(new Error(`${r}`))}else{try{await re(t,true);return Promise.resolve()}catch(t){return Promise.reject(new Error("updateNewTablesData: "+`${t.message}`))}}}catch(t){return Promise.reject(new Error("updateNewTablesData: "+`${t.message}`))}};const Oe=async(t,r)=>{let e=-1;const n=r.version;try{await oe(t,n);if(r.mode==="full"){await Ur(t)}e=await _e(t,r);return Promise.resolve(e)}catch(t){return Promise.reject(new Error("CreateDatabaseSchema: "+`${t.message}`))}};const _e=async(t,r)=>{let e=0;try{await Yr(t,true)}catch(t){return Promise.reject(new Error(`CreateSchema: ${t.message}`))}const n=await De(r);if(n.length>0){const r=n.join("\n");try{e=await ae(t,r,true);if(e<0){try{await te(t,true)}catch(t){return Promise.reject(new Error("CreateSchema: changes < 0 "+`${t.message}`))}}}catch(r){const e=r.message;try{await te(t,true);return Promise.reject(new Error(`CreateSchema: ${e}`))}catch(t){return Promise.reject(new Error("CreateSchema: changes < 0 "+`${t.message}: ${e}`))}}}try{await re(t,true);return Promise.resolve(e)}catch(t){return Promise.reject(new Error("CreateSchema: commit "+`${t.message}`))}};const De=async t=>{const r=[];let e=false;let n=false;try{for(const i of t.tables){if(i.schema!=null&&i.schema.length>=1){r.push("CREATE TABLE IF NOT EXISTS "+`${i.name} (`);for(let t=0;t<i.schema.length;t++){if(t===i.schema.length-1){if(i.schema[t].column){r.push(`${i.schema[t].column} ${i.schema[t].value}`);if(i.schema[t].column==="last_modified"){e=true}if(i.schema[t].column==="sql_deleted"){n=true}}else if(i.schema[t].foreignkey){r.push(`FOREIGN KEY (${i.schema[t].foreignkey}) ${i.schema[t].value}`)}else if(i.schema[t].constraint){r.push(`CONSTRAINT ${i.schema[t].constraint} ${i.schema[t].value}`)}}else{if(i.schema[t].column){r.push(`${i.schema[t].column} ${i.schema[t].value},`)}else if(i.schema[t].foreignkey){r.push(`FOREIGN KEY (${i.schema[t].foreignkey}) ${i.schema[t].value},`)}else if(i.schema[t].constraint){r.push(`CONSTRAINT ${i.schema[t].constraint} ${i.schema[t].value},`)}}}r.push(");");if(e&&n){let t="CREATE TRIGGER IF NOT EXISTS ";t+=`${i.name}`;t+=`_trigger_last_modified `;t+=`AFTER UPDATE ON ${i.name} `;t+="FOR EACH ROW WHEN NEW.last_modified < ";t+="OLD.last_modified BEGIN UPDATE ";t+=`${i.name} `;t+=`SET last_modified = `;t+="(strftime('%s','now')) WHERE id=OLD.id; END;";r.push(t)}}if(i.indexes!=null&&i.indexes.length>=1){for(const t of i.indexes){const e=i.name;let n=`CREATE ${Object.keys(t).includes("mode")?t.mode+" ":""} INDEX IF NOT EXISTS `;n+=`${t.name} ON ${e} (${t.value});`;r.push(n)}}if(i.triggers!=null&&i.triggers.length>=1){for(const t of i.triggers){const e=i.name;if(t.timeevent.toUpperCase().endsWith(" ON")){t.timeevent=t.timeevent.substring(0,t.timeevent.length-3)}let n=`CREATE TRIGGER IF NOT EXISTS `;n+=`${t.name} ${t.timeevent} ON ${e} `;if(t.condition)n+=`${t.condition} `;n+=`${t.logic};`;r.push(n)}}}return Promise.resolve(r)}catch(t){return Promise.reject(t)}};const je=async(t,r,e)=>{let n=0;let i=false;let s=-1;let o="";let a=-1;try{a=await ee(t);await Yr(t,true)}catch(t){return Promise.reject(new Error(`createTablesData: ${t.message}`))}for(const n of r.tables){if(n.values!=null&&n.values.length>=1){try{s=await Ne(t,n,r.mode);const o=`create table data ${n.name}`;e.emit({progress:o});if(s<0)break;i=true}catch(t){o=t.message;i=false;break}}}if(i){try{await re(t,true);n=await ee(t)-a;return Promise.resolve(n)}catch(t){return Promise.reject(new Error("CreateTablesData: "+`${t.message}`))}}else{if(o.length>0){try{await te(t,true);return Promise.reject(new Error(`CreateTablesData: ${o}`))}catch(t){return Promise.reject(new Error("CreateTablesData: "+`${t.message}: ${o}`))}}else{return Promise.resolve(0)}}};const Ne=async(t,r,e)=>{let n=-1;try{const i=await be(t,r.name);if(!i){return Promise.reject(new Error("CreateTableData: Table "+`${r.name} does not exist`))}const s=await Kr(t,r.name);const o=s.types;const a=s.names;if(o.length===0){return Promise.reject(new Error("CreateTableData: Table "+`${r.name} info does not exist`))}for(let i=0;i<r.values.length;i++){let s=r.values[i];let o=true;const u=await Re(t,a,s,i,r.name,e);o=await Ie(t,u,s,r.name,a);if(o){if(u.substring(0,6).toUpperCase()==="DELETE"){s=[]}n=await ce(t,u,s,true);if(n<0){return Promise.reject(new Error("CreateTableData: lastId < 0"))}}else{n=0}}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`CreateTableData: ${t.message}`))}};const Re=async(t,r,e,n,i,s)=>{if(e.length!=r.length||e.length===0||r.length===0){return Promise.reject(new Error(`CreateRowStatement: Table ${i} `+`values row ${n} not correct length`))}try{const o=await Me(t,i,r[0],e[0]);let a;if(s==="full"||s==="partial"&&!o){const t=r.join();const e=await xe(r.length);a=`INSERT INTO ${i} (${t}) VALUES (`;a+=`${e});`}else{let t=true;const s=t=>t===`sql_deleted`;const o=r.findIndex(s);if(o>=0){if(e[o]===1){t=false;a=`DELETE FROM ${i} WHERE `;if(typeof e[0]=="string"){a+=`${r[0]} = '${e[0]}';`}else{a+=`${r[0]} = ${e[0]};`}}}if(t){const t=await Ce(r);if(t.length===0){return Promise.reject(new Error(`CreateRowStatement: Table ${i} `+`values row ${n} not set to String`))}a=`UPDATE ${i} SET ${t} WHERE `;if(typeof e[0]=="string"){a+=`${r[0]} = '${e[0]}';`}else{a+=`${r[0]} = ${e[0]};`}}}return Promise.resolve(a)}catch(t){return Promise.reject(new Error(`CreateRowStatement: ${t.message}`))}};const Ie=async(t,r,e,n,i)=>{let s=true;if(r.substring(0,6)==="UPDATE"){try{let r=`SELECT * FROM ${n} WHERE `;if(typeof e[0]=="string"){r+=`${i[0]} = '${e[0]}';`}else{r+=`${i[0]} = ${e[0]};`}const s=await Xr(t,r,n);let o=[];if(s.length>0){o=s[0]}if(e.length>0&&o.length>0&&e.length===o.length){for(let t=0;t<e.length;t++){if(e[t]!==o[t]){return Promise.resolve(true)}}return Promise.resolve(false)}else{const t="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${t}`))}}catch(t){return Promise.reject(new Error(`CheckUpdate: ${t.message}`))}}else{return Promise.resolve(s)}};const Me=async(t,r,e,n)=>{let i=false;let s=`SELECT ${e} FROM `+`${r} WHERE ${e} = `;if(typeof n==="number")s+=`${n};`;if(typeof n==="string")s+=`'${n}';`;try{const r=await fe(t,s,[]);if(r.length===1)i=true;return Promise.resolve(i)}catch(t){return Promise.reject(new Error(`IsIdExists: ${t.message}`))}};const xe=async t=>{let r="";for(let e=0;e<t;e++){r+="?,"}if(r.length>1){r=r.slice(0,-1);return Promise.resolve(r)}else{return Promise.reject(new Error("CreateQuestionMarkString: length = 0"))}};const Ce=async t=>{let r="";for(const e of t){r+=`${e} = ? ,`}if(r.length>1){r=r.slice(0,-1);return Promise.resolve(r)}else{return Promise.reject(new Error("SetNameForUpdate: length = 0"))}};const Le=async(t,r)=>{const e=`CREATE VIEW IF NOT EXISTS ${r.name} AS ${r.value};`;try{const n=await ae(t,e,true);if(n<0){return Promise.reject(new Error(`CreateView: ${r.name} failed`))}return Promise.resolve()}catch(t){return Promise.reject(new Error(`CreateView: ${t.message}`))}};const Be=async(t,r)=>{let e=false;let n="";let i=-1;let s=-1;try{i=await ee(t);await Yr(t,true)}catch(t){return Promise.reject(new Error(`createViews: ${t.message}`))}for(const i of r.views){if(i.value!=null){try{await Le(t,i);e=true}catch(t){n=t.message;e=false;break}}}if(e){try{await re(t,true);s=await ee(t)-i;return Promise.resolve(s)}catch(t){return Promise.reject(new Error("createViews: "+`${t.message}`))}}else{if(n.length>0){try{await te(t,true);return Promise.reject(new Error(`createViews: ${n}`))}catch(t){return Promise.reject(new Error("createViews: "+`${t.message}: ${n}`))}}else{return Promise.resolve(0)}}};const Ue=async(t,r,e)=>{const n={};let i=[];let s=[];let o="";try{s=await Fe(t);const a=await Je(t);if(a.length===0){return Promise.reject(new Error("createExportObject: table's names failed"))}else{const u=await be(t,"sync_table");if(!u&&r.mode==="partial"){return Promise.reject(new Error("No sync_table available"))}switch(r.mode){case"partial":{i=await He(t,a,e);break}case"full":{i=await qe(t,a,e);break}default:{o="createExportObject: expMode "+r.mode+" not defined";break}}if(o.length>0){return Promise.reject(new Error(o))}if(i.length>0){n.database=r.database;n.version=r.version;n.encrypted=r.encrypted;n.mode=r.mode;n.tables=i;if(s.length>0){n.views=s}}return Promise.resolve(n)}}catch(t){return Promise.reject(new Error("createExportObject: "+t.message))}};const Fe=async t=>{const r=[];let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=await fe(t,e,[]);for(const t of n){const e={};e.name=t.name;e.value=t.sql.substring(t.sql.indexOf("AS ")+3);r.push(e)}return Promise.resolve(r)}catch(t){return Promise.reject(new Error(`getViewsName: ${t.message}`))}};const qe=async(t,r,e)=>{const n=[];let i="";try{for(const s of r){let r;let o;if(s.name){r=s.name}else{i="GetTablesFull: no name";break}if(s.sql){o=s.sql}else{i="GetTablesFull: no sql";break}const a={};const u=await Ge(o);if(u.length===0){i="GetTablesFull: no Schema returned";break}await Jr(u);const f=await We(t,r);if(f.length>0){await Vr(f)}const c=await ze(t,r);if(c.length>0){await Qr(c)}let h=`Full: Table ${r} schema export completed ...`;e.emit({progress:h});const l=`SELECT * FROM ${r};`;const v=await Xr(t,l,r);a.name=r;if(u.length>0){a.schema=u}else{i=`GetTablesFull: must contain schema`;break}if(f.length>0){a.indexes=f}if(c.length>0){a.triggers=c}if(v.length>0){a.values=v}if(Object.keys(a).length<=1){i=`GetTablesFull: table ${r} is not a jsonTable`;break}h=`Full: Table ${r} table data export completed ...`;e.emit({progress:h});n.push(a)}if(i.length>0){return Promise.reject(new Error(i))}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`GetTablesFull: ${t.message}`))}};const Ge=async t=>{const r=[];const e=t.indexOf("(");const n=t.lastIndexOf(")");let i=t.substring(e+1,n);try{i=await tn(i);const t=i.split(",");for(let e=0;e<t.length;e++){let n=[];const i=t[e].trim();n[0]=i.substring(0,i.indexOf(" "));n[1]=i.substring(i.indexOf(" ")+1);const s={};if(n[0].toUpperCase()==="FOREIGN"){const r=t[e].indexOf("(");const i=t[e].indexOf(")");n[0]=t[e].substring(r+1,i);n[1]=t[e].substring(i+2);s["foreignkey"]=n[0]}else if(n[0].toUpperCase()==="CONSTRAINT"){let t=[];const r=n[1].trim();t[0]=r.substring(0,r.indexOf(" "));t[1]=r.substring(r.indexOf(" ")+1);n[0]=t[0];s["constraint"]=n[0];n[1]=t[1]}else{s["column"]=n[0]}s["value"]=n[1].replace(//g,",");r.push(s)}return Promise.resolve(r)}catch(t){return Promise.reject(new Error(t.message))}};const We=async(t,r)=>{const e=[];let n="";try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'index' AND tbl_name = '${r}' `;i+=`AND sql NOTNULL;`;const s=await fe(t,i,[]);if(s.length>0){for(const t of s){const i=Object.keys(t);if(i.length===3){if(t["tbl_name"]===r){const r=t["sql"];const n=r.includes("UNIQUE")?"UNIQUE":"";const i=r.lastIndexOf("(");const s=r.lastIndexOf(")");const o={};o.name=t["name"];o.value=r.slice(i+1,s);if(n.length>0)o.mode=n;e.push(o)}else{n=`GetIndexes: Table ${r} doesn't match`;break}}else{n=`GetIndexes: Table ${r} creating indexes`;break}}if(n.length>0){return Promise.reject(new Error(n))}}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetIndexes: ${t.message}`))}};const ze=async(t,r)=>{const e=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${r}' `;n+=`AND sql NOT NULL;`;const i=await fe(t,n,[]);if(i.length>0){for(const t of i){const n=Object.keys(t);if(n.length===3){if(t["tbl_name"]===r){const n=t["sql"];const i=t["name"];let s=n.split(i);if(s.length!=2){return Promise.reject(new Error(`GetTriggers: sql split name does not return 2 values`))}if(!s[1].includes(r)){return Promise.reject(new Error(`GetTriggers: sql split does not contains ${r}`))}const o=s[1].split(r,1)[0].trim();s=s[1].split(o+" "+r);if(s.length!=2){return Promise.reject(new Error(`GetTriggers: sql split tableName does not return 2 values`))}let a="";let u="";if(s[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){s=s[1].trim().split("BEGIN");if(s.length!=2){return Promise.reject(new Error(`GetTriggers: sql split BEGIN does not return 2 values`))}a=s[0].trim();u="BEGIN"+s[1]}else{u=s[1].trim()}const f={};f.name=i;f.logic=u;if(a.length>0)f.condition=a;f.timeevent=o;e.push(f)}else{return Promise.reject(new Error(`GetTriggers: Table ${r} doesn't match`))}}else{return Promise.reject(new Error(`GetTriggers: Table ${r} creating indexes`))}}}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetTriggers: ${t.message}`))}};const He=async(t,r,e)=>{const n=[];let i={};let s=0;let o=[];let a="";try{const u=await Ze(t,r);if(Object.keys(u).includes("syncDate")){s=u.syncDate}if(Object.keys(u).includes("modTables")){i=u.modTables;o=Object.keys(i)}for(const u of r){let r="";let f="";if(u.name){r=u.name}else{a="GetTablesFull: no name";break}if(u.sql){f=u.sql}else{a="GetTablesFull: no sql";break}if(o.length==0||o.indexOf(r)===-1||i[r]=="No"){continue}const c={};let h=[];let l=[];let v=[];c.name=u;if(i[c.name]==="Create"){h=await Ge(f);if(h.length>0){await Jr(h)}l=await We(t,r);if(l.length>0){await Vr(l)}v=await ze(t,r);if(v.length>0){await Qr(v)}}let d=`Partial: Table ${r} schema export completed ...`;e.emit({progress:d});let w="";if(i[r]==="Create"){w=`SELECT * FROM ${r};`}else{w=`SELECT * FROM ${r} `+`WHERE last_modified > ${s};`}const m=await Xr(t,w,r);c.name=r;if(h.length>0){c.schema=h}if(l.length>0){c.indexes=l}if(v.length>0){c.triggers=v}if(m.length>0){c.values=m}if(Object.keys(c).length<=1){a=`GetTablesPartial: table ${r} is not a jsonTable`;break}d=`Partial: Table ${r} table data export completed ...`;e.emit({progress:d});n.push(c)}if(a.length>0){return Promise.reject(new Error(a))}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`GetTablesPartial: ${t.message}`))}};const Ze=async(t,r)=>{const e={};try{const n=await Qe(t);if(n<=0){return Promise.reject(new Error(`GetPartialModeData: no syncDate`))}const i=await Ve(t,r,n);if(i.length<=0){return Promise.reject(new Error(`GetPartialModeData: no modTables`))}e.syncDate=n;e.modTables=i;return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetPartialModeData: ${t.message}`))}};const Je=async t=>{let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='table' AND name NOT LIKE 'sync_table' ";r+="AND name NOT LIKE '_temp_%' ";r+="AND name NOT LIKE 'sqlite_%';";try{const e=await fe(t,r,[]);return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`getTablesNamesSQL: ${t.message}`))}};const Ve=async(t,r,e)=>{let n="";try{const i={};for(const s of r){let r;let o="SELECT count(*) AS tcount  ";o+=`FROM ${s.name};`;let a=await fe(t,o,[]);if(a.length!=1){n="GetTableModified: total "+"count not returned";break}const u=a[0]["tcount"];o="SELECT count(*) AS mcount FROM ";o+=`${s.name} WHERE last_modified > `;o+=`${e};`;a=await fe(t,o,[]);if(a.length!=1)break;const f=a[0]["mcount"];if(f===0){r="No"}else if(u===f){r="Create"}else{r="Modified"}const c=s.name;i[c]=r}if(n.length>0){return Promise.reject(new Error(n))}return Promise.resolve(i)}catch(t){return Promise.reject(new Error(`GetTableModified: ${t.message}`))}};const Qe=async t=>{try{const r=`SELECT sync_date FROM sync_table WHERE id = 1;`;const e=await fe(t,r,[]);return Promise.resolve(e[0]["sync_date"])}catch(t){const r=`GetSynchroDate: ${t.message}`;return Promise.reject(new Error(r))}};const Ke=async t=>{try{const r=`SELECT sync_date FROM sync_table WHERE id = 2;`;const e=await fe(t,r,[]);if(e.length===0){return Promise.resolve(-1)}else{return Promise.resolve(e[0]["sync_date"])}}catch(t){const r=`getLastExport: ${t.message}`;return Promise.reject(new Error(r))}};const Xe=async(t,r)=>{try{const e=await be(t,"sync_table");if(!e){return Promise.reject(new Error("setLastExportDate: No sync_table available"))}const n=Math.round(new Date(r).getTime()/1e3);let i="";if(await Ke(t)>0){i=`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`}else{i=`INSERT INTO sync_table (sync_date) VALUES (${n});`}const s=await ae(t,i,false);if(s<0){return{result:false,message:"setLastExportDate failed"}}else{return{result:true}}}catch(t){return{result:false,message:`setLastExportDate failed: ${t.message}`}}};const Ye=async t=>{let r;try{const e=await be(t,"sync_table");if(!e){return Promise.reject(new Error("DelExportedRows: No sync_table available"))}r=await Ke(t);if(r<0){return Promise.reject(new Error("DelExportedRows: no last exported date available"))}const n=await ye(t);if(n.length===0){return Promise.reject(new Error("DelExportedRows: No table's names returned"))}for(const e of n){let n=-1;const i=`DELETE FROM ${e}\n            WHERE sql_deleted = 1 AND last_modified < ${r};`;n=await ce(t,i,[],true);if(n<0){return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}}catch(t){return Promise.reject(new Error(`DelExportedRows failed: ${t.message}`))}};const tn=async t=>{const r=rn(t,"(");const e=rn(t,")");if(r.length!=e.length){return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'")}if(r.length===0){return Promise.resolve(t)}let n=t.substring(0,r[0]-1);for(let i=0;i<r.length;i++){let s;if(i<r.length-1){if(r[i+1]<e[i]){s=t.substring(r[i]-1,e[i+1]);i++}else{s=t.substring(r[i]-1,e[i])}}else{s=t.substring(r[i]-1,e[i])}const o=s.replace(/,/g,"");n+=o;if(i<r.length-1){n+=t.substring(e[i],r[i+1]-1)}}n+=t.substring(e[e.length-1],t.length);return Promise.resolve(n)};const rn=(t,r)=>{let e=[...t];r=r.toLowerCase();return e.reduce(((t,e,n)=>e.toLowerCase()===r?[...t,n]:t),[])};const en=async(t,r,e,n,i,s)=>{let o=-1;const a=r[n];if(a!=null){const r=Object.keys(a);if(!r.includes("toVersion")){return Promise.reject(new Error("onUpgrade: toVersion not given"))}const u=a.toVersion;if(!r.includes("statement")){return Promise.reject(new Error("onUpgrade: statement not given"))}const f=a.statement;let c=[];if(r.includes("set")){c=a.set}if(i<u){let t="Error: version mistmatch ";t+="Upgrade Statement would upgrade to ";t+=`version ${u} , but target version `;t+=`is ${i} for database ${e}`;t+=` and version ${n}`;return Promise.reject(new Error(`onUpgrade: ${t}`))}try{await ie(t,false);await xr(e,`backup-${e}`,s);const r=await ee(t);if(f.length>0){await nn(t,f);await jr(t,e,s);if(c.length>0){await sn(t,c,u);await jr(t,e,s)}}await ie(t,true);o=await ee(t)-r;await jr(t,e,s);return Promise.resolve(o)}catch(t){return Promise.reject(new Error(`onUpgrade: ${t.message}`))}}else{return Promise.reject(new Error("onUpgrade: upgrade not found"))}};const nn=async(t,r)=>{let e={};let n={};try{e=await Pe(t);await Br(t,"index");await Br(t,"trigger");const i=await ae(t,r,false);if(i<0){return Promise.reject(new Error("ExecuteStatementProcess: "+"changes < 0"))}n=await $e(t,e);if(Object.keys(n).length>0){await Ae(t,n)}return Promise.resolve()}catch(t){return Promise.reject(new Error(`ExecuteStatementProcess: ${t.message}`))}finally{await Fr(t,e);e={};n={}}};const sn=async(t,r,e)=>{try{const n=await ue(t,r,false);if(n<0){return Promise.reject(new Error("ExecuteSetProcess: lastId "+"< 0"))}await oe(t,e);const i=await be(t,"sync_table");if(i){const r=Math.round((new Date).getTime()/1e3);let e="UPDATE sync_table SET ";e+=`sync_date = ${r} WHERE id = 1;`;const n=await ae(t,e,false);if(n<0){return Promise.reject(new Error("ExecuteSetProcess: changes "+"< 0"))}}return Promise.resolve()}catch(t){return Promise.reject(new Error(`ExecuteSetProcess: ${t.message}`))}};class on{constructor(t,r,e,n,i){this.vUpgDict={};this.autoSave=false;this.dbName=t;this.store=n;this.version=r;this.mDb=null;this.vUpgDict=e;this._isDBOpen=false;this.autoSave=i}async open(){try{const t=await Or({locateFile:t=>`assets/${t}`});const r=await _r(this.dbName,this.store);if(r!=null){this.mDb=new t.Database(r)}else{this.mDb=new t.Database;await Dr(this.dbName,this.store)}let e=await se(this.mDb);if(e===0){await oe(this.mDb,1);e=await se(this.mDb)}this._isDBOpen=true;if(this.version>e&&Object.keys(this.vUpgDict).length>0){const t=Object.keys(this.vUpgDict);if(t.length>0){try{const t=await en(this.mDb,this.vUpgDict,this.dbName,e,this.version,this.store);if(t===-1){try{await Mr(this.dbName,"backup",this.store)}catch(t){return Promise.reject(new Error(`Open: ${t.message}`))}}await Rr(`backup-${this.dbName}`,this.store)}catch(t){try{await Mr(this.dbName,"backup",this.store)}catch(t){return Promise.reject(new Error(`Open: ${t.message}`))}}}else{try{await oe(this.mDb,this.version)}catch(t){return Promise.reject(new Error(`SetVersion: ${this.version} ${t.message}`))}}}if(this.autoSave){try{await jr(this.mDb,this.dbName,this.store)}catch(t){this._isDBOpen=false;return Promise.reject(`in close ${t}`)}}return Promise.resolve()}catch(t){this._isDBOpen=false;return Promise.reject(`in open ${t}`)}}isDBOpen(){return this._isDBOpen}async close(){if(this.mDb!=null&&this._isDBOpen){try{await jr(this.mDb,this.dbName,this.store);this.mDb.close();this._isDBOpen=false}catch(t){this._isDBOpen=false;return Promise.reject(`in close ${t}`)}}return Promise.resolve()}async saveToStore(){if(this.mDb!=null&&this._isDBOpen){try{await jr(this.mDb,this.dbName,this.store)}catch(t){return Promise.reject(`in saveToStore ${t}`)}}return Promise.resolve()}async getVersion(){if(this.mDb!=null&&this._isDBOpen){try{const t=await se(this.mDb);return Promise.resolve(t)}catch(t){this._isDBOpen=false;return Promise.reject(`in getVersion ${t}`)}}}async isDBExists(t){try{const r=await Ir(t,this.store);return Promise.resolve(r)}catch(t){return Promise.reject(`in isDBExists ${t}`)}}async deleteDB(t){try{const r=await this.isDBExists(t);if(r&&!this._isDBOpen){await this.open()}await this.close();if(r){await Rr(t,this.store)}return Promise.resolve()}catch(t){return Promise.reject(new Error(`DeleteDB: ${t.message}`))}}async executeSQL(t,r=true){if(!this._isDBOpen){let t=`ExecuteSQL: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{if(r)await Yr(this.mDb,this._isDBOpen);const e=await ae(this.mDb,t,false);if(e<0){return Promise.reject(new Error("ExecuteSQL: changes < 0"))}if(r)await re(this.mDb,this._isDBOpen);if(this.autoSave){try{await jr(this.mDb,this.dbName,this.store)}catch(t){this._isDBOpen=false;return Promise.reject(`in close ${t}`)}}return Promise.resolve(e)}catch(t){let e=`ExecuteSQL: ${t.message}`;try{if(r)await te(this.mDb,this._isDBOpen)}catch(t){e+=` : ${t.message}`}return Promise.reject(new Error(`ExecuteSQL: ${e}`))}}async execSet(t,r=true){if(!this._isDBOpen){let t=`ExecSet: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}const e={changes:-1,lastId:-1};let n=-1;try{n=await ee(this.mDb);if(r)await Yr(this.mDb,this._isDBOpen);const i=await ue(this.mDb,t,false);if(i<0){return Promise.reject(new Error("ExecSet: changes < 0"))}if(r)await re(this.mDb,this._isDBOpen);const s=await ee(this.mDb)-n;e.changes=s;e.lastId=i;if(this.autoSave){try{await jr(this.mDb,this.dbName,this.store)}catch(t){this._isDBOpen=false;return Promise.reject(`in close ${t}`)}}return Promise.resolve(e)}catch(t){let e=`ExecSet: ${t.message}`;try{if(r)await te(this.mDb,this._isDBOpen)}catch(t){e+=` : ${t.message}`}return Promise.reject(new Error(`ExecSet: ${e}`))}}async selectSQL(t,r){if(!this._isDBOpen){let t=`SelectSQL: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{let e=await fe(this.mDb,t,r);return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`SelectSQL: ${t.message}`))}}async runSQL(t,r,e=true){if(!this._isDBOpen){let t=`RunSQL: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}const n={changes:-1,lastId:-1};let i=-1;try{i=await ee(this.mDb);if(e)await Yr(this.mDb,this._isDBOpen);const s=await ce(this.mDb,t,r,false);if(s<0){return Promise.reject(new Error("RunSQL: lastId < 0"))}if(e)await re(this.mDb,this._isDBOpen);const o=await ee(this.mDb)-i;n.changes=o;n.lastId=s;if(this.autoSave){try{await jr(this.mDb,this.dbName,this.store)}catch(t){this._isDBOpen=false;return Promise.reject(`in close ${t}`)}}return Promise.resolve(n)}catch(t){let r=`RunSQL: ${t.message}`;try{if(e)await te(this.mDb,this._isDBOpen)}catch(t){r+=` : ${t.message}`}return Promise.reject(new Error(`RunSQL: ${r}`))}}async getTableNames(){if(!this._isDBOpen){let t=`GetTableNames: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{let t=await ye(this.mDb);return Promise.resolve(t)}catch(t){return Promise.reject(new Error(`GetTableNames: ${t.message}`))}}async isTable(t){if(!this._isDBOpen){let t=`isTable: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{const r=await be(this.mDb,t);return Promise.resolve(r)}catch(t){const r=`IsTable: ${t.message}`;return Promise.reject(new Error(r))}}async createSyncTable(){if(!this._isDBOpen){let t=`createSyncTable: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}let t=-1;try{const r=await be(this.mDb,"sync_table");if(!r){const r=await pe(this.mDb,this._isDBOpen);const e=await Ee(this.mDb,this._isDBOpen);if(r&&e){const r=Math.round((new Date).getTime()/1e3);let e=`\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );`;e+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${r}");`;t=await ae(this.mDb,e,false);return Promise.resolve(t)}else{return Promise.reject(new Error("No last_modified column in tables"))}}else{return Promise.resolve(0)}}catch(t){const r=`CreateSyncTable: ${t.message}`;return Promise.reject(new Error(r))}}async getSyncDate(){if(!this._isDBOpen){let t=`getSyncDate: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{const t=await be(this.mDb,"sync_table");if(!t){return Promise.reject(new Error("No sync_table available"))}const r=await Qe(this.mDb);return Promise.resolve(r)}catch(t){const r=`getSyncDate: ${t.message}`;return Promise.reject(new Error(r))}}async setSyncDate(t){if(!this._isDBOpen){let t=`SetSyncDate: Database ${this.dbName} `;t+=`not opened`;return{result:false,message:t}}try{const r=await be(this.mDb,"sync_table");if(!r){return Promise.reject(new Error("No sync_table available"))}const e=Math.round(new Date(t).getTime()/1e3);let n=`UPDATE sync_table SET sync_date = `;n+=`${e} WHERE id = 1;`;const i=await ae(this.mDb,n,false);if(i<0){return{result:false,message:"setSyncDate failed"}}else{return{result:true}}}catch(t){return{result:false,message:`setSyncDate failed: ${t.message}`}}}async importJson(t,r){let e=0;if(this._isDBOpen){try{await ie(this.mDb,false);if(t.tables&&t.tables.length>0){e=await Oe(this.mDb,t);let n=`Schema creation completed changes: ${e}`;r.emit({progress:n});if(e!=-1){e+=await je(this.mDb,t,r);let n=`Tables data creation completed changes: ${e}`;r.emit({progress:n})}}if(t.views&&t.views.length>0){e+=await Be(this.mDb,t)}await ie(this.mDb,true);if(this.autoSave){try{await jr(this.mDb,this.dbName,this.store)}catch(t){this._isDBOpen=false;return Promise.reject(`in close ${t}`)}}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`ImportJson: ${t.message}`))}}else{return Promise.reject(new Error(`ImportJson: database is closed`))}}async exportJson(t,r){const e={};e.database=this.dbName.slice(0,-9);e.version=this.version;e.encrypted=false;e.mode=t;if(this._isDBOpen){try{await Xe(this.mDb,(new Date).toISOString());const t=await Ue(this.mDb,e,r);const n=Object.keys(t);if(n.length===0){const t=`ExportJson: return Object is empty `+`No data to synchronize`;return Promise.reject(new Error(t))}const i=qr(t);if(i){return Promise.resolve(t)}else{return Promise.reject(new Error(`ExportJson: retJson not valid`))}}catch(t){return Promise.reject(new Error(`ExportJson: ${t.message}`))}}else{return Promise.reject(new Error(`ExportJson: database is closed`))}}async deleteExportedRows(){if(this._isDBOpen){try{await Ye(this.mDb);return Promise.resolve()}catch(t){return Promise.reject(new Error(`deleteExportedRows: ${t.message}`))}}else{return Promise.reject(new Error(`deleteExportedRows: database is closed`))}}}var an=ir((function(t,r){
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(r){{t.exports=r()}})((function(){return function t(r,e,n){function i(o,a){if(!e[o]){if(!r[o]){var u=typeof or=="function"&&or;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[o]={exports:{}};r[o][0].call(c.exports,(function(t){var e=r[o][1][t];return i(e?e:t)}),c,c.exports,t,r,e,n)}return e[o].exports}var s=typeof or=="function"&&or;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,r,e){(function(t){var e=t.MutationObserver||t.WebKitMutationObserver;var n;{if(e){var i=0;var s=new e(c);var o=t.document.createTextNode("");s.observe(o,{characterData:true});n=function(){o.data=i=++i%2}}else if(!t.setImmediate&&typeof t.MessageChannel!=="undefined"){var a=new t.MessageChannel;a.port1.onmessage=c;n=function(){a.port2.postMessage(0)}}else if("document"in t&&"onreadystatechange"in t.document.createElement("script")){n=function(){var r=t.document.createElement("script");r.onreadystatechange=function(){c();r.onreadystatechange=null;r.parentNode.removeChild(r);r=null};t.document.documentElement.appendChild(r)}}else{n=function(){setTimeout(c,0)}}}var u;var f=[];function c(){u=true;var t,r;var e=f.length;while(e){r=f;f=[];t=-1;while(++t<e){r[t]()}e=f.length}u=false}r.exports=h;function h(t){if(f.push(t)===1&&!u){n()}}}).call(this,typeof nr!=="undefined"?nr:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(t,r,e){var n=t(1);function i(){}var s={};var o=["REJECTED"];var a=["FULFILLED"];var u=["PENDING"];r.exports=f;function f(t){if(typeof t!=="function"){throw new TypeError("resolver must be a function")}this.state=u;this.queue=[];this.outcome=void 0;if(t!==i){v(this,t)}}f.prototype["catch"]=function(t){return this.then(null,t)};f.prototype.then=function(t,r){if(typeof t!=="function"&&this.state===a||typeof r!=="function"&&this.state===o){return this}var e=new this.constructor(i);if(this.state!==u){var n=this.state===a?t:r;h(e,n,this.outcome)}else{this.queue.push(new c(e,t,r))}return e};function c(t,r,e){this.promise=t;if(typeof r==="function"){this.onFulfilled=r;this.callFulfilled=this.otherCallFulfilled}if(typeof e==="function"){this.onRejected=e;this.callRejected=this.otherCallRejected}}c.prototype.callFulfilled=function(t){s.resolve(this.promise,t)};c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)};c.prototype.callRejected=function(t){s.reject(this.promise,t)};c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)};function h(t,r,e){n((function(){var n;try{n=r(e)}catch(r){return s.reject(t,r)}if(n===t){s.reject(t,new TypeError("Cannot resolve promise with itself"))}else{s.resolve(t,n)}}))}s.resolve=function(t,r){var e=d(l,r);if(e.status==="error"){return s.reject(t,e.value)}var n=e.value;if(n){v(t,n)}else{t.state=a;t.outcome=r;var i=-1;var o=t.queue.length;while(++i<o){t.queue[i].callFulfilled(r)}}return t};s.reject=function(t,r){t.state=o;t.outcome=r;var e=-1;var n=t.queue.length;while(++e<n){t.queue[e].callRejected(r)}return t};function l(t){var r=t&&t.then;if(t&&(typeof t==="object"||typeof t==="function")&&typeof r==="function"){return function e(){r.apply(t,arguments)}}}function v(t,r){var e=false;function n(r){if(e){return}e=true;s.reject(t,r)}function i(r){if(e){return}e=true;s.resolve(t,r)}function o(){r(i,n)}var a=d(o);if(a.status==="error"){n(a.value)}}function d(t,r){var e={};try{e.value=t(r);e.status="success"}catch(t){e.status="error";e.value=t}return e}f.resolve=w;function w(t){if(t instanceof this){return t}return s.resolve(new this(i),t)}f.reject=m;function m(t){var r=new this(i);return s.reject(r,t)}f.all=y;function y(t){var r=this;if(Object.prototype.toString.call(t)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var e=t.length;var n=false;if(!e){return this.resolve([])}var o=new Array(e);var a=0;var u=-1;var f=new this(i);while(++u<e){c(t[u],u)}return f;function c(t,i){r.resolve(t).then(u,(function(t){if(!n){n=true;s.reject(f,t)}}));function u(t){o[i]=t;if(++a===e&&!n){n=true;s.resolve(f,o)}}}}f.race=b;function b(t){var r=this;if(Object.prototype.toString.call(t)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var e=t.length;var n=false;if(!e){return this.resolve([])}var o=-1;var a=new this(i);while(++o<e){u(t[o])}return a;function u(t){r.resolve(t).then((function(t){if(!n){n=true;s.resolve(a,t)}}),(function(t){if(!n){n=true;s.reject(a,t)}}))}}},{1:1}],3:[function(t,r,e){(function(r){if(typeof r.Promise!=="function"){r.Promise=t(2)}}).call(this,typeof nr!=="undefined"?nr:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{2:2}],4:[function(t,r,e){var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}}function s(){try{if(typeof indexedDB!=="undefined"){return indexedDB}if(typeof webkitIndexedDB!=="undefined"){return webkitIndexedDB}if(typeof mozIndexedDB!=="undefined"){return mozIndexedDB}if(typeof OIndexedDB!=="undefined"){return OIndexedDB}if(typeof msIndexedDB!=="undefined"){return msIndexedDB}}catch(t){return}}var o=s();function a(){try{if(!o||!o.open){return false}var t=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);var r=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||r)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(t){return false}}function u(t,r){t=t||[];r=r||{};try{return new Blob(t,r)}catch(s){if(s.name!=="TypeError"){throw s}var e=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder;var n=new e;for(var i=0;i<t.length;i+=1){n.append(t[i])}return n.getBlob(r.type)}}if(typeof Promise==="undefined"){t(3)}var f=Promise;function c(t,r){if(r){t.then((function(t){r(null,t)}),(function(t){r(t)}))}}function h(t,r,e){if(typeof r==="function"){t.then(r)}if(typeof e==="function"){t["catch"](e)}}function l(t){if(typeof t!=="string"){console.warn(t+" used as a key, but it is not a string.");t=String(t)}return t}function v(){if(arguments.length&&typeof arguments[arguments.length-1]==="function"){return arguments[arguments.length-1]}}var d="local-forage-detect-blob-support";var w=void 0;var m={};var y=Object.prototype.toString;var b="readonly";var p="readwrite";function E(t){var r=t.length;var e=new ArrayBuffer(r);var n=new Uint8Array(e);for(var i=0;i<r;i++){n[i]=t.charCodeAt(i)}return e}function g(t){return new f((function(r){var e=t.transaction(d,p);var n=u([""]);e.objectStore(d).put(n,"key");e.onabort=function(t){t.preventDefault();t.stopPropagation();r(false)};e.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/);var e=navigator.userAgent.match(/Edge\//);r(e||!t||parseInt(t[1],10)>=43)}}))["catch"]((function(){return false}))}function P(t){if(typeof w==="boolean"){return f.resolve(w)}return g(t).then((function(t){w=t;return w}))}function S(t){var r=m[t.name];var e={};e.promise=new f((function(t,r){e.resolve=t;e.reject=r}));r.deferredOperations.push(e);if(!r.dbReady){r.dbReady=e.promise}else{r.dbReady=r.dbReady.then((function(){return e.promise}))}}function T(t){var r=m[t.name];var e=r.deferredOperations.pop();if(e){e.resolve();return e.promise}}function $(t,r){var e=m[t.name];var n=e.deferredOperations.pop();if(n){n.reject(r);return n.promise}}function k(t,r){return new f((function(e,n){m[t.name]=m[t.name]||x();if(t.db){if(r){S(t);t.db.close()}else{return e(t.db)}}var i=[t.name];if(r){i.push(t.version)}var s=o.open.apply(o,i);if(r){s.onupgradeneeded=function(r){var e=s.result;try{e.createObjectStore(t.storeName);if(r.oldVersion<=1){e.createObjectStore(d)}}catch(e){if(e.name==="ConstraintError"){console.warn('The database "'+t.name+'"'+" has been upgraded from version "+r.oldVersion+" to version "+r.newVersion+', but the storage "'+t.storeName+'" already exists.')}else{throw e}}}}s.onerror=function(t){t.preventDefault();n(s.error)};s.onsuccess=function(){var r=s.result;r.onversionchange=function(t){t.target.close()};e(r);T(t)}}))}function A(t){return k(t,false)}function O(t){return k(t,true)}function _(t,r){if(!t.db){return true}var e=!t.db.objectStoreNames.contains(t.storeName);var n=t.version<t.db.version;var i=t.version>t.db.version;if(n){if(t.version!==r){console.warn('The database "'+t.name+'"'+" can't be downgraded from version "+t.db.version+" to version "+t.version+".")}t.version=t.db.version}if(i||e){if(e){var s=t.db.version+1;if(s>t.version){t.version=s}}return true}return false}function D(t){return new f((function(r,e){var n=new FileReader;n.onerror=e;n.onloadend=function(e){var n=btoa(e.target.result||"");r({__local_forage_encoded_blob:true,data:n,type:t.type})};n.readAsBinaryString(t)}))}function j(t){var r=E(atob(t.data));return u([r],{type:t.type})}function N(t){return t&&t.__local_forage_encoded_blob}function R(t){var r=this;var e=r._initReady().then((function(){var t=m[r._dbInfo.name];if(t&&t.dbReady){return t.dbReady}}));h(e,t,t);return e}function I(t){S(t);var r=m[t.name];var e=r.forages;for(var n=0;n<e.length;n++){var i=e[n];if(i._dbInfo.db){i._dbInfo.db.close();i._dbInfo.db=null}}t.db=null;return A(t).then((function(r){t.db=r;if(_(t)){return O(t)}return r})).then((function(n){t.db=r.db=n;for(var i=0;i<e.length;i++){e[i]._dbInfo.db=n}}))["catch"]((function(r){$(t,r);throw r}))}function M(t,r,e,n){if(n===undefined){n=1}try{var i=t.db.transaction(t.storeName,r);e(null,i)}catch(i){if(n>0&&(!t.db||i.name==="InvalidStateError"||i.name==="NotFoundError")){return f.resolve().then((function(){if(!t.db||i.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version){if(t.db){t.version=t.db.version+1}return O(t)}})).then((function(){return I(t).then((function(){M(t,r,e,n-1)}))}))["catch"](e)}e(i)}}function x(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function C(t){var r=this;var e={db:null};if(t){for(var n in t){e[n]=t[n]}}var i=m[e.name];if(!i){i=x();m[e.name]=i}i.forages.push(r);if(!r._initReady){r._initReady=r.ready;r.ready=R}var s=[];function o(){return f.resolve()}for(var a=0;a<i.forages.length;a++){var u=i.forages[a];if(u!==r){s.push(u._initReady()["catch"](o))}}var c=i.forages.slice(0);return f.all(s).then((function(){e.db=i.db;return A(e)})).then((function(t){e.db=t;if(_(e,r._defaultConfig.version)){return O(e)}return t})).then((function(t){e.db=i.db=t;r._dbInfo=e;for(var n=0;n<c.length;n++){var s=c[n];if(s!==r){s._dbInfo.db=e.db;s._dbInfo.version=e.version}}}))}function L(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){M(e._dbInfo,b,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=o.get(t);a.onsuccess=function(){var t=a.result;if(t===undefined){t=null}if(N(t)){t=j(t)}r(t)};a.onerror=function(){n(a.error)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function B(t,r){var e=this;var n=new f((function(r,n){e.ready().then((function(){M(e._dbInfo,b,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=o.openCursor();var u=1;a.onsuccess=function(){var e=a.result;if(e){var n=e.value;if(N(n)){n=j(n)}var i=t(n,e.key,u++);if(i!==void 0){r(i)}else{e["continue"]()}}else{r()}};a.onerror=function(){n(a.error)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function U(t,r,e){var n=this;t=l(t);var i=new f((function(e,i){var s;n.ready().then((function(){s=n._dbInfo;if(y.call(r)==="[object Blob]"){return P(s.db).then((function(t){if(t){return r}return D(r)}))}return r})).then((function(r){M(n._dbInfo,p,(function(s,o){if(s){return i(s)}try{var a=o.objectStore(n._dbInfo.storeName);if(r===null){r=undefined}var u=a.put(r,t);o.oncomplete=function(){if(r===undefined){r=null}e(r)};o.onabort=o.onerror=function(){var t=u.error?u.error:u.transaction.error;i(t)}}catch(t){i(t)}}))}))["catch"](i)}));c(i,e);return i}function F(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){M(e._dbInfo,p,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=o["delete"](t);s.oncomplete=function(){r()};s.onerror=function(){n(a.error)};s.onabort=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function q(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){M(r._dbInfo,p,(function(n,i){if(n){return e(n)}try{var s=i.objectStore(r._dbInfo.storeName);var o=s.clear();i.oncomplete=function(){t()};i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;e(t)}}catch(t){e(t)}}))}))["catch"](e)}));c(e,t);return e}function G(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){M(r._dbInfo,b,(function(n,i){if(n){return e(n)}try{var s=i.objectStore(r._dbInfo.storeName);var o=s.count();o.onsuccess=function(){t(o.result)};o.onerror=function(){e(o.error)}}catch(t){e(t)}}))}))["catch"](e)}));c(e,t);return e}function W(t,r){var e=this;var n=new f((function(r,n){if(t<0){r(null);return}e.ready().then((function(){M(e._dbInfo,b,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=false;var u=o.openKeyCursor();u.onsuccess=function(){var e=u.result;if(!e){r(null);return}if(t===0){r(e.key)}else{if(!a){a=true;e.advance(t)}else{r(e.key)}}};u.onerror=function(){n(u.error)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function z(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){M(r._dbInfo,b,(function(n,i){if(n){return e(n)}try{var s=i.objectStore(r._dbInfo.storeName);var o=s.openKeyCursor();var a=[];o.onsuccess=function(){var r=o.result;if(!r){t(a);return}a.push(r.key);r["continue"]()};o.onerror=function(){e(o.error)}}catch(t){e(t)}}))}))["catch"](e)}));c(e,t);return e}function H(t,r){r=v.apply(this,arguments);var e=this.config();t=typeof t!=="function"&&t||{};if(!t.name){t.name=t.name||e.name;t.storeName=t.storeName||e.storeName}var n=this;var i;if(!t.name){i=f.reject("Invalid arguments")}else{var s=t.name===e.name&&n._dbInfo.db;var a=s?f.resolve(n._dbInfo.db):A(t).then((function(r){var e=m[t.name];var n=e.forages;e.db=r;for(var i=0;i<n.length;i++){n[i]._dbInfo.db=r}return r}));if(!t.storeName){i=a.then((function(r){S(t);var e=m[t.name];var n=e.forages;r.close();for(var i=0;i<n.length;i++){var s=n[i];s._dbInfo.db=null}var a=new f((function(r,e){var n=o.deleteDatabase(t.name);n.onerror=function(){var t=n.result;if(t){t.close()}e(n.error)};n.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')};n.onsuccess=function(){var t=n.result;if(t){t.close()}r(t)}}));return a.then((function(t){e.db=t;for(var r=0;r<n.length;r++){var i=n[r];T(i._dbInfo)}}))["catch"]((function(r){($(t,r)||f.resolve())["catch"]((function(){}));throw r}))}))}else{i=a.then((function(r){if(!r.objectStoreNames.contains(t.storeName)){return}var e=r.version+1;S(t);var n=m[t.name];var i=n.forages;r.close();for(var s=0;s<i.length;s++){var a=i[s];a._dbInfo.db=null;a._dbInfo.version=e}var u=new f((function(r,n){var i=o.open(t.name,e);i.onerror=function(t){var r=i.result;r.close();n(t)};i.onupgradeneeded=function(){var r=i.result;r.deleteObjectStore(t.storeName)};i.onsuccess=function(){var t=i.result;t.close();r(t)}}));return u.then((function(t){n.db=t;for(var r=0;r<i.length;r++){var e=i[r];e._dbInfo.db=t;T(e._dbInfo)}}))["catch"]((function(r){($(t,r)||f.resolve())["catch"]((function(){}));throw r}))}))}}c(i,r);return i}var Z={_driver:"asyncStorage",_initStorage:C,_support:a(),iterate:B,getItem:L,setItem:U,removeItem:F,clear:q,length:G,key:W,keys:z,dropInstance:H};function J(){return typeof openDatabase==="function"}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var Q="~~local_forage_type~";var K=/^~~local_forage_type~([^~]+)~/;var X="__lfsc__:";var Y=X.length;var tt="arbf";var rt="blob";var et="si08";var nt="ui08";var it="uic8";var st="si16";var ot="si32";var at="ur16";var ut="ui32";var ft="fl32";var ct="fl64";var ht=Y+tt.length;var lt=Object.prototype.toString;function vt(t){var r=t.length*.75;var e=t.length;var n;var i=0;var s,o,a,u;if(t[t.length-1]==="="){r--;if(t[t.length-2]==="="){r--}}var f=new ArrayBuffer(r);var c=new Uint8Array(f);for(n=0;n<e;n+=4){s=V.indexOf(t[n]);o=V.indexOf(t[n+1]);a=V.indexOf(t[n+2]);u=V.indexOf(t[n+3]);c[i++]=s<<2|o>>4;c[i++]=(o&15)<<4|a>>2;c[i++]=(a&3)<<6|u&63}return f}function dt(t){var r=new Uint8Array(t);var e="";var n;for(n=0;n<r.length;n+=3){e+=V[r[n]>>2];e+=V[(r[n]&3)<<4|r[n+1]>>4];e+=V[(r[n+1]&15)<<2|r[n+2]>>6];e+=V[r[n+2]&63]}if(r.length%3===2){e=e.substring(0,e.length-1)+"="}else if(r.length%3===1){e=e.substring(0,e.length-2)+"=="}return e}function wt(t,r){var e="";if(t){e=lt.call(t)}if(t&&(e==="[object ArrayBuffer]"||t.buffer&&lt.call(t.buffer)==="[object ArrayBuffer]")){var n;var i=X;if(t instanceof ArrayBuffer){n=t;i+=tt}else{n=t.buffer;if(e==="[object Int8Array]"){i+=et}else if(e==="[object Uint8Array]"){i+=nt}else if(e==="[object Uint8ClampedArray]"){i+=it}else if(e==="[object Int16Array]"){i+=st}else if(e==="[object Uint16Array]"){i+=at}else if(e==="[object Int32Array]"){i+=ot}else if(e==="[object Uint32Array]"){i+=ut}else if(e==="[object Float32Array]"){i+=ft}else if(e==="[object Float64Array]"){i+=ct}else{r(new Error("Failed to get type for BinaryArray"))}}r(i+dt(n))}else if(e==="[object Blob]"){var s=new FileReader;s.onload=function(){var e=Q+t.type+"~"+dt(this.result);r(X+rt+e)};s.readAsArrayBuffer(t)}else{try{r(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t);r(null,e)}}}function mt(t){if(t.substring(0,Y)!==X){return JSON.parse(t)}var r=t.substring(ht);var e=t.substring(Y,ht);var n;if(e===rt&&K.test(r)){var i=r.match(K);n=i[1];r=r.substring(i[0].length)}var s=vt(r);switch(e){case tt:return s;case rt:return u([s],{type:n});case et:return new Int8Array(s);case nt:return new Uint8Array(s);case it:return new Uint8ClampedArray(s);case st:return new Int16Array(s);case at:return new Uint16Array(s);case ot:return new Int32Array(s);case ut:return new Uint32Array(s);case ft:return new Float32Array(s);case ct:return new Float64Array(s);default:throw new Error("Unkown type: "+e)}}var yt={serialize:wt,deserialize:mt,stringToBuffer:vt,bufferToString:dt};function bt(t,r,e,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" "+"(id INTEGER PRIMARY KEY, key unique, value)",[],e,n)}function pt(t){var r=this;var e={db:null};if(t){for(var n in t){e[n]=typeof t[n]!=="string"?t[n].toString():t[n]}}var i=new f((function(t,n){try{e.db=openDatabase(e.name,String(e.version),e.description,e.size)}catch(t){return n(t)}e.db.transaction((function(i){bt(i,e,(function(){r._dbInfo=e;t()}),(function(t,r){n(r)}))}),n)}));e.serializer=yt;return i}function Et(t,r,e,n,i,s){t.executeSql(e,n,i,(function(t,o){if(o.code===o.SYNTAX_ERR){t.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name = ?",[r.storeName],(function(t,a){if(!a.rows.length){bt(t,r,(function(){t.executeSql(e,n,i,s)}),s)}else{s(t,o)}}),s)}else{s(t,o)}}),s)}function gt(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,e){var n=e.rows.length?e.rows.item(0).value:null;if(n){n=i.serializer.deserialize(n)}r(n)}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function Pt(t,r){var e=this;var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"SELECT * FROM "+i.storeName,[],(function(e,n){var s=n.rows;var o=s.length;for(var a=0;a<o;a++){var u=s.item(a);var f=u.value;if(f){f=i.serializer.deserialize(f)}f=t(f,u.key,a+1);if(f!==void 0){r(f);return}}r()}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function St(t,r,e,n){var i=this;t=l(t);var s=new f((function(s,o){i.ready().then((function(){if(r===undefined){r=null}var a=r;var u=i._dbInfo;u.serializer.serialize(r,(function(r,f){if(f){o(f)}else{u.db.transaction((function(e){Et(e,u,"INSERT OR REPLACE INTO "+u.storeName+" "+"(key, value) VALUES (?, ?)",[t,r],(function(){s(a)}),(function(t,r){o(r)}))}),(function(r){if(r.code===r.QUOTA_ERR){if(n>0){s(St.apply(i,[t,a,e,n-1]));return}o(r)}}))}}))}))["catch"](o)}));c(s,e);return s}function Tt(t,r,e){return St.apply(this,[t,r,e,1])}function $t(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){r()}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function kt(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Et(r,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,r){e(r)}))}))}))["catch"](e)}));c(e,t);return e}function At(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Et(r,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(r,e){var n=e.rows.item(0).c;t(n)}),(function(t,r){e(r)}))}))}))["catch"](e)}));c(e,t);return e}function Ot(t,r){var e=this;var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,e){var n=e.rows.length?e.rows.item(0).key:null;r(n)}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function _t(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Et(r,n,"SELECT key FROM "+n.storeName,[],(function(r,e){var n=[];for(var i=0;i<e.rows.length;i++){n.push(e.rows.item(i).key)}t(n)}),(function(t,r){e(r)}))}))}))["catch"](e)}));c(e,t);return e}function Dt(t){return new f((function(r,e){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(e,n){var i=[];for(var s=0;s<n.rows.length;s++){i.push(n.rows.item(s).name)}r({db:t,storeNames:i})}),(function(t,r){e(r)}))}),(function(t){e(t)}))}))}function jt(t,r){r=v.apply(this,arguments);var e=this.config();t=typeof t!=="function"&&t||{};if(!t.name){t.name=t.name||e.name;t.storeName=t.storeName||e.storeName}var n=this;var i;if(!t.name){i=f.reject("Invalid arguments")}else{i=new f((function(r){var i;if(t.name===e.name){i=n._dbInfo.db}else{i=openDatabase(t.name,"","",0)}if(!t.storeName){r(Dt(i))}else{r({db:i,storeNames:[t.storeName]})}})).then((function(t){return new f((function(r,e){t.db.transaction((function(n){function i(t){return new f((function(r,e){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){r()}),(function(t,r){e(r)}))}))}var s=[];for(var o=0,a=t.storeNames.length;o<a;o++){s.push(i(t.storeNames[o]))}f.all(s).then((function(){r()}))["catch"]((function(t){e(t)}))}),(function(t){e(t)}))}))}))}c(i,r);return i}var Nt={_driver:"webSQLStorage",_initStorage:pt,_support:J(),iterate:Pt,getItem:gt,setItem:Tt,removeItem:$t,clear:kt,length:At,key:Ot,keys:_t,dropInstance:jt};function Rt(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return false}}function It(t,r){var e=t.name+"/";if(t.storeName!==r.storeName){e+=t.storeName+"/"}return e}function Mt(){var t="_localforage_support_test";try{localStorage.setItem(t,true);localStorage.removeItem(t);return false}catch(t){return true}}function xt(){return!Mt()||localStorage.length>0}function Ct(t){var r=this;var e={};if(t){for(var n in t){e[n]=t[n]}}e.keyPrefix=It(t,r._defaultConfig);if(!xt()){return f.reject()}r._dbInfo=e;e.serializer=yt;return f.resolve()}function Lt(t){var r=this;var e=r.ready().then((function(){var t=r._dbInfo.keyPrefix;for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);if(n.indexOf(t)===0){localStorage.removeItem(n)}}}));c(e,t);return e}function Bt(t,r){var e=this;t=l(t);var n=e.ready().then((function(){var r=e._dbInfo;var n=localStorage.getItem(r.keyPrefix+t);if(n){n=r.serializer.deserialize(n)}return n}));c(n,r);return n}function Ut(t,r){var e=this;var n=e.ready().then((function(){var r=e._dbInfo;var n=r.keyPrefix;var i=n.length;var s=localStorage.length;var o=1;for(var a=0;a<s;a++){var u=localStorage.key(a);if(u.indexOf(n)!==0){continue}var f=localStorage.getItem(u);if(f){f=r.serializer.deserialize(f)}f=t(f,u.substring(i),o++);if(f!==void 0){return f}}}));c(n,r);return n}function Ft(t,r){var e=this;var n=e.ready().then((function(){var r=e._dbInfo;var n;try{n=localStorage.key(t)}catch(t){n=null}if(n){n=n.substring(r.keyPrefix.length)}return n}));c(n,r);return n}function qt(t){var r=this;var e=r.ready().then((function(){var t=r._dbInfo;var e=localStorage.length;var n=[];for(var i=0;i<e;i++){var s=localStorage.key(i);if(s.indexOf(t.keyPrefix)===0){n.push(s.substring(t.keyPrefix.length))}}return n}));c(e,t);return e}function Gt(t){var r=this;var e=r.keys().then((function(t){return t.length}));c(e,t);return e}function Wt(t,r){var e=this;t=l(t);var n=e.ready().then((function(){var r=e._dbInfo;localStorage.removeItem(r.keyPrefix+t)}));c(n,r);return n}function zt(t,r,e){var n=this;t=l(t);var i=n.ready().then((function(){if(r===undefined){r=null}var e=r;return new f((function(i,s){var o=n._dbInfo;o.serializer.serialize(r,(function(r,n){if(n){s(n)}else{try{localStorage.setItem(o.keyPrefix+t,r);i(e)}catch(t){if(t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"){s(t)}s(t)}}}))}))}));c(i,e);return i}function Ht(t,r){r=v.apply(this,arguments);t=typeof t!=="function"&&t||{};if(!t.name){var e=this.config();t.name=t.name||e.name;t.storeName=t.storeName||e.storeName}var n=this;var i;if(!t.name){i=f.reject("Invalid arguments")}else{i=new f((function(r){if(!t.storeName){r(t.name+"/")}else{r(It(t,n._defaultConfig))}})).then((function(t){for(var r=localStorage.length-1;r>=0;r--){var e=localStorage.key(r);if(e.indexOf(t)===0){localStorage.removeItem(e)}}}))}c(i,r);return i}var Zt={_driver:"localStorageWrapper",_initStorage:Ct,_support:Rt(),iterate:Ut,getItem:Bt,setItem:zt,removeItem:Wt,clear:Lt,length:Gt,key:Ft,keys:qt,dropInstance:Ht};var Jt=function t(r,e){return r===e||typeof r==="number"&&typeof e==="number"&&isNaN(r)&&isNaN(e)};var Vt=function t(r,e){var n=r.length;var i=0;while(i<n){if(Jt(r[i],e)){return true}i++}return false};var Qt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var Kt={};var Xt={};var Yt={INDEXEDDB:Z,WEBSQL:Nt,LOCALSTORAGE:Zt};var tr=[Yt.INDEXEDDB._driver,Yt.WEBSQL._driver,Yt.LOCALSTORAGE._driver];var rr=["dropInstance"];var er=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(rr);var nr={description:"",driver:tr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ir(t,r){t[r]=function(){var e=arguments;return t.ready().then((function(){return t[r].apply(t,e)}))}}function sr(){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r){for(var e in r){if(r.hasOwnProperty(e)){if(Qt(r[e])){arguments[0][e]=r[e].slice()}else{arguments[0][e]=r[e]}}}}}return arguments[0]}var or=function(){function t(r){i(this,t);for(var e in Yt){if(Yt.hasOwnProperty(e)){var n=Yt[e];var s=n._driver;this[e]=s;if(!Kt[s]){this.defineDriver(n)}}}this._defaultConfig=sr({},nr);this._config=sr({},this._defaultConfig,r);this._driverSet=null;this._initDriver=null;this._ready=false;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver)["catch"]((function(){}))}t.prototype.config=function t(r){if((typeof r==="undefined"?"undefined":n(r))==="object"){if(this._ready){return new Error("Can't call config() after localforage "+"has been used.")}for(var e in r){if(e==="storeName"){r[e]=r[e].replace(/\W/g,"_")}if(e==="version"&&typeof r[e]!=="number"){return new Error("Database version must be a number.")}this._config[e]=r[e]}if("driver"in r&&r.driver){return this.setDriver(this._config.driver)}return true}else if(typeof r==="string"){return this._config[r]}else{return this._config}};t.prototype.defineDriver=function t(r,e,n){var i=new f((function(t,e){try{var n=r._driver;var i=new Error("Custom driver not compliant; see "+"https://mozilla.github.io/localForage/#definedriver");if(!r._driver){e(i);return}var s=er.concat("_initStorage");for(var o=0,a=s.length;o<a;o++){var u=s[o];var h=!Vt(rr,u);if((h||r[u])&&typeof r[u]!=="function"){e(i);return}}var l=function t(){var e=function t(r){return function(){var t=new Error("Method "+r+" is not implemented by the current driver");var e=f.reject(t);c(e,arguments[arguments.length-1]);return e}};for(var n=0,i=rr.length;n<i;n++){var s=rr[n];if(!r[s]){r[s]=e(s)}}};l();var v=function e(i){if(Kt[n]){console.info("Redefining LocalForage driver: "+n)}Kt[n]=r;Xt[n]=i;t()};if("_support"in r){if(r._support&&typeof r._support==="function"){r._support().then(v,e)}else{v(!!r._support)}}else{v(true)}}catch(t){e(t)}}));h(i,e,n);return i};t.prototype.driver=function t(){return this._driver||null};t.prototype.getDriver=function t(r,e,n){var i=Kt[r]?f.resolve(Kt[r]):f.reject(new Error("Driver not found."));h(i,e,n);return i};t.prototype.getSerializer=function t(r){var e=f.resolve(yt);h(e,r);return e};t.prototype.ready=function t(r){var e=this;var n=e._driverSet.then((function(){if(e._ready===null){e._ready=e._initDriver()}return e._ready}));h(n,r,r);return n};t.prototype.setDriver=function t(r,e,n){var i=this;if(!Qt(r)){r=[r]}var s=this._getSupportedDrivers(r);function o(){i._config.driver=i.driver()}function a(t){i._extend(t);o();i._ready=i._initStorage(i._config);return i._ready}function u(t){return function(){var r=0;function e(){while(r<t.length){var n=t[r];r++;i._dbInfo=null;i._ready=null;return i.getDriver(n).then(a)["catch"](e)}o();var s=new Error("No available storage method found.");i._driverSet=f.reject(s);return i._driverSet}return e()}}var c=this._driverSet!==null?this._driverSet["catch"]((function(){return f.resolve()})):f.resolve();this._driverSet=c.then((function(){var t=s[0];i._dbInfo=null;i._ready=null;return i.getDriver(t).then((function(t){i._driver=t._driver;o();i._wrapLibraryMethodsWithReady();i._initDriver=u(s)}))}))["catch"]((function(){o();var t=new Error("No available storage method found.");i._driverSet=f.reject(t);return i._driverSet}));h(this._driverSet,e,n);return this._driverSet};t.prototype.supports=function t(r){return!!Xt[r]};t.prototype._extend=function t(r){sr(this,r)};t.prototype._getSupportedDrivers=function t(r){var e=[];for(var n=0,i=r.length;n<i;n++){var s=r[n];if(this.supports(s)){e.push(s)}}return e};t.prototype._wrapLibraryMethodsWithReady=function t(){for(var r=0,e=er.length;r<e;r++){ir(this,er[r])}};t.prototype.createInstance=function r(e){return new t(e)};return t}();var ar=new or;r.exports=ar},{3:3}]},{},[4])(4)}))}));var un=ir((function(t,r){
/*!

JSZip v3.10.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
!function(r){t.exports=r()}((function(){return function t(r,e,n){function i(o,a){if(!e[o]){if(!r[o]){var u="function"==typeof or&&or;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[o]={exports:{}};r[o][0].call(c.exports,(function(t){var e=r[o][1][t];return i(e||t)}),c,c.exports,t,r,e,n)}return e[o].exports}for(var s="function"==typeof or&&or,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,r,e){var n=t("./utils"),i=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t){for(var r,e,i,o,a,u,f,c=[],h=0,l=t.length,v=l,d="string"!==n.getTypeOf(t);h<t.length;)v=l-h,i=d?(r=t[h++],e=h<l?t[h++]:0,h<l?t[h++]:0):(r=t.charCodeAt(h++),e=h<l?t.charCodeAt(h++):0,h<l?t.charCodeAt(h++):0),o=r>>2,a=(3&r)<<4|e>>4,u=1<v?(15&e)<<2|i>>6:64,f=2<v?63&i:64,c.push(s.charAt(o)+s.charAt(a)+s.charAt(u)+s.charAt(f));return c.join("")},e.decode=function(t){var r,e,n,o,a,u,f=0,c=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var l,v=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===s.charAt(64)&&v--,t.charAt(t.length-2)===s.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=i.uint8array?new Uint8Array(0|v):new Array(0|v);f<t.length;)r=s.indexOf(t.charAt(f++))<<2|(o=s.indexOf(t.charAt(f++)))>>4,e=(15&o)<<4|(a=s.indexOf(t.charAt(f++)))>>2,n=(3&a)<<6|(u=s.indexOf(t.charAt(f++))),l[c++]=r,64!==a&&(l[c++]=e),64!==u&&(l[c++]=n);return l}},{"./support":30,"./utils":32}],2:[function(t,r,e){var n=t("./external"),i=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function a(t,r,e,n,i){this.compressedSize=t,this.uncompressedSize=r,this.crc32=e,this.compression=n,this.compressedContent=i}a.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),r=this;return t.on("end",(function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,r,e){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(r.compressWorker(e)).pipe(new o("compressedSize")).withStreamInfo("compression",r)},r.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,e){var n=t("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},e.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,e){var n=t("./utils");var i=function(){for(var t,r=[],e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;r[e]=t}return r}();r.exports=function(t,r){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,r,e,n){var s=i,o=n+e;t^=-1;for(var a=n;a<o;a++)t=t>>>8^s[255&(t^r[a])];return-1^t}(0|r,t,t.length,0):function(t,r,e,n){var s=i,o=n+e;t^=-1;for(var a=n;a<o;a++)t=t>>>8^s[255&(t^r.charCodeAt(a))];return-1^t}(0|r,t,t.length,0):0}},{"./utils":32}],5:[function(t,r,e){e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(t,r,e){var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),r.exports={Promise:n}},{lie:37}],7:[function(t,r,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),s=t("./utils"),o=t("./stream/GenericWorker"),a=n?"uint8array":"array";function u(t,r){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=r,this.meta={}}e.magic="\b\0",s.inherits(u,o),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,t.data),!1)},u.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(r){t.push({data:r,meta:t.meta})}},e.compressWorker=function(t){return new u("Deflate",t)},e.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,e){function n(t,r){var e,n="";for(e=0;e<r;e++)n+=String.fromCharCode(255&t),t>>>=8;return n}function i(t,r,e,i,o,c){var h,l,v=t.file,d=t.compression,w=c!==a.utf8encode,m=s.transformTo("string",c(v.name)),y=s.transformTo("string",a.utf8encode(v.name)),b=v.comment,p=s.transformTo("string",c(b)),E=s.transformTo("string",a.utf8encode(b)),g=y.length!==v.name.length,P=E.length!==b.length,S="",T="",$="",k=v.dir,A=v.date,O={crc32:0,compressedSize:0,uncompressedSize:0};r&&!e||(O.crc32=t.crc32,O.compressedSize=t.compressedSize,O.uncompressedSize=t.uncompressedSize);var _=0;r&&(_|=8),w||!g&&!P||(_|=2048);var D=0,j=0;k&&(D|=16),"UNIX"===o?(j=798,D|=function(t,r){var e=t;return t||(e=r?16893:33204),(65535&e)<<16}(v.unixPermissions,k)):(j=20,D|=function(t){return 63&(t||0)}(v.dosPermissions)),h=A.getUTCHours(),h<<=6,h|=A.getUTCMinutes(),h<<=5,h|=A.getUTCSeconds()/2,l=A.getUTCFullYear()-1980,l<<=4,l|=A.getUTCMonth()+1,l<<=5,l|=A.getUTCDate(),g&&(T=n(1,1)+n(u(m),4)+y,S+="up"+n(T.length,2)+T),P&&($=n(1,1)+n(u(p),4)+E,S+="uc"+n($.length,2)+$);var N="";return N+="\n\0",N+=n(_,2),N+=d.magic,N+=n(h,2),N+=n(l,2),N+=n(O.crc32,4),N+=n(O.compressedSize,4),N+=n(O.uncompressedSize,4),N+=n(m.length,2),N+=n(S.length,2),{fileRecord:f.LOCAL_FILE_HEADER+N+m+S,dirRecord:f.CENTRAL_FILE_HEADER+n(j,2)+N+n(p.length,2)+"\0\0\0\0"+n(D,4)+n(i,4)+m+S+p}}var s=t("../utils"),o=t("../stream/GenericWorker"),a=t("../utf8"),u=t("../crc32"),f=t("../signature");function c(t,r,e,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=e,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(c,o),c.prototype.push=function(t){var r=t.meta.percent||0,e=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:e?(r+100*(e-n-1))/e:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var r=this.streamFiles&&!t.file.dir;if(r){var e=i(t,r,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:e.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var r=this.streamFiles&&!t.file.dir,e=i(t,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(e.dirRecord),r)this.push({data:function(t){return f.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:e.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,r=0;r<this.dirRecords.length;r++)this.push({data:this.dirRecords[r],meta:{percent:100}});var e=this.bytesWritten-t,i=function(t,r,e,i,o){var a=s.transformTo("string",o(i));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(r,4)+n(e,4)+n(a.length,2)+a}(this.dirRecords.length,e,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var r=this;return t.on("data",(function(t){r.processChunk(t)})),t.on("end",(function(){r.closedSource(r.previous.streamInfo),r._sources.length?r.prepareNextSource():r.end()})),t.on("error",(function(t){r.error(t)})),this},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var r=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var e=0;e<r.length;e++)try{r[e].error(t)}catch(t){}return!0},c.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,r=0;r<t.length;r++)t[r].lock()},r.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,e){var n=t("../compressions"),i=t("./ZipFileWorker");e.generateWorker=function(t,r,e){var s=new i(r.streamFiles,e,r.platform,r.encodeFileName),o=0;try{t.forEach((function(t,e){o++;var i=function(t,r){var e=t||r,i=n[e];if(!i)throw new Error(e+" is not a valid compression method !");return i}(e.options.compression,r.compression),a=e.options.compressionOptions||r.compressionOptions||{},u=e.dir,f=e.date;e._compressWorker(i,a).withStreamInfo("file",{name:t,dir:u,date:f,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(t){s.error(t)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,e){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var r in this)"function"!=typeof this[r]&&(t[r]=this[r]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.0",n.loadAsync=function(t,r){return(new n).loadAsync(t,r)},n.external=t("./external"),r.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,e){var n=t("./utils"),i=t("./external"),s=t("./utf8"),o=t("./zipEntries"),a=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function f(t){return new i.Promise((function(r,e){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",(function(t){e(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):r()})).resume()}))}r.exports=function(t,r){var e=this;return r=n.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,r.optimizedBinaryString,r.base64).then((function(t){var e=new o(r);return e.load(t),e})).then((function(t){var e=[i.Promise.resolve(t)],n=t.files;if(r.checkCRC32)for(var s=0;s<n.length;s++)e.push(f(n[s]));return i.Promise.all(e)})).then((function(t){for(var i=t.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],u=a.fileNameStr,f=n.resolve(a.fileNameStr);e.file(f,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:r.createFolders}),a.dir||(e.file(f).unsafeOriginalName=u)}return i.zipComment.length&&(e.comment=i.zipComment),e}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,e){var n=t("../utils"),i=t("../stream/GenericWorker");function s(t,r){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(r)}n.inherits(s,i),s.prototype._bindStream=function(t){var r=this;(this._stream=t).pause(),t.on("data",(function(t){r.push({data:t,meta:{percent:0}})})).on("error",(function(t){r.isPaused?this.generatedError=t:r.error(t)})).on("end",(function(){r.isPaused?r._upstreamEnded=!0:r.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,e){var n=t("readable-stream").Readable;function i(t,r,e){n.call(this,r),this._helper=t;var i=this;t.on("data",(function(t,r){i.push(t)||i._helper.pause(),e&&e(r)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,r,e){r.exports={isNode:"undefined"!=typeof at,newBufferFrom:function(t,r){if(at.from&&at.from!==Uint8Array.from)return at.from(t,r);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new at(t,r)},allocBuffer:function(t){if(at.alloc)return at.alloc(t);var r=new at(t);return r.fill(0),r},isBuffer:function(t){return at.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,r,e){function n(t,r,e){var n,i=s.getTypeOf(r),a=s.extend(e||{},u);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=w(t)),a.createFolders&&(n=d(t))&&m.call(this,n,!0);var h="string"===i&&!1===a.binary&&!1===a.base64;e&&void 0!==e.binary||(a.binary=!h),(r instanceof f&&0===r.uncompressedSize||a.dir||!r||0===r.length)&&(a.base64=!1,a.binary=!0,r="",a.compression="STORE",i="string");var y=null;y=r instanceof f||r instanceof o?r:l.isNode&&l.isStream(r)?new v(t,r):s.prepareContent(t,r,a.binary,a.optimizedBinaryString,a.base64);var b=new c(t,y,a);this.files[t]=b}var i=t("./utf8"),s=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),u=t("./defaults"),f=t("./compressedObject"),c=t("./zipObject"),h=t("./generate"),l=t("./nodejsUtils"),v=t("./nodejs/NodejsStreamInputAdapter"),d=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var r=t.lastIndexOf("/");return 0<r?t.substring(0,r):""},w=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,r){return r=void 0!==r?r:u.createFolders,t=w(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:r}),this.files[t]};function y(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var r,e,n;for(r in this.files)n=this.files[r],(e=r.slice(this.root.length,r.length))&&r.slice(0,this.root.length)===this.root&&t(e,n)},filter:function(t){var r=[];return this.forEach((function(e,n){t(e,n)&&r.push(n)})),r},file:function(t,r,e){if(1!==arguments.length)return t=this.root+t,n.call(this,t,r,e),this;if(y(t)){var i=t;return this.filter((function(t,r){return!r.dir&&i.test(t)}))}var s=this.files[this.root+t];return s&&!s.dir?s:null},folder:function(t){if(!t)return this;if(y(t))return this.filter((function(r,e){return e.dir&&t.test(r)}));var r=this.root+t,e=m.call(this,r),n=this.clone();return n.root=e.name,n},remove:function(t){t=this.root+t;var r=this.files[t];if(r||("/"!==t.slice(-1)&&(t+="/"),r=this.files[t]),r&&!r.dir)delete this.files[t];else for(var e=this.filter((function(r,e){return e.name.slice(0,t.length)===t})),n=0;n<e.length;n++)delete this.files[e[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var r,e={};try{if((e=s.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=e.type.toLowerCase(),e.compression=e.compression.toUpperCase(),"binarystring"===e.type&&(e.type="string"),!e.type)throw new Error("No output type specified.");s.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var n=e.comment||this.comment||"";r=h.generateWorker(this,e,n)}catch(t){(r=new o("error")).error(t)}return new a(r,e.type||"string",e.mimeType)},generateAsync:function(t,r){return this.generateInternalStream(t).accumulate(r)},generateNodeStream:function(t,r){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(r)}};r.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,e){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,e){var n=t("./DataReader");function i(t){n.call(this,t);for(var r=0;r<this.data.length;r++)t[r]=255&t[r]}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var r=t.charCodeAt(0),e=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===r&&this.data[s+1]===e&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var r=t.charCodeAt(0),e=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.readData(4);return r===s[0]&&e===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,r,e){var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var r,e=0;for(this.checkOffset(t),r=this.index+t-1;r>=this.index;r--)e=(e<<8)+this.byteAt(r);return this.index+=t,e},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},r.exports=i},{"../utils":32}],19:[function(t,r,e){var n=t("./Uint8ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,e){var n=t("./DataReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,r,e){var n=t("./ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,e){var n=t("../utils"),i=t("../support"),s=t("./ArrayReader"),o=t("./StringReader"),a=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");r.exports=function(t){var r=n.getTypeOf(t);return n.checkSupport(r),"string"!==r||i.uint8array?"nodebuffer"===r?new a(t):i.uint8array?new u(n.transformTo("uint8array",t)):new s(n.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,e){e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,r,e){var n=t("./GenericWorker"),i=t("../utils");function s(t){n.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(s,n),s.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,e){var n=t("./GenericWorker"),i=t("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,n),s.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,e){var n=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(s,i),s.prototype.processChunk=function(t){if(t){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+t.data.length}i.prototype.processChunk.call(this,t)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,e){var n=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){r.dataIsReady=!0,r.data=t,r.max=t&&t.length||0,r.type=n.getTypeOf(t),r.isPaused||r._tickAndRepeat()}),(function(t){r.error(t)}))}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,r=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,r);break;case"uint8array":t=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":t=this.data.slice(this.index,r)}return this.index=r,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,e){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,r){return this._listeners[t].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,r){if(this._listeners[t])for(var e=0;e<this._listeners[t].length;e++)this._listeners[t][e].call(this,r)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var r=this;return t.on("data",(function(t){r.processChunk(t)})),t.on("end",(function(){r.end()})),t.on("error",(function(t){r.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,r){return this.extraStreamInfo[t]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},r.exports=n},{}],29:[function(t,r,e){var n=t("../utils"),i=t("./ConvertWorker"),s=t("./GenericWorker"),o=t("../base64"),a=t("../support"),u=t("../external"),f=null;if(a.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,r){return new u.Promise((function(e,i){var s=[],a=t._internalType,u=t._outputType,f=t._mimeType;t.on("data",(function(t,e){s.push(t),r&&r(e)})).on("error",(function(t){s=[],i(t)})).on("end",(function(){try{var t=function(t,r,e){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",r),e);case"base64":return o.encode(r);default:return n.transformTo(t,r)}}(u,function(t,r){var e,n=0,i=null,s=0;for(e=0;e<r.length;e++)s+=r[e].length;switch(t){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(i=new Uint8Array(s),e=0;e<r.length;e++)i.set(r[e],n),n+=r[e].length;return i;case"nodebuffer":return at.concat(r);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,s),f);e(t)}catch(t){i(t)}s=[]})).resume()}))}function h(t,r,e){var o=r;switch(r){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=r,this._mimeType=e,n.checkSupport(o),this._worker=t.pipe(new i(o)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}h.prototype={accumulate:function(t){return c(this,t)},on:function(t,r){var e=this;return"data"===t?this._worker.on(t,(function(t){r.call(e,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(r,arguments,e)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:"nodebuffer"!==this._outputType},t)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer="undefined"!=typeof at,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),e.blob=0===i.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!t("readable-stream").Readable}catch(t){e.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,e){for(var n=t("./utils"),i=t("./support"),s=t("./nodejsUtils"),o=t("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;a[254]=a[254]=1;function f(){o.call(this,"utf-8 decode"),this.leftOver=null}function c(){o.call(this,"utf-8 encode")}e.utf8encode=function(t){return i.nodebuffer?s.newBufferFrom(t,"utf-8"):function(t){var r,e,n,s,o,a=t.length,u=0;for(s=0;s<a;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(n-56320),s++),u+=e<128?1:e<2048?2:e<65536?3:4;for(r=i.uint8array?new Uint8Array(u):new Array(u),s=o=0;o<u;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(n-56320),s++),e<128?r[o++]=e:(e<2048?r[o++]=192|e>>>6:(e<65536?r[o++]=224|e>>>12:(r[o++]=240|e>>>18,r[o++]=128|e>>>12&63),r[o++]=128|e>>>6&63),r[o++]=128|63&e);return r}(t)},e.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var r,e,i,s,o=t.length,u=new Array(2*o);for(r=e=0;r<o;)if((i=t[r++])<128)u[e++]=i;else if(4<(s=a[i]))u[e++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<o;)i=i<<6|63&t[r++],s--;1<s?u[e++]=65533:i<65536?u[e++]=i:(i-=65536,u[e++]=55296|i>>10&1023,u[e++]=56320|1023&i)}return u.length!==e&&(u.subarray?u=u.subarray(0,e):u.length=e),n.applyFromCharCode(u)}(t=n.transformTo(i.uint8array?"uint8array":"array",t))},n.inherits(f,o),f.prototype.processChunk=function(t){var r=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=r;(r=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),r.set(s,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var o=function(t,r){var e;for((r=r||t.length)>t.length&&(r=t.length),e=r-1;0<=e&&128==(192&t[e]);)e--;return e<0?r:0===e?r:e+a[t[e]]>r?e:r}(r),u=r;o!==r.length&&(i.uint8array?(u=r.subarray(0,o),this.leftOver=r.subarray(o,r.length)):(u=r.slice(0,o),this.leftOver=r.slice(o,r.length))),this.push({data:e.utf8decode(u),meta:t.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=f,n.inherits(c,o),c.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,e){var n=t("./support"),i=t("./base64"),s=t("./nodejsUtils"),o=t("./external");function a(t){return t}function u(t,r){for(var e=0;e<t.length;++e)r[e]=255&t.charCodeAt(e);return r}t("setimmediate"),e.newBlob=function(t,r){e.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(r)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(t,r,e){var n=[],i=0,s=t.length;if(s<=e)return String.fromCharCode.apply(null,t);for(;i<s;)"array"===r||"nodebuffer"===r?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+e,s)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+e,s)))),i+=e;return n.join("")},stringifyByChar:function(t){for(var r="",e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return r},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var r=65536,n=e.getTypeOf(t),i=!0;if("uint8array"===n?i=f.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=f.applyCanBeUsed.nodebuffer),i)for(;1<r;)try{return f.stringifyByChunk(t,n,r)}catch(t){r=Math.floor(r/2)}return f.stringifyByChar(t)}function h(t,r){for(var e=0;e<t.length;e++)r[e]=t[e];return r}e.applyFromCharCode=c;var l={};l.string={string:a,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return l.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,s.allocBuffer(t.length))}},l.array={string:c,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(t)}},l.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(new Uint8Array(t))}},l.uint8array={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return s.newBufferFrom(t)}},l.nodebuffer={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return l.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:a},e.transformTo=function(t,r){if(r=r||"",!t)return r;e.checkSupport(t);var n=e.getTypeOf(r);return l[n][t](r)},e.resolve=function(t){for(var r=t.split("/"),e=[],n=0;n<r.length;n++){var i=r[n];"."===i||""===i&&0!==n&&n!==r.length-1||(".."===i?e.pop():e.push(i))}return e.join("/")},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&s.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var r,e,n="";for(e=0;e<(t||"").length;e++)n+="\\x"+((r=t.charCodeAt(e))<16?"0":"")+r.toString(16).toUpperCase();return n},e.delay=function(t,r,e){setImmediate((function(){t.apply(e||null,r||[])}))},e.inherits=function(t,r){function e(){}e.prototype=r.prototype,t.prototype=new e},e.extend=function(){var t,r,e={};for(t=0;t<arguments.length;t++)for(r in arguments[t])arguments[t].hasOwnProperty(r)&&void 0===e[r]&&(e[r]=arguments[t][r]);return e},e.prepareContent=function(t,r,s,a,f){return o.Promise.resolve(r).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new o.Promise((function(r,e){var n=new FileReader;n.onload=function(t){r(t.target.result)},n.onerror=function(t){e(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(r){var c=e.getTypeOf(r);return c?("arraybuffer"===c?r=e.transformTo("uint8array",r):"string"===c&&(f?r=i.decode(r):s&&!0!==a&&(r=function(t){return u(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(r))),r):o.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,e){var n=t("./reader/readerFor"),i=t("./utils"),s=t("./signature"),o=t("./zipEntry"),a=(t("./utf8"),t("./support"));function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(r)+", expected "+i.pretty(t)+")")}},isSignature:function(t,r){var e=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===r;return this.reader.setIndex(e),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),r=a.uint8array?"uint8array":"array",e=i.transformTo(r,t);this.zipComment=this.loadOptions.decodeFileName(e)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,r,e,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),r=this.reader.readInt(4),e=this.reader.readData(r),this.zip64ExtensibleData[t]={id:t,length:r,value:e}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,r;for(t=0;t<this.files.length;t++)r=this.files[t],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var r=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var e=this.centralDirOffset+this.centralDirSize;this.zip64&&(e+=20,e+=12+this.zip64EndOfCentralSize);var n=r-e;if(0<n)this.isSignature(r,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,r,e){var n=t("./reader/readerFor"),i=t("./utils"),s=t("./compressedObject"),o=t("./crc32"),a=t("./utf8"),u=t("./compressions"),f=t("./support");function c(t,r){this.options=t,this.loadOptions=r}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var r,e;if(t.skip(22),this.fileNameLength=t.readInt(2),e=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(e),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(r=function(t){for(var r in u)if(u.hasOwnProperty(r)&&u[r].magic===t)return u[r];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,r,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var r=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(r),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var r=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(t){var r,e,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)r=t.readInt(2),e=t.readInt(2),n=t.readData(e),this.extraFields[r]={id:r,length:e,value:n};t.setIndex(i)},handleUTF8:function(){var t=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(null!==r)this.fileNameStr=r;else{var e=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(e)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var r=n(t.value);return 1!==r.readInt(1)?null:o(this.fileName)!==r.readInt(4)?null:a.utf8decode(r.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var r=n(t.value);return 1!==r.readInt(1)?null:o(this.fileComment)!==r.readInt(4)?null:a.utf8decode(r.readData(t.length-5))}return null}},r.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,e){function n(t,r,e){this.name=t,this.dir=e.dir,this.date=e.date,this.comment=e.comment,this.unixPermissions=e.unixPermissions,this.dosPermissions=e.dosPermissions,this._data=r,this._dataBinary=e.binary,this.options={compression:e.compression,compressionOptions:e.compressionOptions}}var i=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),u=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var r=null,e="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(e=t.toLowerCase())||"text"===e;"binarystring"!==e&&"text"!==e||(e="string"),r=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(r=r.pipe(new o.Utf8EncodeWorker)),!s&&n&&(r=r.pipe(new o.Utf8DecodeWorker))}catch(t){(r=new u("error")).error(t)}return new i(r,e,"")},async:function(t,r){return this.internalStream(t).accumulate(r)},nodeStream:function(t,r){return this.internalStream(t||"nodebuffer").toNodejsStream(r)},_compressWorker:function(t,r){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var e=this._decompressWorker();return this._dataBinary||(e=e.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(e,t,r)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new s(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<f.length;h++)n.prototype[f[h]]=c;r.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,e){(function(t){var e,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var s=0,o=new i(c),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),e=function(){a.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var r=t.document.createElement("script");r.onreadystatechange=function(){c(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},t.document.documentElement.appendChild(r)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,e=function(){u.port2.postMessage(0)}}var f=[];function c(){var t,r;n=!0;for(var e=f.length;e;){for(r=f,f=[],t=-1;++t<e;)r[t]();e=f.length}n=!1}r.exports=function(t){1!==f.push(t)||n||e()}}).call(this,"undefined"!=typeof nr?nr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,r,e){var n=t("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function f(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&v(this,t)}function c(t,r,e){this.promise=t,"function"==typeof r&&(this.onFulfilled=r,this.callFulfilled=this.otherCallFulfilled),"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function h(t,r,e){n((function(){var n;try{n=r(e)}catch(n){return s.reject(t,n)}n===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,n)}))}function l(t){var r=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof r)return function(){r.apply(t,arguments)}}function v(t,r){var e=!1;function n(r){e||(e=!0,s.reject(t,r))}function i(r){e||(e=!0,s.resolve(t,r))}var o=d((function(){r(i,n)}));"error"===o.status&&n(o.value)}function d(t,r){var e={};try{e.value=t(r),e.status="success"}catch(t){e.status="error",e.value=t}return e}(r.exports=f).prototype.finally=function(t){if("function"!=typeof t)return this;var r=this.constructor;return this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))}))},f.prototype.catch=function(t){return this.then(null,t)},f.prototype.then=function(t,r){if("function"!=typeof t&&this.state===a||"function"!=typeof r&&this.state===o)return this;var e=new this.constructor(i);this.state!==u?h(e,this.state===a?t:r,this.outcome):this.queue.push(new c(e,t,r));return e},c.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){s.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},s.resolve=function(t,r){var e=d(l,r);if("error"===e.status)return s.reject(t,e.value);var n=e.value;if(n)v(t,n);else{t.state=a,t.outcome=r;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(r)}return t},s.reject=function(t,r){t.state=o,t.outcome=r;for(var e=-1,n=t.queue.length;++e<n;)t.queue[e].callRejected(r);return t},f.resolve=function(t){if(t instanceof this)return t;return s.resolve(new this(i),t)},f.reject=function(t){var r=new this(i);return s.reject(r,t)},f.all=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);var o=new Array(e),a=0,u=-1,f=new this(i);for(;++u<e;)c(t[u],u);return f;function c(t,i){r.resolve(t).then((function(t){o[i]=t,++a!==e||n||(n=!0,s.resolve(f,o))}),(function(t){n||(n=!0,s.reject(f,t))}))}},f.race=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);var o=-1,a=new this(i);for(;++o<e;)u=t[o],r.resolve(u).then((function(t){n||(n=!0,s.resolve(a,t))}),(function(t){n||(n=!0,s.reject(a,t))}));var u;return a}},{immediate:36}],38:[function(t,r,e){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,e){var n=t("./zlib/deflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/messages"),a=t("./zlib/zstream"),u=Object.prototype.toString,f=0,c=-1,h=0,l=8;function v(t){if(!(this instanceof v))return new v(t);this.options=i.assign({level:c,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var r=this.options;r.raw&&0<r.windowBits?r.windowBits=-r.windowBits:r.gzip&&0<r.windowBits&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var e=n.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(e!==f)throw new Error(o[e]);if(r.header&&n.deflateSetHeader(this.strm,r.header),r.dictionary){var d;if(d="string"==typeof r.dictionary?s.string2buf(r.dictionary):"[object ArrayBuffer]"===u.call(r.dictionary)?new Uint8Array(r.dictionary):r.dictionary,(e=n.deflateSetDictionary(this.strm,d))!==f)throw new Error(o[e]);this._dict_set=!0}}function d(t,r){var e=new v(r);if(e.push(t,!0),e.err)throw e.msg||o[e.err];return e.result}v.prototype.push=function(t,r){var e,o,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=r===~~r?r:!0===r?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===u.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(c),a.next_out=0,a.avail_out=c),1!==(e=n.deflate(a,o))&&e!==f)return this.onEnd(e),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==e);return 4===o?(e=n.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===f):2!==o||(this.onEnd(f),!(a.avail_out=0))},v.prototype.onData=function(t){this.chunks.push(t)},v.prototype.onEnd=function(t){t===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=v,e.deflate=d,e.deflateRaw=function(t,r){return(r=r||{}).raw=!0,d(t,r)},e.gzip=function(t,r){return(r=r||{}).gzip=!0,d(t,r)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,e){var n=t("./zlib/inflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var r=this.options;r.raw&&0<=r.windowBits&&r.windowBits<16&&(r.windowBits=-r.windowBits,0===r.windowBits&&(r.windowBits=-15)),!(0<=r.windowBits&&r.windowBits<16)||t&&t.windowBits||(r.windowBits+=32),15<r.windowBits&&r.windowBits<48&&0==(15&r.windowBits)&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var e=n.inflateInit2(this.strm,r.windowBits);if(e!==o.Z_OK)throw new Error(a[e]);this.header=new f,n.inflateGetHeader(this.strm,this.header)}function l(t,r){var e=new h(r);if(e.push(t,!0),e.err)throw e.msg||a[e.err];return e.result}h.prototype.push=function(t,r){var e,a,u,f,h,l,v=this.strm,d=this.options.chunkSize,w=this.options.dictionary,m=!1;if(this.ended)return!1;a=r===~~r?r:!0===r?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?v.input=s.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?v.input=new Uint8Array(t):v.input=t,v.next_in=0,v.avail_in=v.input.length;do{if(0===v.avail_out&&(v.output=new i.Buf8(d),v.next_out=0,v.avail_out=d),(e=n.inflate(v,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&w&&(l="string"==typeof w?s.string2buf(w):"[object ArrayBuffer]"===c.call(w)?new Uint8Array(w):w,e=n.inflateSetDictionary(this.strm,l)),e===o.Z_BUF_ERROR&&!0===m&&(e=o.Z_OK,m=!1),e!==o.Z_STREAM_END&&e!==o.Z_OK)return this.onEnd(e),!(this.ended=!0);v.next_out&&(0!==v.avail_out&&e!==o.Z_STREAM_END&&(0!==v.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(u=s.utf8border(v.output,v.next_out),f=v.next_out-u,h=s.buf2string(v.output,u),v.next_out=f,v.avail_out=d-f,f&&i.arraySet(v.output,v.output,u,f,0),this.onData(h)):this.onData(i.shrinkBuf(v.output,v.next_out)))),0===v.avail_in&&0===v.avail_out&&(m=!0)}while((0<v.avail_in||0===v.avail_out)&&e!==o.Z_STREAM_END);return e===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(e=n.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(v.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=l,e.inflateRaw=function(t,r){return(r=r||{}).raw=!0,l(t,r)},e.ungzip=l},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var e=r.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}return t},e.shrinkBuf=function(t,r){return t.length===r?t:t.subarray?t.subarray(0,r):(t.length=r,t)};var i={arraySet:function(t,r,e,n,i){if(r.subarray&&t.subarray)t.set(r.subarray(e,e+n),i);else for(var s=0;s<n;s++)t[i+s]=r[e+s]},flattenChunks:function(t){var r,e,n,i,s,o;for(r=n=0,e=t.length;r<e;r++)n+=t[r].length;for(o=new Uint8Array(n),r=i=0,e=t.length;r<e;r++)s=t[r],o.set(s,i),i+=s.length;return o}},s={arraySet:function(t,r,e,n,i){for(var s=0;s<n;s++)t[i+s]=r[e+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},{}],42:[function(t,r,e){var n=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(t,r){if(r<65537&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,r));for(var e="",o=0;o<r;o++)e+=String.fromCharCode(t[o]);return e}o[254]=o[254]=1,e.string2buf=function(t){var r,e,i,s,o,a=t.length,u=0;for(s=0;s<a;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(i-56320),s++),u+=e<128?1:e<2048?2:e<65536?3:4;for(r=new n.Buf8(u),s=o=0;o<u;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(i-56320),s++),e<128?r[o++]=e:(e<2048?r[o++]=192|e>>>6:(e<65536?r[o++]=224|e>>>12:(r[o++]=240|e>>>18,r[o++]=128|e>>>12&63),r[o++]=128|e>>>6&63),r[o++]=128|63&e);return r},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var r=new n.Buf8(t.length),e=0,i=r.length;e<i;e++)r[e]=t.charCodeAt(e);return r},e.buf2string=function(t,r){var e,n,i,s,a=r||t.length,f=new Array(2*a);for(e=n=0;e<a;)if((i=t[e++])<128)f[n++]=i;else if(4<(s=o[i]))f[n++]=65533,e+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&e<a;)i=i<<6|63&t[e++],s--;1<s?f[n++]=65533:i<65536?f[n++]=i:(i-=65536,f[n++]=55296|i>>10&1023,f[n++]=56320|1023&i)}return u(f,n)},e.utf8border=function(t,r){var e;for((r=r||t.length)>t.length&&(r=t.length),e=r-1;0<=e&&128==(192&t[e]);)e--;return e<0?r:0===e?r:e+o[t[e]]>r?e:r}},{"./common":41}],43:[function(t,r,e){r.exports=function(t,r,e,n){for(var i=65535&t|0,s=t>>>16&65535|0,o=0;0!==e;){for(e-=o=2e3<e?2e3:e;s=s+(i=i+r[n++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(t,r,e){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,e){var n=function(){for(var t,r=[],e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;r[e]=t}return r}();r.exports=function(t,r,e,i){var s=n,o=i+e;t^=-1;for(var a=i;a<o;a++)t=t>>>8^s[255&(t^r[a])];return-1^t}},{}],46:[function(t,r,e){var n,i=t("../utils/common"),s=t("./trees"),o=t("./adler32"),a=t("./crc32"),u=t("./messages"),f=0,c=4,h=0,l=-2,v=-1,d=4,w=2,m=8,y=9,b=286,p=30,E=19,g=2*b+1,P=15,S=3,T=258,$=T+S+1,k=42,A=113,O=1,_=2,D=3,j=4;function N(t,r){return t.msg=u[r],r}function R(t){return(t<<1)-(4<t?9:0)}function I(t){for(var r=t.length;0<=--r;)t[r]=0}function M(t){var r=t.state,e=r.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(i.arraySet(t.output,r.pending_buf,r.pending_out,e,t.next_out),t.next_out+=e,r.pending_out+=e,t.total_out+=e,t.avail_out-=e,r.pending-=e,0===r.pending&&(r.pending_out=0))}function x(t,r){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,r),t.block_start=t.strstart,M(t.strm)}function C(t,r){t.pending_buf[t.pending++]=r}function L(t,r){t.pending_buf[t.pending++]=r>>>8&255,t.pending_buf[t.pending++]=255&r}function B(t,r){var e,n,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-$?t.strstart-(t.w_size-$):0,f=t.window,c=t.w_mask,h=t.prev,l=t.strstart+T,v=f[s+o-1],d=f[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(f[(e=r)+o]===d&&f[e+o-1]===v&&f[e]===f[s]&&f[++e]===f[s+1]){s+=2,e++;do{}while(f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&s<l);if(n=T-(l-s),s=l-T,o<n){if(t.match_start=r,a<=(o=n))break;v=f[s+o-1],d=f[s+o]}}}while((r=h[r&c])>u&&0!=--i);return o<=t.lookahead?o:t.lookahead}function U(t){var r,e,n,s,u,f,c,h,l,v,d=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-$)){for(i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,r=e=t.hash_size;n=t.head[--r],t.head[r]=d<=n?n-d:0,--e;);for(r=e=d;n=t.prev[--r],t.prev[r]=d<=n?n-d:0,--e;);s+=d}if(0===t.strm.avail_in)break;if(f=t.strm,c=t.window,h=t.strstart+t.lookahead,l=s,v=void 0,v=f.avail_in,l<v&&(v=l),e=0===v?0:(f.avail_in-=v,i.arraySet(c,f.input,f.next_in,v,h),1===f.state.wrap?f.adler=o(f.adler,c,v,h):2===f.state.wrap&&(f.adler=a(f.adler,c,v,h)),f.next_in+=v,f.total_in+=v,v),t.lookahead+=e,t.lookahead+t.insert>=S)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+S-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<S)););}while(t.lookahead<$&&0!==t.strm.avail_in)}function F(t,r){for(var e,n;;){if(t.lookahead<$){if(U(t),t.lookahead<$&&r===f)return O;if(0===t.lookahead)break}if(e=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==e&&t.strstart-e<=t.w_size-$&&(t.match_length=B(t,e)),t.match_length>=S)if(n=s._tr_tally(t,t.strstart-t.match_start,t.match_length-S),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=S){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(x(t,!1),0===t.strm.avail_out))return O}return t.insert=t.strstart<S-1?t.strstart:S-1,r===c?(x(t,!0),0===t.strm.avail_out?D:j):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?O:_}function q(t,r){for(var e,n,i;;){if(t.lookahead<$){if(U(t),t.lookahead<$&&r===f)return O;if(0===t.lookahead)break}if(e=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=S-1,0!==e&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-$&&(t.match_length=B(t,e),t.match_length<=5&&(1===t.strategy||t.match_length===S&&4096<t.strstart-t.match_start)&&(t.match_length=S-1)),t.prev_length>=S&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-S,n=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-S),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=S-1,t.strstart++,n&&(x(t,!1),0===t.strm.avail_out))return O}else if(t.match_available){if((n=s._tr_tally(t,0,t.window[t.strstart-1]))&&x(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return O}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<S-1?t.strstart:S-1,r===c?(x(t,!0),0===t.strm.avail_out?D:j):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?O:_}function G(t,r,e,n,i){this.good_length=t,this.max_lazy=r,this.nice_length=e,this.max_chain=n,this.func=i}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*g),this.dyn_dtree=new i.Buf16(2*(2*p+1)),this.bl_tree=new i.Buf16(2*(2*E+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(P+1),this.heap=new i.Buf16(2*b+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(t){var r;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=w,(r=t.state).pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?k:A,t.adler=2===r.wrap?0:1,r.last_flush=f,s._tr_init(r),h):N(t,l)}function H(t){var r=z(t);return r===h&&function(t){t.window_size=2*t.w_size,I(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=S-1,t.match_available=0,t.ins_h=0}(t.state),r}function Z(t,r,e,n,s,o){if(!t)return l;var a=1;if(r===v&&(r=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||y<s||e!==m||n<8||15<n||r<0||9<r||o<0||d<o)return N(t,l);8===n&&(n=9);var u=new W;return(t.state=u).strm=t,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=s+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+S-1)/S),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<s+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=r,u.strategy=o,u.method=e,H(t)}n=[new G(0,0,0,0,(function(t,r){var e=65535;for(e>t.pending_buf_size-5&&(e=t.pending_buf_size-5);;){if(t.lookahead<=1){if(U(t),0===t.lookahead&&r===f)return O;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+e;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,x(t,!1),0===t.strm.avail_out))return O;if(t.strstart-t.block_start>=t.w_size-$&&(x(t,!1),0===t.strm.avail_out))return O}return t.insert=0,r===c?(x(t,!0),0===t.strm.avail_out?D:j):(t.strstart>t.block_start&&(x(t,!1),t.strm.avail_out),O)})),new G(4,4,8,4,F),new G(4,5,16,8,F),new G(4,6,32,32,F),new G(4,4,16,16,q),new G(8,16,32,32,q),new G(8,16,128,128,q),new G(8,32,128,256,q),new G(32,128,258,1024,q),new G(32,258,258,4096,q)],e.deflateInit=function(t,r){return Z(t,r,m,15,8,0)},e.deflateInit2=Z,e.deflateReset=H,e.deflateResetKeep=z,e.deflateSetHeader=function(t,r){return t&&t.state?2!==t.state.wrap?l:(t.state.gzhead=r,h):l},e.deflate=function(t,r){var e,i,o,u;if(!t||!t.state||5<r||r<0)return t?N(t,l):l;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&r!==c)return N(t,0===t.avail_out?-5:l);if(i.strm=t,e=i.last_flush,i.last_flush=r,i.status===k)if(2===i.wrap)t.adler=0,C(i,31),C(i,139),C(i,8),i.gzhead?(C(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),C(i,255&i.gzhead.time),C(i,i.gzhead.time>>8&255),C(i,i.gzhead.time>>16&255),C(i,i.gzhead.time>>24&255),C(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),C(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(C(i,255&i.gzhead.extra.length),C(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(C(i,0),C(i,0),C(i,0),C(i,0),C(i,0),C(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),C(i,3),i.status=A);else{var v=m+(i.w_bits-8<<4)<<8;v|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(v|=32),v+=31-v%31,i.status=A,L(i,v),0!==i.strstart&&(L(i,t.adler>>>16),L(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),M(t),o=i.pending,i.pending!==i.pending_buf_size));)C(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),M(t),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,C(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),M(t),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,C(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&M(t),i.pending+2<=i.pending_buf_size&&(C(i,255&t.adler),C(i,t.adler>>8&255),t.adler=0,i.status=A)):i.status=A),0!==i.pending){if(M(t),0===t.avail_out)return i.last_flush=-1,h}else if(0===t.avail_in&&R(r)<=R(e)&&r!==c)return N(t,-5);if(666===i.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==i.lookahead||r!==f&&666!==i.status){var d=2===i.strategy?function(t,r){for(var e;;){if(0===t.lookahead&&(U(t),0===t.lookahead)){if(r===f)return O;break}if(t.match_length=0,e=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&(x(t,!1),0===t.strm.avail_out))return O}return t.insert=0,r===c?(x(t,!0),0===t.strm.avail_out?D:j):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?O:_}(i,r):3===i.strategy?function(t,r){for(var e,n,i,o,a=t.window;;){if(t.lookahead<=T){if(U(t),t.lookahead<=T&&r===f)return O;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=S&&0<t.strstart&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=t.strstart+T;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);t.match_length=T-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=S?(e=s._tr_tally(t,1,t.match_length-S),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&(x(t,!1),0===t.strm.avail_out))return O}return t.insert=0,r===c?(x(t,!0),0===t.strm.avail_out?D:j):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?O:_}(i,r):n[i.level].func(i,r);if(d!==D&&d!==j||(i.status=666),d===O||d===D)return 0===t.avail_out&&(i.last_flush=-1),h;if(d===_&&(1===r?s._tr_align(i):5!==r&&(s._tr_stored_block(i,0,0,!1),3===r&&(I(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),M(t),0===t.avail_out))return i.last_flush=-1,h}return r!==c?h:i.wrap<=0?1:(2===i.wrap?(C(i,255&t.adler),C(i,t.adler>>8&255),C(i,t.adler>>16&255),C(i,t.adler>>24&255),C(i,255&t.total_in),C(i,t.total_in>>8&255),C(i,t.total_in>>16&255),C(i,t.total_in>>24&255)):(L(i,t.adler>>>16),L(i,65535&t.adler)),M(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},e.deflateEnd=function(t){var r;return t&&t.state?(r=t.state.status)!==k&&69!==r&&73!==r&&91!==r&&103!==r&&r!==A&&666!==r?N(t,l):(t.state=null,r===A?N(t,-3):h):l},e.deflateSetDictionary=function(t,r){var e,n,s,a,u,f,c,v,d=r.length;if(!t||!t.state)return l;if(2===(a=(e=t.state).wrap)||1===a&&e.status!==k||e.lookahead)return l;for(1===a&&(t.adler=o(t.adler,r,d,0)),e.wrap=0,d>=e.w_size&&(0===a&&(I(e.head),e.strstart=0,e.block_start=0,e.insert=0),v=new i.Buf8(e.w_size),i.arraySet(v,r,d-e.w_size,e.w_size,0),r=v,d=e.w_size),u=t.avail_in,f=t.next_in,c=t.input,t.avail_in=d,t.next_in=0,t.input=r,U(e);e.lookahead>=S;){for(n=e.strstart,s=e.lookahead-(S-1);e.ins_h=(e.ins_h<<e.hash_shift^e.window[n+S-1])&e.hash_mask,e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,--s;);e.strstart=n,e.lookahead=S-1,U(e)}return e.strstart+=e.lookahead,e.block_start=e.strstart,e.insert=e.lookahead,e.lookahead=0,e.match_length=e.prev_length=S-1,e.match_available=0,t.next_in=f,t.input=c,t.avail_in=u,e.wrap=a,h},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,e){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,e){r.exports=function(t,r){var e,n,i,s,o,a,u,f,c,h,l,v,d,w,m,y,b,p,E,g,P,S,T,$,k;e=t.state,n=t.next_in,$=t.input,i=n+(t.avail_in-5),s=t.next_out,k=t.output,o=s-(r-t.avail_out),a=s+(t.avail_out-257),u=e.dmax,f=e.wsize,c=e.whave,h=e.wnext,l=e.window,v=e.hold,d=e.bits,w=e.lencode,m=e.distcode,y=(1<<e.lenbits)-1,b=(1<<e.distbits)-1;t:do{d<15&&(v+=$[n++]<<d,d+=8,v+=$[n++]<<d,d+=8),p=w[v&y];r:for(;;){if(v>>>=E=p>>>24,d-=E,0===(E=p>>>16&255))k[s++]=65535&p;else{if(!(16&E)){if(0==(64&E)){p=w[(65535&p)+(v&(1<<E)-1)];continue r}if(32&E){e.mode=12;break t}t.msg="invalid literal/length code",e.mode=30;break t}g=65535&p,(E&=15)&&(d<E&&(v+=$[n++]<<d,d+=8),g+=v&(1<<E)-1,v>>>=E,d-=E),d<15&&(v+=$[n++]<<d,d+=8,v+=$[n++]<<d,d+=8),p=m[v&b];e:for(;;){if(v>>>=E=p>>>24,d-=E,!(16&(E=p>>>16&255))){if(0==(64&E)){p=m[(65535&p)+(v&(1<<E)-1)];continue e}t.msg="invalid distance code",e.mode=30;break t}if(P=65535&p,d<(E&=15)&&(v+=$[n++]<<d,(d+=8)<E&&(v+=$[n++]<<d,d+=8)),u<(P+=v&(1<<E)-1)){t.msg="invalid distance too far back",e.mode=30;break t}if(v>>>=E,d-=E,(E=s-o)<P){if(c<(E=P-E)&&e.sane){t.msg="invalid distance too far back",e.mode=30;break t}if(T=l,(S=0)===h){if(S+=f-E,E<g){for(g-=E;k[s++]=l[S++],--E;);S=s-P,T=k}}else if(h<E){if(S+=f+h-E,(E-=h)<g){for(g-=E;k[s++]=l[S++],--E;);if(S=0,h<g){for(g-=E=h;k[s++]=l[S++],--E;);S=s-P,T=k}}}else if(S+=h-E,E<g){for(g-=E;k[s++]=l[S++],--E;);S=s-P,T=k}for(;2<g;)k[s++]=T[S++],k[s++]=T[S++],k[s++]=T[S++],g-=3;g&&(k[s++]=T[S++],1<g&&(k[s++]=T[S++]))}else{for(S=s-P;k[s++]=k[S++],k[s++]=k[S++],k[s++]=k[S++],2<(g-=3););g&&(k[s++]=k[S++],1<g&&(k[s++]=k[S++]))}break}}break}}while(n<i&&s<a);n-=g=d>>3,v&=(1<<(d-=g<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=s<a?a-s+257:257-(s-a),e.hold=v,e.bits=d}},{}],49:[function(t,r,e){var n=t("../utils/common"),i=t("./adler32"),s=t("./crc32"),o=t("./inffast"),a=t("./inftrees"),u=1,f=2,c=0,h=-2,l=1,v=852,d=592;function w(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(t){var r;return t&&t.state?(r=t.state,t.total_in=t.total_out=r.total=0,t.msg="",r.wrap&&(t.adler=1&r.wrap),r.mode=l,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new n.Buf32(v),r.distcode=r.distdyn=new n.Buf32(d),r.sane=1,r.back=-1,c):h}function b(t){var r;return t&&t.state?((r=t.state).wsize=0,r.whave=0,r.wnext=0,y(t)):h}function p(t,r){var e,n;return t&&t.state?(n=t.state,r<0?(e=0,r=-r):(e=1+(r>>4),r<48&&(r&=15)),r&&(r<8||15<r)?h:(null!==n.window&&n.wbits!==r&&(n.window=null),n.wrap=e,n.wbits=r,b(t))):h}function E(t,r){var e,n;return t?(n=new m,(t.state=n).window=null,(e=p(t,r))!==c&&(t.state=null),e):h}var g,P,S=!0;function T(t){if(S){var r;for(g=new n.Buf32(512),P=new n.Buf32(32),r=0;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(a(u,t.lens,0,288,g,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;a(f,t.lens,0,32,P,0,t.work,{bits:5}),S=!1}t.lencode=g,t.lenbits=9,t.distcode=P,t.distbits=5}function $(t,r,e,i){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,r,e-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),n.arraySet(o.window,r,e-i,s,o.wnext),(i-=s)?(n.arraySet(o.window,r,e-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}e.inflateReset=b,e.inflateReset2=p,e.inflateResetKeep=y,e.inflateInit=function(t){return E(t,15)},e.inflateInit2=E,e.inflate=function(t,r){var e,v,d,m,y,b,p,E,g,P,S,k,A,O,_,D,j,N,R,I,M,x,C,L,B=0,U=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;12===(e=t.state).mode&&(e.mode=13),y=t.next_out,d=t.output,p=t.avail_out,m=t.next_in,v=t.input,b=t.avail_in,E=e.hold,g=e.bits,P=b,S=p,x=c;t:for(;;)switch(e.mode){case l:if(0===e.wrap){e.mode=13;break}for(;g<16;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(2&e.wrap&&35615===E){U[e.check=0]=255&E,U[1]=E>>>8&255,e.check=s(e.check,U,2,0),g=E=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&E)<<8)+(E>>8))%31){t.msg="incorrect header check",e.mode=30;break}if(8!=(15&E)){t.msg="unknown compression method",e.mode=30;break}if(g-=4,M=8+(15&(E>>>=4)),0===e.wbits)e.wbits=M;else if(M>e.wbits){t.msg="invalid window size",e.mode=30;break}e.dmax=1<<M,t.adler=e.check=1,e.mode=512&E?10:12,g=E=0;break;case 2:for(;g<16;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(e.flags=E,8!=(255&e.flags)){t.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){t.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=E>>8&1),512&e.flags&&(U[0]=255&E,U[1]=E>>>8&255,e.check=s(e.check,U,2,0)),g=E=0,e.mode=3;case 3:for(;g<32;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}e.head&&(e.head.time=E),512&e.flags&&(U[0]=255&E,U[1]=E>>>8&255,U[2]=E>>>16&255,U[3]=E>>>24&255,e.check=s(e.check,U,4,0)),g=E=0,e.mode=4;case 4:for(;g<16;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}e.head&&(e.head.xflags=255&E,e.head.os=E>>8),512&e.flags&&(U[0]=255&E,U[1]=E>>>8&255,e.check=s(e.check,U,2,0)),g=E=0,e.mode=5;case 5:if(1024&e.flags){for(;g<16;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}e.length=E,e.head&&(e.head.extra_len=E),512&e.flags&&(U[0]=255&E,U[1]=E>>>8&255,e.check=s(e.check,U,2,0)),g=E=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(b<(k=e.length)&&(k=b),k&&(e.head&&(M=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),n.arraySet(e.head.extra,v,m,k,M)),512&e.flags&&(e.check=s(e.check,v,k,m)),b-=k,m+=k,e.length-=k),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(0===b)break t;for(k=0;M=v[m+k++],e.head&&M&&e.length<65536&&(e.head.name+=String.fromCharCode(M)),M&&k<b;);if(512&e.flags&&(e.check=s(e.check,v,k,m)),b-=k,m+=k,M)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(0===b)break t;for(k=0;M=v[m+k++],e.head&&M&&e.length<65536&&(e.head.comment+=String.fromCharCode(M)),M&&k<b;);if(512&e.flags&&(e.check=s(e.check,v,k,m)),b-=k,m+=k,M)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;g<16;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(E!==(65535&e.check)){t.msg="header crc mismatch",e.mode=30;break}g=E=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=12;break;case 10:for(;g<32;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}t.adler=e.check=w(E),g=E=0,e.mode=11;case 11:if(0===e.havedict)return t.next_out=y,t.avail_out=p,t.next_in=m,t.avail_in=b,e.hold=E,e.bits=g,2;t.adler=e.check=1,e.mode=12;case 12:if(5===r||6===r)break t;case 13:if(e.last){E>>>=7&g,g-=7&g,e.mode=27;break}for(;g<3;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}switch(e.last=1&E,g-=1,3&(E>>>=1)){case 0:e.mode=14;break;case 1:if(T(e),e.mode=20,6!==r)break;E>>>=2,g-=2;break t;case 2:e.mode=17;break;case 3:t.msg="invalid block type",e.mode=30}E>>>=2,g-=2;break;case 14:for(E>>>=7&g,g-=7&g;g<32;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if((65535&E)!=(E>>>16^65535)){t.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&E,g=E=0,e.mode=15,6===r)break t;case 15:e.mode=16;case 16:if(k=e.length){if(b<k&&(k=b),p<k&&(k=p),0===k)break t;n.arraySet(d,v,m,k,y),b-=k,m+=k,p-=k,y+=k,e.length-=k;break}e.mode=12;break;case 17:for(;g<14;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(e.nlen=257+(31&E),E>>>=5,g-=5,e.ndist=1+(31&E),E>>>=5,g-=5,e.ncode=4+(15&E),E>>>=4,g-=4,286<e.nlen||30<e.ndist){t.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;g<3;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}e.lens[F[e.have++]]=7&E,E>>>=3,g-=3}for(;e.have<19;)e.lens[F[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,C={bits:e.lenbits},x=a(0,e.lens,0,19,e.lencode,0,e.work,C),e.lenbits=C.bits,x){t.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;D=(B=e.lencode[E&(1<<e.lenbits)-1])>>>16&255,j=65535&B,!((_=B>>>24)<=g);){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(j<16)E>>>=_,g-=_,e.lens[e.have++]=j;else{if(16===j){for(L=_+2;g<L;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(E>>>=_,g-=_,0===e.have){t.msg="invalid bit length repeat",e.mode=30;break}M=e.lens[e.have-1],k=3+(3&E),E>>>=2,g-=2}else if(17===j){for(L=_+3;g<L;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}g-=_,M=0,k=3+(7&(E>>>=_)),E>>>=3,g-=3}else{for(L=_+7;g<L;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}g-=_,M=0,k=11+(127&(E>>>=_)),E>>>=7,g-=7}if(e.have+k>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=30;break}for(;k--;)e.lens[e.have++]=M}}if(30===e.mode)break;if(0===e.lens[256]){t.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,C={bits:e.lenbits},x=a(u,e.lens,0,e.nlen,e.lencode,0,e.work,C),e.lenbits=C.bits,x){t.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,C={bits:e.distbits},x=a(f,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,C),e.distbits=C.bits,x){t.msg="invalid distances set",e.mode=30;break}if(e.mode=20,6===r)break t;case 20:e.mode=21;case 21:if(6<=b&&258<=p){t.next_out=y,t.avail_out=p,t.next_in=m,t.avail_in=b,e.hold=E,e.bits=g,o(t,S),y=t.next_out,d=t.output,p=t.avail_out,m=t.next_in,v=t.input,b=t.avail_in,E=e.hold,g=e.bits,12===e.mode&&(e.back=-1);break}for(e.back=0;D=(B=e.lencode[E&(1<<e.lenbits)-1])>>>16&255,j=65535&B,!((_=B>>>24)<=g);){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(D&&0==(240&D)){for(N=_,R=D,I=j;D=(B=e.lencode[I+((E&(1<<N+R)-1)>>N)])>>>16&255,j=65535&B,!(N+(_=B>>>24)<=g);){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}E>>>=N,g-=N,e.back+=N}if(E>>>=_,g-=_,e.back+=_,e.length=j,0===D){e.mode=26;break}if(32&D){e.back=-1,e.mode=12;break}if(64&D){t.msg="invalid literal/length code",e.mode=30;break}e.extra=15&D,e.mode=22;case 22:if(e.extra){for(L=e.extra;g<L;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}e.length+=E&(1<<e.extra)-1,E>>>=e.extra,g-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;D=(B=e.distcode[E&(1<<e.distbits)-1])>>>16&255,j=65535&B,!((_=B>>>24)<=g);){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(0==(240&D)){for(N=_,R=D,I=j;D=(B=e.distcode[I+((E&(1<<N+R)-1)>>N)])>>>16&255,j=65535&B,!(N+(_=B>>>24)<=g);){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}E>>>=N,g-=N,e.back+=N}if(E>>>=_,g-=_,e.back+=_,64&D){t.msg="invalid distance code",e.mode=30;break}e.offset=j,e.extra=15&D,e.mode=24;case 24:if(e.extra){for(L=e.extra;g<L;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}e.offset+=E&(1<<e.extra)-1,E>>>=e.extra,g-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(0===p)break t;if(k=S-p,e.offset>k){if((k=e.offset-k)>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=30;break}A=k>e.wnext?(k-=e.wnext,e.wsize-k):e.wnext-k,k>e.length&&(k=e.length),O=e.window}else O=d,A=y-e.offset,k=e.length;for(p<k&&(k=p),p-=k,e.length-=k;d[y++]=O[A++],--k;);0===e.length&&(e.mode=21);break;case 26:if(0===p)break t;d[y++]=e.length,p--,e.mode=21;break;case 27:if(e.wrap){for(;g<32;){if(0===b)break t;b--,E|=v[m++]<<g,g+=8}if(S-=p,t.total_out+=S,e.total+=S,S&&(t.adler=e.check=e.flags?s(e.check,d,S,y-S):i(e.check,d,S,y-S)),S=p,(e.flags?E:w(E))!==e.check){t.msg="incorrect data check",e.mode=30;break}g=E=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;g<32;){if(0===b)break t;b--,E+=v[m++]<<g,g+=8}if(E!==(4294967295&e.total)){t.msg="incorrect length check",e.mode=30;break}g=E=0}e.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return h}return t.next_out=y,t.avail_out=p,t.next_in=m,t.avail_in=b,e.hold=E,e.bits=g,(e.wsize||S!==t.avail_out&&e.mode<30&&(e.mode<27||4!==r))&&$(t,t.output,t.next_out,S-t.avail_out)?(e.mode=31,-4):(P-=t.avail_in,S-=t.avail_out,t.total_in+=P,t.total_out+=S,e.total+=S,e.wrap&&S&&(t.adler=e.check=e.flags?s(e.check,d,S,t.next_out-S):i(e.check,d,S,t.next_out-S)),t.data_type=e.bits+(e.last?64:0)+(12===e.mode?128:0)+(20===e.mode||15===e.mode?256:0),(0==P&&0===S||4===r)&&x===c&&(x=-5),x)},e.inflateEnd=function(t){if(!t||!t.state)return h;var r=t.state;return r.window&&(r.window=null),t.state=null,c},e.inflateGetHeader=function(t,r){var e;return t&&t.state?0==(2&(e=t.state).wrap)?h:((e.head=r).done=!1,c):h},e.inflateSetDictionary=function(t,r){var e,n=r.length;return t&&t.state?0!==(e=t.state).wrap&&11!==e.mode?h:11===e.mode&&i(1,r,n,0)!==e.check?-3:$(t,r,n,n)?(e.mode=31,-4):(e.havedict=1,c):h},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,e){var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(t,r,e,u,f,c,h,l){var v,d,w,m,y,b,p,E,g,P=l.bits,S=0,T=0,$=0,k=0,A=0,O=0,_=0,D=0,j=0,N=0,R=null,I=0,M=new n.Buf16(16),x=new n.Buf16(16),C=null,L=0;for(S=0;S<=15;S++)M[S]=0;for(T=0;T<u;T++)M[r[e+T]]++;for(A=P,k=15;1<=k&&0===M[k];k--);if(k<A&&(A=k),0===k)return f[c++]=20971520,f[c++]=20971520,l.bits=1,0;for($=1;$<k&&0===M[$];$++);for(A<$&&(A=$),S=D=1;S<=15;S++)if(D<<=1,(D-=M[S])<0)return-1;if(0<D&&(0===t||1!==k))return-1;for(x[1]=0,S=1;S<15;S++)x[S+1]=x[S]+M[S];for(T=0;T<u;T++)0!==r[e+T]&&(h[x[r[e+T]]++]=T);if(b=0===t?(R=C=h,19):1===t?(R=i,I-=257,C=s,L-=257,256):(R=o,C=a,-1),S=$,y=c,_=T=N=0,w=-1,m=(j=1<<(O=A))-1,1===t&&852<j||2===t&&592<j)return 1;for(;;){for(p=S-_,g=h[T]<b?(E=0,h[T]):h[T]>b?(E=C[L+h[T]],R[I+h[T]]):(E=96,0),v=1<<S-_,$=d=1<<O;f[y+(N>>_)+(d-=v)]=p<<24|E<<16|g|0,0!==d;);for(v=1<<S-1;N&v;)v>>=1;if(0!==v?(N&=v-1,N+=v):N=0,T++,0==--M[S]){if(S===k)break;S=r[e+h[T]]}if(A<S&&(N&m)!==w){for(0===_&&(_=A),y+=$,D=1<<(O=S-_);O+_<k&&!((D-=M[O+_])<=0);)O++,D<<=1;if(j+=1<<O,1===t&&852<j||2===t&&592<j)return 1;f[w=N&m]=A<<24|O<<16|y-c|0}}return 0!==N&&(f[y+N]=S-_<<24|64<<16|0),l.bits=A,0}},{"../utils/common":41}],51:[function(t,r,e){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,e){var n=t("../utils/common"),i=0,s=1;function o(t){for(var r=t.length;0<=--r;)t[r]=0}var a=0,u=29,f=256,c=f+1+u,h=30,l=19,v=2*c+1,d=15,w=16,m=7,y=256,b=16,p=17,E=18,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(c+2));o($);var k=new Array(2*h);o(k);var A=new Array(512);o(A);var O=new Array(256);o(O);var _=new Array(u);o(_);var D,j,N,R=new Array(h);function I(t,r,e,n,i){this.static_tree=t,this.extra_bits=r,this.extra_base=e,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function M(t,r){this.dyn_tree=t,this.max_code=0,this.stat_desc=r}function x(t){return t<256?A[t]:A[256+(t>>>7)]}function C(t,r){t.pending_buf[t.pending++]=255&r,t.pending_buf[t.pending++]=r>>>8&255}function L(t,r,e){t.bi_valid>w-e?(t.bi_buf|=r<<t.bi_valid&65535,C(t,t.bi_buf),t.bi_buf=r>>w-t.bi_valid,t.bi_valid+=e-w):(t.bi_buf|=r<<t.bi_valid&65535,t.bi_valid+=e)}function B(t,r,e){L(t,e[2*r],e[2*r+1])}function U(t,r){for(var e=0;e|=1&t,t>>>=1,e<<=1,0<--r;);return e>>>1}function F(t,r,e){var n,i,s=new Array(d+1),o=0;for(n=1;n<=d;n++)s[n]=o=o+e[n-1]<<1;for(i=0;i<=r;i++){var a=t[2*i+1];0!==a&&(t[2*i]=U(s[a]++,a))}}function q(t){var r;for(r=0;r<c;r++)t.dyn_ltree[2*r]=0;for(r=0;r<h;r++)t.dyn_dtree[2*r]=0;for(r=0;r<l;r++)t.bl_tree[2*r]=0;t.dyn_ltree[2*y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){8<t.bi_valid?C(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function W(t,r,e,n){var i=2*r,s=2*e;return t[i]<t[s]||t[i]===t[s]&&n[r]<=n[e]}function z(t,r,e){for(var n=t.heap[e],i=e<<1;i<=t.heap_len&&(i<t.heap_len&&W(r,t.heap[i+1],t.heap[i],t.depth)&&i++,!W(r,n,t.heap[i],t.depth));)t.heap[e]=t.heap[i],e=i,i<<=1;t.heap[e]=n}function H(t,r,e){var n,i,s,o,a=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],i=t.pending_buf[t.l_buf+a],a++,0===n?B(t,i,r):(B(t,(s=O[i])+f+1,r),0!==(o=g[s])&&L(t,i-=_[s],o),B(t,s=x(--n),e),0!==(o=P[s])&&L(t,n-=R[s],o)),a<t.last_lit;);B(t,y,r)}function Z(t,r){var e,n,i,s=r.dyn_tree,o=r.stat_desc.static_tree,a=r.stat_desc.has_stree,u=r.stat_desc.elems,f=-1;for(t.heap_len=0,t.heap_max=v,e=0;e<u;e++)0!==s[2*e]?(t.heap[++t.heap_len]=f=e,t.depth[e]=0):s[2*e+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=o[2*i+1]);for(r.max_code=f,e=t.heap_len>>1;1<=e;e--)z(t,s,e);for(i=u;e=t.heap[1],t.heap[1]=t.heap[t.heap_len--],z(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=e,t.heap[--t.heap_max]=n,s[2*i]=s[2*e]+s[2*n],t.depth[i]=(t.depth[e]>=t.depth[n]?t.depth[e]:t.depth[n])+1,s[2*e+1]=s[2*n+1]=i,t.heap[1]=i++,z(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,r){var e,n,i,s,o,a,u=r.dyn_tree,f=r.max_code,c=r.stat_desc.static_tree,h=r.stat_desc.has_stree,l=r.stat_desc.extra_bits,w=r.stat_desc.extra_base,m=r.stat_desc.max_length,y=0;for(s=0;s<=d;s++)t.bl_count[s]=0;for(u[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<v;e++)m<(s=u[2*u[2*(n=t.heap[e])+1]+1]+1)&&(s=m,y++),u[2*n+1]=s,f<n||(t.bl_count[s]++,o=0,w<=n&&(o=l[n-w]),a=u[2*n],t.opt_len+=a*(s+o),h&&(t.static_len+=a*(c[2*n+1]+o)));if(0!==y){do{for(s=m-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[m]--,y-=2}while(0<y);for(s=m;0!==s;s--)for(n=t.bl_count[s];0!==n;)f<(i=t.heap[--e])||(u[2*i+1]!==s&&(t.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),n--)}}(t,r),F(s,f,t.bl_count)}function J(t,r,e){var n,i,s=-1,o=r[1],a=0,u=7,f=4;for(0===o&&(u=138,f=3),r[2*(e+1)+1]=65535,n=0;n<=e;n++)i=o,o=r[2*(n+1)+1],++a<u&&i===o||(a<f?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[2*b]++):a<=10?t.bl_tree[2*p]++:t.bl_tree[2*E]++,s=i,f=(a=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4))}function V(t,r,e){var n,i,s=-1,o=r[1],a=0,u=7,f=4;for(0===o&&(u=138,f=3),n=0;n<=e;n++)if(i=o,o=r[2*(n+1)+1],!(++a<u&&i===o)){if(a<f)for(;B(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==s&&(B(t,i,t.bl_tree),a--),B(t,b,t.bl_tree),L(t,a-3,2)):a<=10?(B(t,p,t.bl_tree),L(t,a-3,3)):(B(t,E,t.bl_tree),L(t,a-11,7));s=i,f=(a=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4)}}o(R);var Q=!1;function K(t,r,e,i){L(t,(a<<1)+(i?1:0),3),function(t,r,e,i){G(t),i&&(C(t,e),C(t,~e)),n.arraySet(t.pending_buf,t.window,r,e,t.pending),t.pending+=e}(t,r,e,!0)}e._tr_init=function(t){Q||(function(){var t,r,e,n,i,s=new Array(d+1);for(n=e=0;n<u-1;n++)for(_[n]=e,t=0;t<1<<g[n];t++)O[e++]=n;for(O[e-1]=n,n=i=0;n<16;n++)for(R[n]=i,t=0;t<1<<P[n];t++)A[i++]=n;for(i>>=7;n<h;n++)for(R[n]=i<<7,t=0;t<1<<P[n]-7;t++)A[256+i++]=n;for(r=0;r<=d;r++)s[r]=0;for(t=0;t<=143;)$[2*t+1]=8,t++,s[8]++;for(;t<=255;)$[2*t+1]=9,t++,s[9]++;for(;t<=279;)$[2*t+1]=7,t++,s[7]++;for(;t<=287;)$[2*t+1]=8,t++,s[8]++;for(F($,c+1,s),t=0;t<h;t++)k[2*t+1]=5,k[2*t]=U(t,5);D=new I($,g,f+1,c,d),j=new I(k,P,0,h,d),N=new I(new Array(0),S,0,l,m)}(),Q=!0),t.l_desc=new M(t.dyn_ltree,D),t.d_desc=new M(t.dyn_dtree,j),t.bl_desc=new M(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,q(t)},e._tr_stored_block=K,e._tr_flush_block=function(t,r,e,n){var o,a,u=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var r,e=4093624447;for(r=0;r<=31;r++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*r])return i;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return s;for(r=32;r<f;r++)if(0!==t.dyn_ltree[2*r])return s;return i}(t)),Z(t,t.l_desc),Z(t,t.d_desc),u=function(t){var r;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),Z(t,t.bl_desc),r=l-1;3<=r&&0===t.bl_tree[2*T[r]+1];r--);return t.opt_len+=3*(r+1)+5+5+4,r}(t),o=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=o&&(o=a)):o=a=e+5,e+4<=o&&-1!==r?K(t,r,e,n):4===t.strategy||a===o?(L(t,2+(n?1:0),3),H(t,$,k)):(L(t,4+(n?1:0),3),function(t,r,e,n){var i;for(L(t,r-257,5),L(t,e-1,5),L(t,n-4,4),i=0;i<n;i++)L(t,t.bl_tree[2*T[i]+1],3);V(t,t.dyn_ltree,r-1),V(t,t.dyn_dtree,e-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),H(t,t.dyn_ltree,t.dyn_dtree)),q(t),n&&G(t)},e._tr_tally=function(t,r,e){return t.pending_buf[t.d_buf+2*t.last_lit]=r>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&r,t.pending_buf[t.l_buf+t.last_lit]=255&e,t.last_lit++,0===r?t.dyn_ltree[2*e]++:(t.matches++,r--,t.dyn_ltree[2*(O[e]+f+1)]++,t.dyn_dtree[2*x(r)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){L(t,2,3),B(t,y,$),function(t){16===t.bi_valid?(C(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,r,e){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,e){(function(t){!function(t,r){if(!t.setImmediate){var e,n,i,s,o=1,a={},u=!1,f=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,e="[object process]"==={}.toString.call(t.process)?function(t){G.nextTick((function(){l(t)}))}:function(){if(t.postMessage&&!t.importScripts){var r=!0,e=t.onmessage;return t.onmessage=function(){r=!1},t.postMessage("","*"),t.onmessage=e,r}}()?(s="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",v,!1):t.attachEvent("onmessage",v),function(r){t.postMessage(s+r,"*")}):t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){l(t.data)},function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(n=f.documentElement,function(t){var r=f.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,n.removeChild(r),r=null},n.appendChild(r)}):function(t){setTimeout(l,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var r=new Array(arguments.length-1),n=0;n<r.length;n++)r[n]=arguments[n+1];var i={callback:t,args:r};return a[o]=i,e(o),o++},c.clearImmediate=h}function h(t){delete a[t]}function l(t){if(u)setTimeout(l,0,t);else{var e=a[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{h(t),u=!1}}}}function v(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(s)&&l(+r.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,"undefined"!=typeof nr?nr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}))}));const fn=":host{display:block}#fileElem{display:none}";const cn=class{constructor(e){t(this,e);this.importProgress=r(this,"jeepSqliteImportProgress",7);this.exportProgress=r(this,"jeepSqliteExportProgress",7);this.isStore=false;this._dbDict={};this.databaseList={};this._versionUpgrades={}}parseAutoSave(t){this.innerAutoSave=t}async echo(t){return t}async createConnection(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.version?t.version:1;try{await this._createConnection(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}async isConnection(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=await this._isConnection(e);return Promise.resolve(n)}async closeConnection(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{await this._closeConnection(e);return Promise.resolve()}catch(t){return Promise.reject(t)}}async open(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{await this._open(e);return Promise.resolve()}catch(t){return Promise.reject(t)}}async close(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{await this._close(e);return Promise.resolve()}catch(t){return Promise.reject(t)}}async getVersion(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._getVersion(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("statements")||t.statements.length===0){return Promise.reject("Must provide raw SQL statements")}const e=t.database;const n=t.statements;let i=true;if(r.includes("transaction"))i=t.transaction;try{const t=await this._execute(e,n,i);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async executeSet(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("set")||t.set.length===0){return Promise.reject("Must provide a non-empty set of SQL statements")}const e=t.database;const n=t.set;let i=true;if(r.includes("transaction"))i=t.transaction;try{const t=await this._executeSet(e,n,i);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async run(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("statement")||t.statement.length===0){return Promise.reject("Must provide a run statement")}const e=t.database;const n=t.statement;let i=[];if(r.includes("values")){i=t.values.length>0?t.values:[]}let s=true;if(r.includes("transaction"))s=t.transaction;try{const t=await this._run(e,n,i,s);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async query(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("statement")||t.statement.length===0){return Promise.reject("Must provide a query statement")}let e=[];if(r.includes("values")){e=t.values.length>0?t.values:[]}const n=t.database;const i=t.statement;try{const t=await this._query(n,i,e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._getTableList(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBExists(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._isDBExists(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBOpen(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._isDBOpen(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async deleteDatabase(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{return await this._deleteDatabase(e)}catch(t){return Promise.reject(t)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(t){let r;if(t!=null){const e=Object.keys(t);r=e.includes("overwrite")?t.overwrite:true}else{r=true}if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}try{await this._copyFromAssets(r);return Promise.resolve()}catch(t){return Promise.reject(t)}}async isTableExists(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;if(!r.includes("table")){return Promise.reject("Must provide a table name")}const n=t.table;try{const t=await this._isTableExists(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async createSyncTable(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._createSyncTable(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getSyncDate(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._getSyncDate(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setSyncDate(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("syncdate")){return Promise.reject("Must provide a synchronization date")}const e=t.database;const n=t.syncdate;try{await this._setSyncDate(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}async isJsonValid(t){const r=Object.keys(t);if(!r.includes("jsonstring")){return Promise.reject("Must provide a json object")}const e=t.jsonstring;try{const t=await this._isJsonValid(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async importFromJson(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("jsonstring")){return Promise.reject("Must provide a json object")}const e=t.jsonstring;try{const t=await this._importFromJson(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async exportToJson(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("jsonexportmode")){return Promise.reject("Must provide a json export mode")}const e=t.database;const n=t.jsonexportmode;try{const t=await this._exportToJson(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async deleteExportedRows(t){const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{await this._deleteExportedRows(e);return Promise.resolve()}catch(t){return Promise.reject(t)}}async addUpgradeStatement(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("upgrade")){return Promise.reject("Must provide an upgrade statement")}const e=t.database;const n=t.upgrade[0];r=Object.keys(n);if(!r.includes("fromVersion")||!r.includes("toVersion")||!r.includes("statement")){return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object")}if(typeof n.fromVersion!="number"){return Promise.reject("ugrade.fromVersion must be a number")}const i={};i[n.fromVersion]=n;this._versionUpgrades[e]=i;return Promise.resolve()}async isDatabase(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._isDatabase(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getDatabaseList(){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}try{const t=await this._getDatabaseList();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async checkConnectionsConsistency(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("dbNames")){return Promise.reject(`Must provide a list of connection's name`)}const e=t.dbNames;try{const t=await this._checkConnectionsConsistency(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async saveToStore(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{await this._saveToStore(e);return Promise.resolve()}catch(t){return Promise.reject(t)}}async componentWillLoad(){this.isStore=await this.openStore("jeepSqliteStore","databases");this.parseAutoSave(this.autoSave!=undefined?this.autoSave:false)}componentDidLoad(){if(!this.isStore){console.log("jeep-sqlite isStore = false")}}async _createConnection(t,r){let e={};const n=Object.keys(this._versionUpgrades);if(n.length!==0&&n.includes(t)){e=this._versionUpgrades[t]}try{const n=new on(t+"SQLite.db",r,e,this.store,this.innerAutoSave);this._dbDict[t]=n;return Promise.resolve()}catch(t){return Promise.reject(t.message)}}async _isConnection(t){const r=Object.keys(this._dbDict);if(r.includes(t)){return{result:true}}else{return{result:false}}}async _closeConnection(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`CloseConnection: No available connection for ${t}`)}const e=this._dbDict[t];try{if(e.isDBOpen()){try{await e.close()}catch(r){return Promise.reject(`CloseConnection: close ${t} failed ${r}`)}}delete this._dbDict[t];return Promise.resolve()}catch(t){return Promise.reject(`CloseConnection: ${t.message}`)}}async _open(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`Open: No available connection for ${t}`)}const e=this._dbDict[t];try{await e.open();return Promise.resolve()}catch(t){return Promise.reject(`Open: ${t.message}`)}}async _close(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`Close: No available connection for ${t}`)}const e=this._dbDict[t];try{await e.close();return Promise.resolve()}catch(t){return Promise.reject(`Close: ${t.message}`)}}async _saveToStore(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`SaveToStore: No available connection for ${t}`)}const e=this._dbDict[t];try{await e.saveToStore();return Promise.resolve()}catch(t){return Promise.reject(`SaveToStore: ${t.message}`)}}async _getVersion(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`Open: No available connection for ${t}`)}const e=this._dbDict[t];try{const t=await e.getVersion();const r={};r.version=t;return Promise.resolve(r)}catch(t){return Promise.reject(`Open: ${t.message}`)}}async _execute(t,r,e){const n=Object.keys(this._dbDict);if(!n.includes(t)){return Promise.reject(`Execute: No available connection for ${t}`)}const i=this._dbDict[t];try{const t=await i.executeSQL(r,e);const n={changes:{changes:t}};return Promise.resolve(n)}catch(t){return Promise.reject(`Execute: ${t.message}`)}}async _executeSet(t,r,e){const n=Object.keys(this._dbDict);if(!n.includes(t)){return Promise.reject(`ExecuteSet: No available connection for ${t}`)}const i=this._dbDict[t];for(const t of r){if(!("statement"in t)||!("values"in t)){return Promise.reject("ExecuteSet: Must provide a set as "+"Array of {statement,values}")}}try{const t=await i.execSet(r,e);const n={changes:{changes:t.changes,lastId:t.lastId}};return Promise.resolve(n)}catch(t){return Promise.reject(`ExecuteSet: ${t.message}`)}}async _run(t,r,e,n){const i=Object.keys(this._dbDict);if(!i.includes(t)){return Promise.reject(`Run: No available connection for ${t}`)}const s=this._dbDict[t];try{const t=await s.runSQL(r,e,n);const i={changes:{changes:t.changes,lastId:t.lastId}};return Promise.resolve(i)}catch(t){return Promise.reject(`Run: ${t.message}`)}}async _query(t,r,e){const n=Object.keys(this._dbDict);if(!n.includes(t)){return Promise.reject(`Query: No available connection for ${t}`)}const i=this._dbDict[t];let s=[];try{s=await i.selectSQL(r,e);return Promise.resolve({values:s})}catch(t){return Promise.reject(`Query failed: ${t.message}`)}}async _getTableList(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`GetTableList: No available connection for ${t}`)}const e=this._dbDict[t];let n=[];try{n=await e.getTableNames();return Promise.resolve({values:n})}catch(t){return Promise.reject(`GetTableList failed: ${t.message}`)}}async _isDBExists(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`IsDBExists: No available connection for ${t}`)}const e=this._dbDict[t];try{const r=await e.isDBExists(t+"SQLite.db");const n={result:r};return Promise.resolve(n)}catch(t){return Promise.reject(`IsDBExists: ${t.message}`)}}async _isDBOpen(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`IsDBOpen: No available connection for ${t}`)}const e=this._dbDict[t];try{const r=await e.isDBOpen(t+"SQLite.db");const n={result:r};return Promise.resolve(n)}catch(t){return Promise.reject(`IsDBOpen: ${t.message}`)}}async _deleteDatabase(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject(`DeleteDatabase: No available connection for ${t}`)}const e=this._dbDict[t];try{await e.deleteDB(t+"SQLite.db");return Promise.resolve()}catch(t){return Promise.reject(`DeleteDatabase: ${t.message}`)}}async _isTableExists(t,r){const e=Object.keys(this._dbDict);if(!e.includes(t)){return Promise.reject(`IsTableExists: No available connection for ${t}`)}const n=this._dbDict[t];try{const t=await n.isTable(r);const e={result:t};return Promise.resolve(e)}catch(t){return Promise.reject(`IsTableExists: ${t.message}`)}}async _createSyncTable(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject("CreateSyncTable: No available connection for "+`${t}`)}const e=this._dbDict[t];try{const t=await e.createSyncTable();return Promise.resolve({changes:{changes:t}})}catch(t){return Promise.reject(`CreateSyncTable: ${t.message}`)}}async _getSyncDate(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject("GetSyncDate: No available connection for "+`${t}`)}const e=this._dbDict[t];try{const t=await e.getSyncDate();return Promise.resolve({syncDate:t})}catch(t){return Promise.reject(`GetSyncDate: ${t.message}`)}}async _setSyncDate(t,r){const e=Object.keys(this._dbDict);if(!e.includes(t)){return Promise.reject("SetSyncDate: No available connection for "+`${t}`)}const n=this._dbDict[t];try{const t=await n.setSyncDate(r);if(t.result){return Promise.resolve()}else{return Promise.reject(`SetSyncDate: ${t.message}`)}}catch(t){return Promise.reject(`SetSyncDate: ${t.message}`)}}async _isJsonValid(t){const r=JSON.parse(t);const e=await qr(r);if(!e){return Promise.reject("IsJsonValid: Stringify Json Object not Valid")}else{return Promise.resolve({result:true})}}async _importFromJson(t){var r,e;const n=JSON.parse(t);const i=await qr(n);if(!i){return Promise.reject("ImportFromJson: Stringify Json Object not Valid")}const s=n;const o=`${s.database}SQLite.db`;const a=(r=s.version)!==null&&r!==void 0?r:1;const u=s.mode;const f=(e=s.overwrite)!==null&&e!==void 0?e:false;const c=new on(o,a,{},this.store,this.innerAutoSave);try{if(f&&u==="full"){const t=Ir(o,this.store);if(t){await Rr(o,this.store)}}await c.open();const t=await c.getTableNames();if(u==="full"&&t.length>0){const t=await c.getVersion();if(a<t){return Promise.reject(`ImportFromJson: Cannot import a version lower than ${t}`)}if(t===a){return Promise.resolve({changes:{changes:0}})}}const r=await c.importJson(s,this.importProgress);await c.close();return Promise.resolve({changes:{changes:r}})}catch(t){return Promise.reject(`ImportFromJson: ${t.message}`)}}async _exportToJson(t,r){const e=Object.keys(this._dbDict);if(!e.includes(t)){return Promise.reject("ExportToJson: No available connection for "+`${t}`)}const n=this._dbDict[t];try{const t=await n.exportJson(r,this.exportProgress);const e=Object.keys(t);if(e.includes("message")){return Promise.reject(`ExportToJson: ${t.message}`)}else{return Promise.resolve({export:t})}}catch(t){return Promise.reject(`ExportToJson: ${t.message}`)}}async _deleteExportedRows(t){const r=Object.keys(this._dbDict);if(!r.includes(t)){return Promise.reject("ExportToJson: No available connection for "+`${t}`)}const e=this._dbDict[t];try{await e.deleteExportedRows()}catch(t){return Promise.reject(`DeleteExportedRows: ${t.message}`)}}async _copyFromAssets(t){const r=await this.loadJSON("assets/databases/databases.json");if(r!=null){this.databaseList=JSON.parse(r);const e=Object.keys(this.databaseList);if(e.includes("databaseList")){try{for(const r of this.databaseList.databaseList){if(r.substring(r.length-3)===".db"){await this.copyDatabase(`assets/databases/${r}`,t)}if(r.substring(r.length-4)===".zip"){await this.unzipDatabase(`assets/databases/${r}`,t)}}return Promise.resolve()}catch(t){return Promise.reject(`CopyFromAssets: ${t.message}`)}}else{return Promise.reject(`CopyFromAssets: no key databaseList in databases.json`)}}else{return Promise.reject(`CopyFromAssets: no databases.json file in assets/databases folder`)}}async _isDatabase(t){try{const r=await Ir(t+"SQLite.db",this.store);const e={result:r};return Promise.resolve(e)}catch(t){return Promise.reject(`IsDatabase: ${t.message}`)}}async _getDatabaseList(){try{const t=await Cr(this.store);const r={values:t};return Promise.resolve(r)}catch(t){return Promise.reject(`GetDatabaseList: ${t.message}`)}}async _checkConnectionsConsistency(t){const r={};r.result=false;try{let e=new Set(Object.keys(this._dbDict));const n=new Set(t);if(n.size===0){await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(r)}if(e.size<n.size){await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(r)}if(e.size>n.size){for(const t of e){if(!Array.from(n.keys()).includes(t)){await this._closeConnection(t)}}}e=new Set(Object.keys(this._dbDict));if(e.size===n.size){const t=await this.symmetricDifference(e,n);if(t.size===0){r.result=true;return Promise.resolve(r)}else{await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(r)}}else{await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(r)}}catch(t){return Promise.reject(`CheckConnectionsConsistency: ${t.message}`)}}async _resetDbDict(t){try{for(const r of t){await this._closeConnection(r)}}catch(t){return Promise.reject(`ResetDbDict: ${t.message}`)}}async symmetricDifference(t,r){let e=new Set(t);for(const t of r){if(e.has(t)){e.delete(t)}else{e.add(t)}}return e}async unzipDatabase(t,r){return new Promise(((e,n)=>{var i=new XMLHttpRequest;i.open("GET",t,true);i.responseType="arraybuffer";i.onerror=()=>{n(`unzipDatabase: failed`)};i.onload=()=>{try{un.loadAsync(i.response).then((t=>{Object.keys(t.files).forEach((e=>{t.files[e].async("nodebuffer").then((async t=>{const n=new Uint8Array(t);const i=this.setPathSuffix(e);const s=await Ir(i,this.store);if(!s||r){if(r&&s){await Rr(i,this.store)}await Nr(i,n,this.store)}}))}));e()}))}catch(t){n(`unzipDatabase Error: ${t}`)}};i.send()}))}async copyDatabase(t,r){return new Promise(((e,n)=>{var i=new XMLHttpRequest;var s;i.open("GET",t,true);i.responseType="arraybuffer";i.onerror=()=>{n(`CopyDatabase: failed`)};i.onload=()=>{s=new Uint8Array(i.response)};i.onloadend=async()=>{const n=this.setPathSuffix(t);const i=await Ir(n,this.store);if(!i||r){if(r&&i){await Rr(n,this.store)}await Nr(n,s,this.store)}e()};i.send()}))}async loadJSON(t){return new Promise(((r,e)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json");n.open("GET",t,true);n.onerror=()=>{e(`LoadJSON: failed`)};n.onreadystatechange=function(){if(n.status==404)r(null);if(n.readyState==4&&n.status==200){r(n.responseText)}};n.send(null)}))}async openStore(t,r){let e=false;const n=this.setConfig(t,r);this.store=an.createInstance(n);if(this.store!=null){this.storeName=t;e=true}return e}setConfig(t,r){const e={name:t,storeName:r,driver:[an.INDEXEDDB],version:1};return e}setPathSuffix(t){let r=t.slice(t.lastIndexOf("/")+1);const e=".db";if(t.substring(t.length-3)===e){if(!t.includes("SQLite.db")){r=t.slice(t.lastIndexOf("/")+1,-3)+"SQLite.db"}}return r}render(){return}static get assetsDirs(){return["assets"]}static get watchers(){return{autoSave:["parseAutoSave"]}}};cn.style=fn;export{cn as jeep_sqlite};
//# sourceMappingURL=p-6c84135a.entry.js.map